!function(){var e=X3D.define,t=X3D.require;e("x_ite/Components/NURBS/CoordinateDouble",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Rendering/X3DCoordinateNode","x_ite/Bits/X3DConstants"],function(e,t,n,r,i){"use strict";function o(e){r.call(this,e),this.addType(i.CoordinateDouble)}return o.prototype=Object.assign(Object.create(r.prototype),{constructor:o,fieldDefinitions:new n([new t(i.inputOutput,"metadata",new e.SFNode),new t(i.inputOutput,"point",new e.MFVec3d)]),getTypeName:function(){return"CoordinateDouble"},getComponentName:function(){return"NURBS"},getContainerField:function(){return"coord"}}),o}),e("x_ite/Components/NURBS/X3DParametricGeometryNode",["x_ite/Components/Rendering/X3DGeometryNode","x_ite/Bits/X3DConstants"],function(e,t){"use strict";function n(n){e.call(this,n),this.addType(t.X3DParametricGeometryNode)}return n.prototype=Object.assign(Object.create(e.prototype),{constructor:n}),n}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof e&&e.amd)e("verb/build/js/verb",[],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.verb=t()}}(function(){var e={},n=this,r=(new Function("try {return this===window;}catch(e){ return false;}"),new Function("try {return this===global;}catch(e){return false;}")),i=new Function("try {return typeof importScripts === 'function';}catch(e){return false;}");if(r()&&!i()&&(Worker=t("webworker-threads").Worker),r()||i()){var o=n;if(i()){var a=function(e,t){var r=n;return e.split(".").forEach(function(e){r&&(r=r[e])}),r?r[t]:null};onmessage=function(e){if(e.data.className&&e.data.methodName){var t=a(e.data.className,e.data.methodName);if(!t)return console.error("could not find "+e.data.className+"."+e.data.methodName);postMessage({result:t.apply(null,e.data.args),id:e.data.id})}}}}return function(e,t,n){"use strict";function r(e,t){function n(){}n.prototype=e;var r=new n;for(var i in t)r[i]=t[i];return t.toString!==Object.prototype.toString&&(r.toString=t.toString),r}function i(e){return e instanceof Array?function(){return u.iter(e)}:"function"==typeof e.iterator?o(e,e.iterator):e.iterator}function o(e,t){if(null==t)return null;null==t.__id__&&(t.__id__=ut++);var n;return null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=function(){return n.method.apply(n.scope,arguments)},n.scope=e,n.method=t,e.hx__closures__[t.__id__]=n),n}t.geom=t.geom||{},t.exe=t.exe||{},t.eval=t.eval||{},t.core=t.core||{},t.promhx=t.promhx||{};var a={},s=function(){return A.__string_rec(this,"")},u=function(){};a.HxOverrides=u,u.__name__=["HxOverrides"],u.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:var r=e.split("-");return new Date(r[0],r[1]-1,r[2],0,0,0);case 19:var i=e.split(" "),o=i[0].split("-"),a=i[1].split(":");return new Date(o[0],o[1]-1,o[2],a[0],a[1],a[2]);default:throw new N("Invalid date format : "+e)}},u.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},u.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&n<0?"":(null==n&&(n=e.length),t<0?(t=e.length+t)<0&&(t=0):n<0&&(n=e.length+n-t),e.substr(t,n))},u.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var l=function(){};a.Lambda=l,l.__name__=["Lambda"],l.fold=function(e,t,n){for(var r=i(e)();r.hasNext();){n=t(r.next(),n)}return n};var c=function(){this.length=0};a.List=c,c.__name__=["List"],c.prototype={add:function(e){var t=[e];null==this.h?this.h=t:this.q[1]=t,this.q=t,this.length++},pop:function(){if(null==this.h)return null;var e=this.h[0];return this.h=this.h[1],null==this.h&&(this.q=null),this.length--,e},isEmpty:function(){return null==this.h},__class__:c},Math.__name__=["Math"];var h=function(){};a.Reflect=h,h.__name__=["Reflect"],h.field=function(e,t){try{return e[t]}catch(e){return e instanceof N&&(e=e.val),null}},h.callMethod=function(e,t,n){return t.apply(e,n)},h.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var r in e)"__id__"!=r&&"hx__closures__"!=r&&n.call(e,r)&&t.push(r)}return t},h.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},h.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};var f=function(){};a.Std=f,f.__name__=["Std"],f.string=function(e){return A.__string_rec(e,"")},f.parseFloat=function(e){return parseFloat(e)};var v=function(){this.b=""};a.StringBuf=v,v.__name__=["StringBuf"],v.prototype={add:function(e){this.b+=f.string(e)},__class__:v};var _=function(){};a.StringTools=_,_.__name__=["StringTools"],_.fastCodeAt=function(e,t){return e.charCodeAt(t)};var d=a.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};d.TNull=["TNull",0],d.TNull.toString=s,d.TNull.__enum__=d,d.TInt=["TInt",1],d.TInt.toString=s,d.TInt.__enum__=d,d.TFloat=["TFloat",2],d.TFloat.toString=s,d.TFloat.__enum__=d,d.TBool=["TBool",3],d.TBool.toString=s,d.TBool.__enum__=d,d.TObject=["TObject",4],d.TObject.toString=s,d.TObject.__enum__=d,d.TFunction=["TFunction",5],d.TFunction.toString=s,d.TFunction.__enum__=d,d.TClass=function(e){var t=["TClass",6,e];return t.__enum__=d,t.toString=s,t},d.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=d,t.toString=s,t},d.TUnknown=["TUnknown",8],d.TUnknown.toString=s,d.TUnknown.__enum__=d;var p=function(){};a.Type=p,p.__name__=["Type"],p.getClassName=function(e){var t=e.__name__;return null==t?null:t.join(".")},p.getEnumName=function(e){return e.__ename__.join(".")},p.resolveClass=function(e){var t=a[e];return null!=t&&t.__name__?t:null},p.resolveEnum=function(e){var t=a[e];return null!=t&&t.__ename__?t:null},p.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},p.createEnum=function(e,t,n){var r=h.field(e,t);if(null==r)throw new N("No such constructor "+t);if(h.isFunction(r)){if(null==n)throw new N("Constructor "+t+" need parameters");return h.callMethod(e,r,n)}if(null!=n&&0!=n.length)throw new N("Constructor "+t+" does not need parameters");return r},p.getEnumConstructs=function(e){return e.__constructs__.slice()},p.typeof=function(e){switch(typeof e){case"boolean":return d.TBool;case"string":return d.TClass(String);case"number":return Math.ceil(e)==e%2147483648?d.TInt:d.TFloat;case"object":if(null==e)return d.TNull;var t=e.__enum__;if(null!=t)return d.TEnum(t);var n=A.getClass(e);return null!=n?d.TClass(n):d.TObject;case"function":return e.__name__||e.__ename__?d.TObject:d.TFunction;case"undefined":return d.TNull;default:return d.TUnknown}};var m=function(){};a["haxe.IMap"]=m,m.__name__=["haxe","IMap"];var g=function(e,t){this.high=e,this.low=t};a["haxe._Int64.___Int64"]=g,g.__name__=["haxe","_Int64","___Int64"],g.prototype={__class__:g};var b=function(){this.buf=new v,this.cache=[],this.useCache=b.USE_CACHE,this.useEnumIndex=b.USE_ENUM_INDEX,this.shash=new P,this.scount=0};a["haxe.Serializer"]=b,b.__name__=["haxe","Serializer"],b.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash.get(e);if(null!=t)return this.buf.b+="R",void(this.buf.b+=null==t?"null":""+t);this.shash.set(e,this.scount++),this.buf.b+="y",e=encodeURIComponent(e),null==e.length?this.buf.b+="null":this.buf.b+=""+e.length,this.buf.b+=":",this.buf.b+=null==e?"null":""+e},serializeRef:function(e){for(var t=typeof e,n=0,r=this.cache.length;n<r;){var i=n++,o=this.cache[i];if(typeof o==t&&o==e)return this.buf.b+="r",this.buf.b+=null==i?"null":""+i,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var t=0,n=h.fields(e);t<n.length;){var r=n[t];++t,this.serializeString(r),this.serialize(h.field(e,r))}this.buf.b+="g"},serialize:function(e){var t=p.typeof(e);switch(t[1]){case 0:this.buf.b+="n";break;case 1:var n=e;if(0==n)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==n?"null":""+n;break;case 2:var r=e;isNaN(r)?this.buf.b+="k":isFinite(r)?(this.buf.b+="d",this.buf.b+=null==r?"null":""+r):this.buf.b+=r<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 6:var i=t[2];if(i==String)return void this.serializeString(e);if(this.useCache&&this.serializeRef(e))return;switch(i){case Array:var o=0;this.buf.b+="a";for(var a=e.length,s=0;s<a;){var u=s++;null==e[u]?o++:(o>0&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o),o=0),this.serialize(e[u]))}o>0&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o)),this.buf.b+="h";break;case c:this.buf.b+="l";for(var l=e,_=l.h,d=null;null!=_;){var m;d=_[0],_=_[1],m=d,this.serialize(m)}this.buf.b+="h";break;case Date:var g=e;this.buf.b+="v",this.buf.add(g.getTime());break;case P:this.buf.b+="b";for(var w=e,k=w.keys();k.hasNext();){var C=k.next();this.serializeString(C),this.serialize(null!=dt[C]?w.getReserved(C):w.h[C])}this.buf.b+="h";break;case y:this.buf.b+="q";for(var M=e,z=M.keys();z.hasNext();){var I=z.next();this.buf.b+=":",this.buf.b+=null==I?"null":""+I,this.serialize(M.h[I])}this.buf.b+="h";break;case S:this.buf.b+="M";for(var E=e,T=E.keys();T.hasNext();){var B=T.next(),D=h.field(B,"__id__");h.deleteField(B,"__id__"),this.serialize(B),B.__id__=D,this.serialize(E.h[B.__id__])}this.buf.b+="h";break;case x:for(var L=e,U=0,O=L.length-2,R=new v,V=b.BASE64;U<O;){var F=L.get(U++),j=L.get(U++),q=L.get(U++);R.add(V.charAt(F>>2)),R.add(V.charAt(63&(F<<4|j>>4))),R.add(V.charAt(63&(j<<2|q>>6))),R.add(V.charAt(63&q))}if(U==O){var G=L.get(U++),K=L.get(U++);R.add(V.charAt(G>>2)),R.add(V.charAt(63&(G<<4|K>>4))),R.add(V.charAt(K<<2&63))}else if(U==O+1){var W=L.get(U++);R.add(V.charAt(W>>2)),R.add(V.charAt(W<<4&63))}var H=R.b;this.buf.b+="s",null==H.length?this.buf.b+="null":this.buf.b+=""+H.length,this.buf.b+=":",this.buf.b+=null==H?"null":""+H;break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(p.getClassName(i)),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(p.getClassName(i)),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 4:if(A.__instanceof(e,vt)){var X=p.getClassName(e);this.buf.b+="A",this.serializeString(X)}else if(A.__instanceof(e,_t))this.buf.b+="B",this.serializeString(p.getEnumName(e));else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 7:var Q=t[2];if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.useEnumIndex?this.buf.b+="j":this.buf.b+="w",this.serializeString(p.getEnumName(Q)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=f.string(e[1])):this.serializeString(e[0]),this.buf.b+=":";var Y=e.length;this.buf.b+=f.string(Y-2);for(var Z=2;Z<Y;){var $=Z++;this.serialize(e[$])}this.useCache&&this.cache.push(e);break;case 5:throw new N("Cannot serialize function");default:throw new N("Cannot serialize "+f.string(e))}},__class__:b};var w=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=w.DEFAULT_RESOLVER;null==t&&(t=p,w.DEFAULT_RESOLVER=t),this.setResolver(t)};a["haxe.Unserializer"]=w,w.__name__=["haxe","Unserializer"],w.initCodes=function(){for(var e=[],t=0,n=w.BASE64.length;t<n;){var r=t++;e[w.BASE64.charCodeAt(r)]=r}return e},w.prototype={setResolver:function(e){this.resolver=null==e?{resolveClass:function(e){return null},resolveEnum:function(e){return null}}:e},get:function(e){return this.buf.charCodeAt(e)},readDigits:function(){for(var e=0,t=!1,n=this.pos;;){var r=this.buf.charCodeAt(this.pos);if(r!=r)break;if(45!=r){if(r<48||r>57)break;e=10*e+(r-48),this.pos++}else{if(this.pos!=n)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(!(t>=43&&t<58||101==t||69==t))break;this.pos++}return f.parseFloat(u.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new N("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new N("Invalid object key");var n=this.unserialize();e[t]=n}this.pos++},unserializeEnum:function(e,t){if(58!=this.get(this.pos++))throw new N("Invalid enum format");var n=this.readDigits();if(0==n)return p.createEnum(e,t);for(var r=[];n-- >0;)r.push(this.unserialize());return p.createEnum(e,t,r)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:return this.readFloat();case 121:var e=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<e)throw new N("Invalid string length");var t=u.substr(this.buf,this.pos,e);return this.pos+=e,t=decodeURIComponent(t.split("+").join(" ")),this.scache.push(t),t;case 107:return NaN;case 109:return-(1/0);case 112:return 1/0;case 97:var n=(this.buf,[]);for(this.cache.push(n);;){var r=this.buf.charCodeAt(this.pos);if(104==r){this.pos++;break}if(117==r){this.pos++;var i=this.readDigits();n[n.length+i-1]=null}else n.push(this.unserialize())}return n;case 111:var o={};return this.cache.push(o),this.unserializeObject(o),o;case 114:var a=this.readDigits();if(a<0||a>=this.cache.length)throw new N("Invalid reference");return this.cache[a];case 82:var s=this.readDigits();if(s<0||s>=this.scache.length)throw new N("Invalid string reference");return this.scache[s];case 120:throw new N(this.unserialize());case 99:var l=this.unserialize(),h=this.resolver.resolveClass(l);if(null==h)throw new N("Class not found "+l);var f=p.createEmptyInstance(h);return this.cache.push(f),this.unserializeObject(f),f;case 119:var v=this.unserialize(),d=this.resolver.resolveEnum(v);if(null==d)throw new N("Enum not found "+v);var m=this.unserializeEnum(d,this.unserialize());return this.cache.push(m),m;case 106:var g=this.unserialize(),b=this.resolver.resolveEnum(g);if(null==b)throw new N("Enum not found "+g);this.pos++;var k=this.readDigits(),C=p.getEnumConstructs(b)[k];if(null==C)throw new N("Unknown enum index "+g+"@"+k);var M=this.unserializeEnum(b,C);return this.cache.push(M),M;case 108:var A=new c;for(this.cache.push(A),this.buf;104!=this.buf.charCodeAt(this.pos);)A.add(this.unserialize());return this.pos++,A;case 98:var z=new P;for(this.cache.push(z),this.buf;104!=this.buf.charCodeAt(this.pos);){var I=this.unserialize();z.set(I,this.unserialize())}return this.pos++,z;case 113:var E=new y;this.cache.push(E);for(var T=(this.buf,this.get(this.pos++));58==T;){var B=this.readDigits();E.set(B,this.unserialize()),T=this.get(this.pos++)}if(104!=T)throw new N("Invalid IntMap format");return E;case 77:var D=new S;for(this.cache.push(D),this.buf;104!=this.buf.charCodeAt(this.pos);){var L=this.unserialize();D.set(L,this.unserialize())}return this.pos++,D;case 118:var U;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)){var O=u.substr(this.buf,this.pos,19);U=u.strDate(O),this.pos+=19}else{var R=this.readFloat(),V=new Date;V.setTime(R),U=V}return this.cache.push(U),U;case 115:var F=this.readDigits(),j=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<F)throw new N("Invalid bytes length");var q=w.CODES;null==q&&(q=w.initCodes(),w.CODES=q);var G,K=this.pos,W=3&F;G=3*(F>>2)+(W>=2?W-1:0);for(var H=K+(F-W),X=x.alloc(G),Q=0;K<H;){var Y=q[_.fastCodeAt(j,K++)],Z=q[_.fastCodeAt(j,K++)];X.set(Q++,Y<<2|Z>>4);var $=q[_.fastCodeAt(j,K++)];X.set(Q++,Z<<4|$>>2);var J=q[_.fastCodeAt(j,K++)];X.set(Q++,$<<6|J)}if(W>=2){var ee=q[_.fastCodeAt(j,K++)],te=q[_.fastCodeAt(j,K++)];if(X.set(Q++,ee<<2|te>>4),3==W){var ne=q[_.fastCodeAt(j,K++)];X.set(Q++,te<<4|ne>>2)}}return this.pos+=F,this.cache.push(X),X;case 67:var re=this.unserialize(),ie=this.resolver.resolveClass(re);if(null==ie)throw new N("Class not found "+re);var oe=p.createEmptyInstance(ie);if(this.cache.push(oe),oe.hxUnserialize(this),103!=this.get(this.pos++))throw new N("Invalid custom data");return oe;case 65:var ae=this.unserialize(),se=this.resolver.resolveClass(ae);if(null==se)throw new N("Class not found "+ae);return se;case 66:var ue=this.unserialize(),le=this.resolver.resolveEnum(ue);if(null==le)throw new N("Enum not found "+ue);return le}throw this.pos--,new N("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:w};var y=function(){this.h={}};a["haxe.ds.IntMap"]=y,y.__name__=["haxe","ds","IntMap"],y.__interfaces__=[m],y.prototype={set:function(e,t){this.h[e]=t},remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return u.iter(e)},__class__:y};var S=function(){this.h={},this.h.__keys__={}};a["haxe.ds.ObjectMap"]=S,S.__name__=["haxe","ds","ObjectMap"],S.__interfaces__=[m],S.prototype={set:function(e,t){var n=e.__id__||(e.__id__=++S.count);this.h[n]=t,this.h.__keys__[n]=e},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return u.iter(e)},__class__:S};var k=a["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]};k.Some=function(e){var t=["Some",0,e];return t.__enum__=k,t.toString=s,t},k.None=["None",1],k.None.toString=s,k.None.__enum__=k;var P=function(){this.h={}};a["haxe.ds.StringMap"]=P,P.__name__=["haxe","ds","StringMap"],P.__interfaces__=[m],P.prototype={set:function(e,t){null!=dt[e]?this.setReserved(e,t):this.h[e]=t},get:function(e){return null!=dt[e]?this.getReserved(e):this.h[e]},setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},keys:function(){var e=this.arrayKeys();return u.iter(e)},arrayKeys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t);if(null!=this.rh)for(var t in this.rh)36==t.charCodeAt(0)&&e.push(t.substr(1));return e},__class__:P};var x=function(e){this.length=e.byteLength,this.b=new mt(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};a["haxe.io.Bytes"]=x,x.__name__=["haxe","io","Bytes"],x.alloc=function(e){return new x(new pt(e))},x.prototype={get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},__class__:x};var C=a["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};C.Blocked=["Blocked",0],C.Blocked.toString=s,C.Blocked.__enum__=C,C.Overflow=["Overflow",1],C.Overflow.toString=s,C.Overflow.__enum__=C,C.OutsideBounds=["OutsideBounds",2],C.OutsideBounds.toString=s,C.OutsideBounds.__enum__=C,C.Custom=function(e){var t=["Custom",3,e];return t.__enum__=C,t.toString=s,t};var M=function(){};a["haxe.io.FPHelper"]=M,M.__name__=["haxe","io","FPHelper"],M.i32ToFloat=function(e){var t=1-(e>>>31<<1),n=e>>>23&255,r=8388607&e;return 0==r&&0==n?0:t*(1+Math.pow(2,-23)*r)*Math.pow(2,n-127)},M.floatToI32=function(e){if(0==e)return 0;var t;t=e<0?-e:e;var n=Math.floor(Math.log(t)/.6931471805599453);n<-127?n=-127:n>128&&(n=128);var r=8388607&Math.round(8388608*(t/Math.pow(2,n)-1));return(e<0?-2147483648:0)|n+127<<23|r},M.i64ToDouble=function(e,t){var n=1-(t>>>31<<1),r=(t>>20&2047)-1023,i=4294967296*(1048575&t)+2147483648*(e>>>31)+(2147483647&e);return 0==i&&r==-1023?0:n*(1+Math.pow(2,-52)*i)*Math.pow(2,r)},M.doubleToI64=function(e){var t=M.i64tmp;if(0==e)t.low=0,t.high=0;else{var n;n=e<0?-e:e;var r,i=Math.floor(Math.log(n)/.6931471805599453),o=4503599627370496*(n/Math.pow(2,i)-1);r=Math.round(o);var a=0|r,s=r/4294967296|0;t.low=a,t.high=(e<0?-2147483648:0)|i+1023<<20|s}return t};var N=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,N)};a["js._Boot.HaxeError"]=N,N.__name__=["js","_Boot","HaxeError"],N.__super__=Error,N.prototype=r(Error.prototype,{__class__:N});var A=function(){};a["js.Boot"]=A,A.__name__=["js","Boot"],A.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var n=A.__nativeClassName(e);return null!=n?A.__resolveNativeClass(n):null},A.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var r=e[0]+"(";t+="\t";for(var i=2,o=e.length;i<o;){var a=i++;r+=2!=a?","+A.__string_rec(e[a],t):A.__string_rec(e[a],t)}return r+")"}var s=e.length,u="[";t+="\t";for(var l=0;l<s;){var c=l++;u+=(c>0?",":"")+A.__string_rec(e[c],t)}return u+="]"}var h;try{h=e.toString}catch(e){return e instanceof N&&(e=e.val),"???"}if(null!=h&&h!=Object.toString&&"function"==typeof h){var f=e.toString();if("[object Object]"!=f)return f}var v=null,_="{\n";t+="\t";var d=null!=e.hasOwnProperty;for(var v in e)d&&!e.hasOwnProperty(v)||"prototype"!=v&&"__class__"!=v&&"__super__"!=v&&"__interfaces__"!=v&&"__properties__"!=v&&(2!=_.length&&(_+=", \n"),_+=t+v+" : "+A.__string_rec(e[v],t));return t=t.substring(1),_+="\n"+t+"}";case"function":return"<function>";case"string":return e;default:return String(e)}},A.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var r=0,i=n.length;r<i;){var o=r++,a=n[o];if(a==t||A.__interfLoop(a,t))return!0}return A.__interfLoop(e.__super__,t)},A.__instanceof=function(e,t){if(null==t)return!1;switch(t){case lt:return(0|e)===e;case ht:return"number"==typeof e;case ft:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case ct:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(A.__interfLoop(A.getClass(e),t))return!0}else if("object"==typeof t&&A.__isNativeObj(t)&&e instanceof t)return!0;return t==vt&&null!=e.__name__||(t==_t&&null!=e.__ename__||e.__enum__==t)}},A.__nativeClassName=function(e){var t=A.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},A.__isNativeObj=function(e){return null!=A.__nativeClassName(e)},A.__resolveNativeClass=function(e){return n[e]};var z=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{var t=e;this.a=[];for(var n=0;n<t;){var r=n++;this.a[r]=0}this.byteLength=t}};a["js.html.compat.ArrayBuffer"]=z,z.__name__=["js","html","compat","ArrayBuffer"],z.sliceImpl=function(e,t){var n=new mt(this,e,null==t?null:t-e),r=new pt(n.byteLength);return new mt(r).set(n),r},z.prototype={slice:function(e,t){return new z(this.a.slice(e,t))},__class__:z};var I=function(e,t,n){if(this.buf=e,this.offset=null==t?0:t,this.length=null==n?e.byteLength-this.offset:n,this.offset<0||this.length<0||this.offset+this.length>e.byteLength)throw new N(C.OutsideBounds)};a["js.html.compat.DataView"]=I,I.__name__=["js","html","compat","DataView"],I.prototype={getInt8:function(e){var t=this.buf.a[this.offset+e];return t>=128?t-256:t},getUint8:function(e){return this.buf.a[this.offset+e]},getInt16:function(e,t){var n=this.getUint16(e,t);return n>=32768?n-65536:n},getUint16:function(e,t){return t?this.buf.a[this.offset+e]|this.buf.a[this.offset+e+1]<<8:this.buf.a[this.offset+e]<<8|this.buf.a[this.offset+e+1]},getInt32:function(e,t){var n=this.offset+e,r=this.buf.a[n++],i=this.buf.a[n++],o=this.buf.a[n++],a=this.buf.a[n++];return t?r|i<<8|o<<16|a<<24:a|o<<8|i<<16|r<<24},getUint32:function(e,t){var n=this.getInt32(e,t);return n<0?n+4294967296:n},getFloat32:function(e,t){return M.i32ToFloat(this.getInt32(e,t))},getFloat64:function(e,t){var n=this.getInt32(e,t),r=this.getInt32(e+4,t);return M.i64ToDouble(t?n:r,t?r:n)},setInt8:function(e,t){this.buf.a[e+this.offset]=t<0?t+128&255:255&t},setUint8:function(e,t){this.buf.a[e+this.offset]=255&t},setInt16:function(e,t,n){this.setUint16(e,t<0?t+65536:t,n)},setUint16:function(e,t,n){var r=e+this.offset;n?(this.buf.a[r]=255&t,this.buf.a[r++]=t>>8&255):(this.buf.a[r++]=t>>8&255,this.buf.a[r]=255&t)},setInt32:function(e,t,n){this.setUint32(e,t,n)},setUint32:function(e,t,n){var r=e+this.offset;n?(this.buf.a[r++]=255&t,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>>24):(this.buf.a[r++]=t>>>24,this.buf.a[r++]=t>>16&255,this.buf.a[r++]=t>>8&255,this.buf.a[r++]=255&t)},setFloat32:function(e,t,n){this.setUint32(e,M.floatToI32(t),n)},setFloat64:function(e,t,n){var r=M.doubleToI64(t);n?(this.setUint32(e,r.low),this.setUint32(e,r.high)):(this.setUint32(e,r.high),this.setUint32(e,r.low))},__class__:I};var E=function(){};a["js.html.compat.Uint8Array"]=E,E.__name__=["js","html","compat","Uint8Array"],E._new=function(e,t,n){var r;if("number"==typeof e){r=[];for(var i=0;i<e;){r[i++]=0}r.byteLength=r.length,r.byteOffset=0,r.buffer=new z(r)}else if(A.__instanceof(e,z)){var o=e;null==t&&(t=0),null==n&&(n=o.byteLength-t),r=0==t?o.a:o.a.slice(t,t+n),r.byteLength=r.length,r.byteOffset=t,r.buffer=o}else{if(!(e instanceof Array&&null==e.__enum__))throw new N("TODO "+f.string(e));r=e.slice(),r.byteLength=r.length,r.byteOffset=0,r.buffer=new z(r)}return r.subarray=E._subarray,r.set=E._set,r},E._set=function(e,t){var n=this;if(A.__instanceof(e.buffer,z)){var r=e;if(e.byteLength+t>n.byteLength)throw new N("set() outside of range");for(var i=0,o=e.byteLength;i<o;){var a=i++;n[a+t]=r[a]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new N("TODO");var s=e;if(s.length+t>n.byteLength)throw new N("set() outside of range");for(var u=0,l=s.length;u<l;){var c=u++;n[c+t]=s[c]}}},E._subarray=function(e,t){var n=this,r=E._new(n.slice(e,t));return r.byteOffset=e,r};var T=function(e){this._resolved=!1,this._pending=!1,this._errorPending=!1,this._fulfilled=!1,this._update=[],this._error=[],this._errored=!1,null!=e&&T.link(e,this,function(e){return e})};a["promhx.base.AsyncBase"]=T,T.__name__=["promhx","base","AsyncBase"],T.link=function(e,t,n){e._update.push({async:t,linkf:function(e){t.handleResolve(n(e))}}),T.immediateLinkUpdate(e,t,n)},T.immediateLinkUpdate=function(e,t,n){if(!e._errored||e._errorPending||e._error.length>0||t.handleError(e._errorVal),e._resolved&&!e._pending)try{t.handleResolve(n(e._val))}catch(e){e instanceof N&&(e=e.val),t.handleError(e)}},T.linkAll=function(e,t){for(var n=function(n,r,o){if(0==n.length||T.allFulfilled(n)){for(var a,s=[],u=i(e)();u.hasNext();){var l=u.next();s.push(l==r?o:l._val)}a=s,t.handleResolve(a)}},r=i(e)();r.hasNext();){var o=r.next();o._update.push({async:t,linkf:function(e,t,n){return function(r){e(t,n,r)}}(n,function(t){for(var n=[],r=i(e)();r.hasNext();){var a=r.next();a!=o&&n.push(a)}return n}(this),o)})}T.allFulfilled(e)&&t.handleResolve(function(t){for(var n=[],r=i(e)();r.hasNext();){var o=r.next();n.push(o._val)}return n}(this))},T.pipeLink=function(e,t,n){var r=!1,i=function(e){if(!r){r=!0;var i=n(e);i._update.push({async:t,linkf:o(t,t.handleResolve)}),T.immediateLinkUpdate(i,t,function(e){return e})}};if(e._update.push({async:t,linkf:i}),e._resolved&&!e._pending)try{i(e._val)}catch(e){e instanceof N&&(e=e.val),t.handleError(e)}},T.allResolved=function(e){for(var t=i(e)();t.hasNext();){if(!t.next()._resolved)return!1}return!0},T.allFulfilled=function(e){for(var t=i(e)();t.hasNext();){if(!t.next()._fulfilled)return!1}return!0},T.prototype={catchError:function(e){return this._error.push(e),this},errorThen:function(e){return this._errorMap=e,this},isResolved:function(){return this._resolved},isErrored:function(){return this._errored},isErrorHandled:function(){return this._error.length>0},isErrorPending:function(){return this._errorPending},isFulfilled:function(){return this._fulfilled},isPending:function(){return this._pending},handleResolve:function(e){this._resolve(e)},_resolve:function(e){var t=this;this._pending?O.enqueue(function(e,t){return function(){e(t)}}(o(this,this._resolve),e)):(this._resolved=!0,this._pending=!0,O.queue.add(function(){t._val=e;for(var n=0,r=t._update;n<r.length;){var i=r[n];++n;try{i.linkf(e)}catch(e){e instanceof N&&(e=e.val),i.async.handleError(e)}}t._fulfilled=!0,t._pending=!1}),O.continueOnNextLoop())},handleError:function(e){this._handleError(e)},_handleError:function(e){var t=this,n=function(e){if(t._error.length>0)for(var n=0,r=t._error;n<r.length;){var i=r[n];++n,i(e)}else{if(!(t._update.length>0))throw new N(e);for(var o=0,a=t._update;o<a.length;){var s=a[o];++o,s.async.handleError(e)}}t._errorPending=!1};this._errorPending||(this._errorPending=!0,this._errored=!0,this._errorVal=e,O.queue.add(function(){if(null!=t._errorMap)try{t._resolve(t._errorMap(e))}catch(e){e instanceof N&&(e=e.val),n(e)}else n(e)}),O.continueOnNextLoop())},then:function(e){var t=new T(null);return T.link(this,t,e),t},unlink:function(e){var t=this;O.queue.add(function(){t._update=t._update.filter(function(t){return t.async!=e})}),O.continueOnNextLoop()},isLinked:function(e){for(var t=0,n=this._update;t<n.length;){var r=n[t];if(++t,r.async==e)return!0}return!1},__class__:T};var B=t.promhx.Deferred=function(){T.call(this)};a["promhx.Deferred"]=B,B.__name__=["promhx","Deferred"],B.__super__=T,B.prototype=r(T.prototype,{resolve:function(e){this.handleResolve(e)},throwError:function(e){this.handleError(e)},promise:function(){return new D(this)},stream:function(){return new L(this)},publicStream:function(){return new U(this)},__class__:B});var D=t.promhx.Promise=function(e){T.call(this,e),this._rejected=!1};a["promhx.Promise"]=D,D.__name__=["promhx","Promise"],D.whenAll=function(e){var t=new D(null);return T.linkAll(e,t),t},D.promise=function(e){var t=new D;return t.handleResolve(e),t},D.__super__=T,D.prototype=r(T.prototype,{isRejected:function(){return this._rejected},reject:function(e){this._rejected=!0,this.handleError(e)},handleResolve:function(e){if(this._resolved){throw new N(R.AlreadyResolved("Promise has already been resolved"))}this._resolve(e)},then:function(e){var t=new D(null);return T.link(this,t,e),t},unlink:function(e){var t=this;O.queue.add(function(){if(t._fulfilled)t._update=t._update.filter(function(t){return t.async!=e});else{t.handleError(R.DownstreamNotFullfilled("Downstream Promise is not fullfilled"))}}),O.continueOnNextLoop()},handleError:function(e){this._rejected=!0,this._handleError(e)},pipe:function(e){var t=new D(null);return T.pipeLink(this,t,e),t},errorPipe:function(e){var t=new D;return this.catchError(function(n){e(n).then(o(t,t._resolve))}),this.then(o(t,t._resolve)),t},__class__:D});var L=t.promhx.Stream=function(e){T.call(this,e),this._end_promise=new D};a["promhx.Stream"]=L,L.__name__=["promhx","Stream"],L.foreach=function(e){for(var t=new L(null),n=i(e)();n.hasNext();){var r=n.next();t.handleResolve(r)}return t.end(),t},L.wheneverAll=function(e){var t=new L(null);return T.linkAll(e,t),t},L.concatAll=function(e){for(var t=new L(null),n=i(e)();n.hasNext();){var r=n.next();t.concat(r)}return t},L.mergeAll=function(e){for(var t=new L(null),n=i(e)();n.hasNext();){var r=n.next();t.merge(r)}return t},L.stream=function(e){var t=new L(null);return t.handleResolve(e),t},L.__super__=T,L.prototype=r(T.prototype,{then:function(e){var t=new L(null);return T.link(this,t,e),this._end_promise._update.push({async:t._end_promise,linkf:function(e){t.end()}}),t},detachStream:function(e){for(var t=[],n=!1,r=0,i=this._update;r<i.length;){var o=i[r];++r,o.async==e?(this._end_promise._update=this._end_promise._update.filter(function(t){return t.async!=e._end_promise}),n=!0):t.push(o)}return this._update=t,n},first:function(){var e=new D(null);return this.then(function(t){e._resolved||e.handleResolve(t)}),e},handleResolve:function(e){this._end||this._pause||this._resolve(e)},pause:function(e){null==e&&(e=!this._pause),this._pause=e},pipe:function(e){var t=new L(null);return T.pipeLink(this,t,e),
this._end_promise.then(function(e){t.end()}),t},errorPipe:function(e){var t=new L(null);return this.catchError(function(n){var r=e(n);r.then(o(t,t._resolve)),r._end_promise.then((st=t._end_promise,o(st,st._resolve)))}),this.then(o(t,t._resolve)),this._end_promise.then(function(e){t.end()}),t},handleEnd:function(){if(this._pending)O.queue.add(o(this,this.handleEnd)),O.continueOnNextLoop();else{if(this._end_promise._resolved)return;this._end=!0;var e;e=this._resolved?k.Some(this._val):k.None,this._end_promise.handleResolve(e),this._update=[],this._error=[]}},end:function(){return O.queue.add(o(this,this.handleEnd)),O.continueOnNextLoop(),this},endThen:function(e){return this._end_promise.then(e)},filter:function(e){var t=new L(null);return this._update.push({async:t,linkf:function(n){e(n)&&t.handleResolve(n)}}),T.immediateLinkUpdate(this,t,function(e){return e}),t},concat:function(e){var t=new L(null);return this._update.push({async:t,linkf:o(t,t.handleResolve)}),T.immediateLinkUpdate(this,t,function(e){return e}),this._end_promise.then(function(n){e.pipe(function(e){return t.handleResolve(e),t}),e._end_promise.then(function(e){t.end()})}),t},merge:function(e){var t=new L(null);return this._update.push({async:t,linkf:o(t,t.handleResolve)}),e._update.push({async:t,linkf:o(t,t.handleResolve)}),T.immediateLinkUpdate(this,t,function(e){return e}),T.immediateLinkUpdate(e,t,function(e){return e}),t},__class__:L});var U=t.promhx.PublicStream=function(e){L.call(this,e)};a["promhx.PublicStream"]=U,U.__name__=["promhx","PublicStream"],U.publicstream=function(e){var t=new U(null);return t.handleResolve(e),t},U.__super__=L,U.prototype=r(L.prototype,{resolve:function(e){this.handleResolve(e)},throwError:function(e){this.handleError(e)},update:function(e){this.handleResolve(e)},__class__:U});var O=function(){};a["promhx.base.EventLoop"]=O,O.__name__=["promhx","base","EventLoop"],O.enqueue=function(e){O.queue.add(e),O.continueOnNextLoop()},O.set_nextLoop=function(e){if(null!=O.nextLoop)throw new N("nextLoop has already been set");return O.nextLoop=e,O.nextLoop},O.queueEmpty=function(){return O.queue.isEmpty()},O.finish=function(e){null==e&&(e=1e3);for(var t=null;e-- >0&&null!=(t=O.queue.pop());)t();return O.queue.isEmpty()},O.clear=function(){O.queue=new c},O.f=function(){var e=O.queue.pop();null!=e&&e(),O.queue.isEmpty()||O.continueOnNextLoop()},O.continueOnNextLoop=function(){null!=O.nextLoop?O.nextLoop(O.f):setImmediate(O.f)};var R=a["promhx.error.PromiseError"]={__ename__:["promhx","error","PromiseError"],__constructs__:["AlreadyResolved","DownstreamNotFullfilled"]};R.AlreadyResolved=function(e){var t=["AlreadyResolved",0,e];return t.__enum__=R,t.toString=s,t},R.DownstreamNotFullfilled=function(e){var t=["DownstreamNotFullfilled",1,e];return t.__enum__=R,t.toString=s,t};var V=function(){};a["verb.Verb"]=V,V.__name__=["verb","Verb"],V.main=function(){e.log("verb 2.1.0")};var F=function(){};a["verb.core.ArrayExtensions"]=F,F.__name__=["verb","core","ArrayExtensions"],F.alloc=function(e,t){if(!(t<0))for(;e.length<t;)e.push(null)},F.reversed=function(e){var t=e.slice();return t.reverse(),t},F.last=function(e){return e[e.length-1]},F.first=function(e){return e[0]},F.spliceAndInsert=function(e,t,n,r){e.splice(t,n),e.splice(t,0,r)},F.left=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(0,t)},F.right=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(t)},F.rightWithPivot=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(t-1)},F.unique=function(e,t){if(0==e.length)return[];for(var n=[e.pop()];e.length>0;){for(var r=e.pop(),i=!0,o=0;o<n.length;){var a=n[o];if(++o,t(r,a)){i=!1;break}}i&&n.push(r)}return n};var j=function(){};a["verb.core.Binomial"]=j,j.__name__=["verb","core","Binomial"],j.get=function(e,t){if(0==t)return 1;if(0==e||t>e)return 0;if(t>e-t&&(t=e-t),j.memo_exists(e,t))return j.get_memo(e,t);for(var n=1,r=e,i=1,o=t+1;i<o;){var a=i++;j.memo_exists(r,a)?(e--,n=j.get_memo(r,a)):(n*=e--,n/=a,j.memoize(r,a,n))}return n},j.get_no_memo=function(e,t){if(0==t)return 1;if(0==e||t>e)return 0;t>e-t&&(t=e-t);for(var n=1,r=1,i=t+1;r<i;){var o=r++;n*=e--,n/=o}return n},j.memo_exists=function(e,t){return j.memo.h.hasOwnProperty(e)&&j.memo.h[e].h.hasOwnProperty(t)},j.get_memo=function(e,t){return j.memo.h[e].h[t]},j.memoize=function(e,t,n){j.memo.h.hasOwnProperty(e)||j.memo.set(e,new y),j.memo.h[e].h[t]=n};var q=t.core.BoundingBox=function(e){this.max=null,this.min=null,this.dim=3,this.initialized=!1,null!=e&&this.addRange(e)};a["verb.core.BoundingBox"]=q,q.__name__=["verb","core","BoundingBox"],q.intervalsOverlap=function(e,t,n,r,i){null==i&&(i=-1);var o;o=i<-.5?G.TOLERANCE:i;var a=Math.min(e,t)-o,s=Math.max(e,t)+o,u=Math.min(n,r)-o,l=Math.max(n,r)+o;return a>=u&&a<=l||s>=u&&s<=l||u>=a&&u<=s||l>=a&&l<=s},q.prototype={fromPoint:function(e){return new q([e])},add:function(e){if(!this.initialized)return this.dim=e.length,this.min=e.slice(0),this.max=e.slice(0),this.initialized=!0,this;for(var t=0,n=this.dim;t<n;){var r=t++;e[r]>this.max[r]&&(this.max[r]=e[r]),e[r]<this.min[r]&&(this.min[r]=e[r])}return this},addRange:function(e){for(var t=e.length,n=0;n<t;){var r=n++;this.add(e[r])}return this},contains:function(e,t){return null==t&&(t=-1),!!this.initialized&&this.intersects(new q([e]),t)},intersects:function(e,t){if(null==t&&(t=-1),!this.initialized||!e.initialized)return!1;for(var n=this.min,r=this.max,i=e.min,o=e.max,a=0,s=this.dim;a<s;){var u=a++;if(!q.intervalsOverlap(n[u],r[u],i[u],o[u],t))return!1}return!0},clear:function(){return this.initialized=!1,this},getLongestAxis:function(){for(var e=0,t=0,n=0,r=this.dim;n<r;){var i=n++,o=this.getAxisLength(i);o>e&&(e=o,t=i)}return t},getAxisLength:function(e){return e<0||e>this.dim-1?0:Math.abs(this.min[e]-this.max[e])},intersect:function(e,t){if(!this.initialized)return null;var n=this.min,r=this.max,i=e.min,o=e.max;if(!this.intersects(e,t))return null;for(var a=[],s=[],u=0,l=this.dim;u<l;){var c=u++;a.push(Math.min(r[c],o[c])),s.push(Math.max(n[c],i[c]))}return new q([s,a])},__class__:q};var G=t.core.Constants=function(){};a["verb.core.Constants"]=G,G.__name__=["verb","core","Constants"];var K=t.core.SerializableBase=function(){};a["verb.core.SerializableBase"]=K,K.__name__=["verb","core","SerializableBase"],K.prototype={serialize:function(){var e=new b;return e.serialize(this),e.toString()},__class__:K};var W=t.core.Plane=function(e,t){this.origin=e,this.normal=t};a["verb.core.Plane"]=W,W.__name__=["verb","core","Plane"],W.__super__=K,W.prototype=r(K.prototype,{__class__:W});var H=t.core.Ray=function(e,t){this.origin=e,this.dir=t};a["verb.core.Ray"]=H,H.__name__=["verb","core","Ray"],H.__super__=K,H.prototype=r(K.prototype,{__class__:H});var X=t.core.NurbsCurveData=function(e,t,n){this.degree=e,this.controlPoints=n,this.knots=t};a["verb.core.NurbsCurveData"]=X,X.__name__=["verb","core","NurbsCurveData"],X.__super__=K,X.prototype=r(K.prototype,{__class__:X});var Q=t.core.NurbsSurfaceData=function(e,t,n,r,i){this.degreeU=e,this.degreeV=t,this.knotsU=n,this.knotsV=r,this.controlPoints=i};a["verb.core.NurbsSurfaceData"]=Q,Q.__name__=["verb","core","NurbsSurfaceData"],Q.__super__=K,Q.prototype=r(K.prototype,{__class__:Q});var Y=t.core.MeshData=function(e,t,n,r){this.faces=e,this.points=t,this.normals=n,this.uvs=r};a["verb.core.MeshData"]=Y,Y.__name__=["verb","core","MeshData"],Y.empty=function(){return new Y([],[],[],[])},Y.__super__=K,Y.prototype=r(K.prototype,{__class__:Y});var Z=t.core.PolylineData=function(e,t){this.points=e,this.params=t};a["verb.core.PolylineData"]=Z,Z.__name__=["verb","core","PolylineData"],Z.__super__=K,Z.prototype=r(K.prototype,{__class__:Z});var $=t.core.VolumeData=function(e,t,n,r,i,o,a){this.degreeU=e,this.degreeV=t,this.degreeW=n,this.knotsU=r,this.knotsV=i,this.knotsW=o,this.controlPoints=a};a["verb.core.VolumeData"]=$,$.__name__=["verb","core","VolumeData"],$.__super__=K,$.prototype=r(K.prototype,{__class__:$});var J=t.core.Pair=function(e,t){this.item0=e,this.item1=t};a["verb.core.Pair"]=J,J.__name__=["verb","core","Pair"],J.prototype={__class__:J};var ee=t.core.Interval=function(e,t){this.min=e,this.max=t};a["verb.core.Interval"]=ee,ee.__name__=["verb","core","Interval"],ee.prototype={__class__:ee};var te=t.core.CurveCurveIntersection=function(e,t,n,r){this.point0=e,this.point1=t,this.u0=n,this.u1=r};a["verb.core.CurveCurveIntersection"]=te,te.__name__=["verb","core","CurveCurveIntersection"],te.prototype={__class__:te};var ne=t.core.CurveSurfaceIntersection=function(e,t,n,r){this.u=e,this.uv=t,this.curvePoint=n,this.surfacePoint=r};a["verb.core.CurveSurfaceIntersection"]=ne,ne.__name__=["verb","core","CurveSurfaceIntersection"],ne.prototype={__class__:ne};var re=t.core.MeshIntersectionPoint=function(e,t,n,r,i){this.visited=!1,this.adj=null,this.opp=null,this.uv0=e,this.uv1=t,this.point=n,this.faceIndex0,this.faceIndex1};a["verb.core.MeshIntersectionPoint"]=re,re.__name__=["verb","core","MeshIntersectionPoint"],re.prototype={__class__:re};var ie=t.core.PolylineMeshIntersection=function(e,t,n,r,i){this.point=e,this.u=t,this.uv=n,this.polylineIndex=r,this.faceIndex=i};a["verb.core.PolylineMeshIntersection"]=ie,ie.__name__=["verb","core","PolylineMeshIntersection"],ie.prototype={__class__:ie};var oe=t.core.SurfaceSurfaceIntersectionPoint=function(e,t,n,r){this.uv0=e,this.uv1=t,this.point=n,this.dist=r};a["verb.core.SurfaceSurfaceIntersectionPoint"]=oe,oe.__name__=["verb","core","SurfaceSurfaceIntersectionPoint"],oe.prototype={__class__:oe};var ae=t.core.TriSegmentIntersection=function(e,t,n,r){this.point=e,this.s=t,this.t=n,this.p=r};a["verb.core.TriSegmentIntersection"]=ae,ae.__name__=["verb","core","TriSegmentIntersection"],ae.prototype={__class__:ae};var se=t.core.CurveTriPoint=function(e,t,n){this.u=e,this.point=t,this.uv=n};a["verb.core.CurveTriPoint"]=se,se.__name__=["verb","core","CurveTriPoint"],se.prototype={__class__:se};var ue=function(e,t,n,r,i){null==i&&(i=!1),null==r&&(r=-1),this.uv=n,this.point=e,this.normal=t,this.id=r,this.degen=i};a["verb.core.SurfacePoint"]=ue,ue.__name__=["verb","core","SurfacePoint"],ue.fromUv=function(e,t){return new ue(null,null,[e,t])},ue.prototype={__class__:ue};var le=t.core.CurvePoint=function(e,t){this.u=e,this.pt=t};a["verb.core.CurvePoint"]=le,le.__name__=["verb","core","CurvePoint"],le.prototype={__class__:le};var ce=t.core.KdTree=function(e,t){this.dim=3,this.points=e,this.distanceFunction=t,this.dim=e[0].point.length,this.root=this.buildTree(e,0,null)};a["verb.core.KdTree"]=ce,ce.__name__=["verb","core","KdTree"],ce.prototype={buildTree:function(e,t,n){var r,i,o=t%this.dim;return 0==e.length?null:1==e.length?new ve(e[0],o,n):(e.sort(function(e,t){var n=e.point[o]-t.point[o];return 0==n?0:n>0?1:-1}),r=Math.floor(e.length/2),i=new ve(e[r],o,n),i.left=this.buildTree(e.slice(0,r),t+1,i),i.right=this.buildTree(e.slice(r+1),t+1,i),i)},nearest:function(e,t,n){var r,i=this,o=new he(function(e){return-e.item1}),a=null;a=function(n){for(var r,s,u=n.dimension,l=i.distanceFunction(e,n.kdPoint.point),c=[],h=0,f=i.dim;h<f;){h++;c.push(0)}s=c;for(var v,_,d=function(e,n){o.push(new J(e,n)),o.size()>t&&o.pop()},p=0,m=i.dim;p<m;){var g=p++;g==n.dimension?s[g]=e[g]:s[g]=n.kdPoint.point[g]}if(v=i.distanceFunction(s,n.kdPoint.point),null==n.right&&null==n.left)return void((o.size()<t||l<o.peek().item1)&&d(n,l));r=null==n.right?n.left:null==n.left?n.right:e[u]<n.kdPoint.point[u]?n.left:n.right,a(r),(o.size()<t||l<o.peek().item1)&&d(n,l),(o.size()<t||Math.abs(v)<o.peek().item1)&&null!=(_=r==n.left?n.right:n.left)&&a(_)},r=a;for(var s=0;s<t;){s++;o.push(new J(null,n))}r(this.root);for(var u=[],l=0;l<t;){var c=l++;null!=o.content[c].item0&&u.push(new J(o.content[c].item0.kdPoint,o.content[c].item1))}return u},__class__:ce};var he=function(e){this.content=[],this.scoreFunction=e};a["verb.core.BinaryHeap"]=he,he.__name__=["verb","core","BinaryHeap"],he.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,n=0;n<t;){var r=n++;if(this.content[r]==e){var i=this.content.pop();return void(r!=t-1&&(this.content[r]=i,this.scoreFunction(i)<this.scoreFunction(e)?this.bubbleUp(r):this.sinkDown(r)))}}throw new N("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i=2*(e+1),o=i-1,a=-1,s=0;if(o<t){var u=this.content[o];s=this.scoreFunction(u),s<r&&(a=o)}if(i<t){var l=this.content[i];this.scoreFunction(l)<(a==-1?r:s)&&(a=i)}if(a==-1)break;this.content[e]=this.content[a],this.content[a]=n,e=a}},__class__:he};var fe=t.core.KdPoint=function(e,t){this.point=e,this.obj=t};a["verb.core.KdPoint"]=fe,fe.__name__=["verb","core","KdPoint"],fe.prototype={__class__:fe};var ve=t.core.KdNode=function(e,t,n){this.kdPoint=e,this.left=null,this.right=null,this.parent=n,this.dimension=t};a["verb.core.KdNode"]=ve,ve.__name__=["verb","core","KdNode"],ve.prototype={__class__:ve};var _e=function(){};a["verb.eval.IBoundingBoxTree"]=_e,_e.__name__=["verb","eval","IBoundingBoxTree"],_e.prototype={__class__:_e};var de=function(e,t){this._boundingBox=null,this._curve=e,null==t&&(t=Ne.domain(this._curve.knots)/64),this._knotTol=t};a["verb.core.LazyCurveBoundingBoxTree"]=de,de.__name__=["verb","core","LazyCurveBoundingBoxTree"],de.__interfaces__=[_e],de.prototype={split:function(){var e=F.first(this._curve.knots),t=F.last(this._curve.knots),n=t-e,r=Ee.curveSplit(this._curve,(t+e)/2+.1*n*Math.random());return new J(new de(r[0],this._knotTol),new de(r[1],this._knotTol))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new q(Be.dehomogenize1d(this._curve.controlPoints))),this._boundingBox},yield:function(){return this._curve},indivisible:function(e){return Ne.domain(this._curve.knots)<this._knotTol},empty:function(){return!1},__class__:de};var pe=function(e,t){if(this._boundingBox=null,this._mesh=e,null==t){for(var n=[],r=0,i=e.faces.length;r<i;){var o=r++;n.push(o)}t=n}this._faceIndices=t};a["verb.core.LazyMeshBoundingBoxTree"]=pe,pe.__name__=["verb","core","LazyMeshBoundingBoxTree"],pe.__interfaces__=[_e],pe.prototype={split:function(){var e=ye.sortTrianglesOnLongestAxis(this.boundingBox(),this._mesh,this._faceIndices),t=F.left(e),n=F.right(e);return new J(new pe(this._mesh,t),new pe(this._mesh,n))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=ye.makeMeshAabb(this._mesh,this._faceIndices)),this._boundingBox},yield:function(){return this._faceIndices[0]},indivisible:function(e){return 1==this._faceIndices.length},empty:function(){return 0==this._faceIndices.length},__class__:pe};var me=function(e,t){this._boundingBox=null,this._polyline=e,null==t&&(t=new ee(0,0!=e.points.length?e.points.length-1:0)),this._interval=t};a["verb.core.LazyPolylineBoundingBoxTree"]=me,me.__name__=["verb","core","LazyPolylineBoundingBoxTree"],me.__interfaces__=[_e],me.prototype={split:function(){var e=this._interval.min,t=this._interval.max,n=e+Math.ceil((t-e)/2),r=new ee(e,n),i=new ee(n,t);return new J(new me(this._polyline,r),new me(this._polyline,i))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new q(this._polyline.points)),this._boundingBox},yield:function(){return this._interval.min},indivisible:function(e){return this._interval.max-this._interval.min==1},empty:function(){return this._interval.max-this._interval.min==0},__class__:me};var ge=function(e,t,n,r){null==t&&(t=!1),this._boundingBox=null,this._surface=e,this._splitV=t,null==n&&(n=Ne.domain(e.knotsU)/16),null==r&&(r=Ne.domain(e.knotsV)/16),this._knotTolU=n,this._knotTolV=r};a["verb.core.LazySurfaceBoundingBoxTree"]=ge,ge.__name__=["verb","core","LazySurfaceBoundingBoxTree"],ge.__interfaces__=[_e],ge.prototype={split:function(){var e,t;this._splitV?(e=F.first(this._surface.knotsV),t=F.last(this._surface.knotsV)):(e=F.first(this._surface.knotsU),t=F.last(this._surface.knotsU));var n=(e+t)/2,r=Ee.surfaceSplit(this._surface,n,this._splitV);return new J(new ge(r[0],!this._splitV,this._knotTolU,this._knotTolV),new ge(r[1],!this._splitV,this._knotTolU,this._knotTolV))},boundingBox:function(){if(null==this._boundingBox){this._boundingBox=new q;for(var e=0,t=this._surface.controlPoints;e<t.length;){var n=t[e];++e,this._boundingBox.addRange(Be.dehomogenize1d(n))}}return this._boundingBox},yield:function(){return this._surface},indivisible:function(e){return Ne.domain(this._surface.knotsV)<this._knotTolV&&Ne.domain(this._surface.knotsU)<this._knotTolU},empty:function(){return!1},__class__:ge};var be=t.core.Mat=function(){};a["verb.core.Mat"]=be,be.__name__=["verb","core","Mat"],be.mul=function(e,t){for(var n=[],r=0,i=t.length;r<i;){var o=r++;n.push(Ne.mul(e,t[o]))}return n},be.mult=function(e,t){var n,r,i,o,a,s,u,l;n=e.length,r=t.length,i=t[0].length,o=[];for(var c=n-1,h=0,f=0;c>=0;){for(a=[],s=e[c],f=i-1;f>=0;){for(u=s[r-1]*t[r-1][f],h=r-2;h>=1;)l=h-1,u+=s[h]*t[h][f]+s[l]*t[l][f],h-=2;0==h&&(u+=s[0]*t[0][f]),a[f]=u,f--}o[c]=a,c--}return o},be.add=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(Ne.add(e[o],t[o]))}return n},be.div=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(Ne.div(e[o],t))}return n},be.sub=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(Ne.sub(e[o],t[o]))}return n},be.dot=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(Ne.dot(e[o],t))}return n},be.identity=function(e){for(var t=Ne.zeros2d(e,e),n=0;n<e;){var r=n++;t[r][r]=1}return t},be.transpose=function(e){if(0==e.length)return[];for(var t=[],n=0,r=e[0].length;n<r;){var i=n++;t.push(function(t){for(var n=[],r=0,o=e.length;r<o;){var a=r++;n.push(e[a][i])}return n}(this))}return t},be.solve=function(e,t){return be.LUsolve(be.LU(e),t)},be.LUsolve=function(e,t){var n,r,i,o,a,s=e.LU,u=s.length,l=t.slice(),c=e.P;for(n=u-1;n!=-1;)l[n]=t[n],--n;for(n=0;n<u;){for(i=c[n],c[n]!=n&&(a=l[n],l[n]=l[i],l[i]=a),o=s[n],r=0;r<n;)l[n]-=l[r]*o[r],++r;++n}for(n=u-1;n>=0;){for(o=s[n],r=n+1;r<u;)l[n]-=l[r]*o[r],++r;l[n]/=o[n],--n}return l},be.LU=function(e){for(var t,n,r,i,o,a,s,u,l,c=(Math.abs,[]),h=0,f=e.length;h<f;){var v=h++;c.push(e[v].slice())}e=c;var _=e.length,d=_-1,p=[];for(r=0;r<_;){for(s=r,a=e[r],l=Math.abs(a[r]),n=r+1;n<_;)i=Math.abs(e[n][r]),l<i&&(l=i,s=n),++n;for(p[r]=s,s!=r&&(e[r]=e[s],e[s]=a,a=e[r]),o=a[r],t=r+1;t<_;)e[t][r]/=o,++t;for(t=r+1;t<_;){for(u=e[t],n=r+1;n<d;)u[n]-=u[r]*a[n],++n,u[n]-=u[r]*a[n],++n;n==d&&(u[n]-=u[r]*a[n]),++t}++r}return new we(e,p)};var we=function(e,t){this.LU=e,this.P=t};a["verb.core._Mat.LUDecomp"]=we,we.__name__=["verb","core","_Mat","LUDecomp"],we.prototype={__class__:we};var ye=t.core.Mesh=function(){};a["verb.core.Mesh"]=ye,ye.__name__=["verb","core","Mesh"],ye.getTriangleNorm=function(e,t){var n=e[t[0]],r=e[t[1]],i=e[t[2]],o=Ne.sub(r,n),a=Ne.sub(i,n),s=Ne.cross(o,a);return Ne.mul(1/Ne.norm(s),s)},ye.makeMeshAabb=function(e,t){for(var n=new q,r=0;r<t.length;){var i=t[r];++r,n.add(e.points[e.faces[i][0]]),n.add(e.points[e.faces[i][1]]),n.add(e.points[e.faces[i][2]])}return n},ye.sortTrianglesOnLongestAxis=function(e,t,n){for(var r=e.getLongestAxis(),i=[],o=0;o<n.length;){var a=n[o];++o;var s=ye.getMinCoordOnAxis(t.points,t.faces[a],r);i.push(new J(s,a))}i.sort(function(e,t){var n=e.item0,r=t.item0;return n==r?0:n>r?1:-1});for(var u=[],l=0,c=i.length;l<c;){var h=l++;u.push(i[h].item1)}return u},ye.getMinCoordOnAxis=function(e,t,n){for(var r=1/0,i=0;i<3;){var o=i++,a=e[t[o]][n];a<r&&(r=a)}return r},ye.getTriangleCentroid=function(e,t){for(var n=[0,0,0],r=0;r<3;)for(var i=r++,o=0;o<3;){var a=o++;n[a]+=e[t[i]][a]}for(var s=0;s<3;){n[s++]/=3}return n},ye.triangleUVFromPoint=function(e,t,n){var r=e.faces[t],i=e.points[r[0]],o=e.points[r[1]],a=e.points[r[2]],s=e.uvs[r[0]],u=e.uvs[r[1]],l=e.uvs[r[2]],c=Ne.sub(i,n),h=Ne.sub(o,n),f=Ne.sub(a,n),v=Ne.norm(Ne.cross(Ne.sub(i,o),Ne.sub(i,a))),_=Ne.norm(Ne.cross(h,f))/v,d=Ne.norm(Ne.cross(f,c))/v,p=Ne.norm(Ne.cross(c,h))/v;return Ne.add(Ne.mul(_,s),Ne.add(Ne.mul(d,u),Ne.mul(p,l)))};var Se=function(e,t){if(this._empty=!1,this._face=-1,null==t){for(var n=[],r=0,i=e.faces.length;r<i;){var o=r++;n.push(o)}t=n}if(this._boundingBox=ye.makeMeshAabb(e,t),t.length<1)return void(this._empty=!0);if(t.length<2)return void(this._face=t[0]);var a=ye.sortTrianglesOnLongestAxis(this._boundingBox,e,t),s=F.left(a),u=F.right(a);this._children=new J(new Se(e,s),new Se(e,u))};a["verb.core.MeshBoundingBoxTree"]=Se,Se.__name__=["verb","core","MeshBoundingBoxTree"],Se.__interfaces__=[_e],Se.prototype={split:function(){return this._children},boundingBox:function(){return this._boundingBox},yield:function(){return this._face},indivisible:function(e){return null==this._children},empty:function(){return this._empty},__class__:Se};var ke=t.core.Minimizer=function(){};a["verb.core.Minimizer"]=ke,ke.__name__=["verb","core","Minimizer"],ke.uncmin=function(e,t,n,r,i){null==n&&(n=1e-8),null==r&&(r=function(t){return ke.numericalGradient(e,t)}),null==i&&(i=1e3),t=t.slice(0);var o,a=t.length,s=e(t),u=s;if(isNaN(s))throw new N("uncmin: f(x0) is a NaN!");n=Math.max(n,G.EPSILON);var l,c,h,f,v,_,d,p,m,g=be.identity(a),b=0,w=[],y="";for(c=r(t);b<i;){if(!Ne.all(Ne.finite(c))){y="Gradient has Infinity or NaN";break}if(l=Ne.neg(be.dot(g,c)),!Ne.all(Ne.finite(l))){y="Search direction has Infinity or NaN";break}if((m=Ne.norm(l))<n){y="Newton step smaller than tol";break}for(p=1,o=Ne.dot(c,l),f=t;b<i&&!(p*m<n)&&(w=Ne.mul(p,l),f=Ne.add(t,w),(u=e(f))-s>=.1*p*o||isNaN(u));)p*=.5,++b;if(p*m<n){y="Line search step size smaller than tol";break}if(b==i){y="maxit reached during line search";break}h=r(f),v=Ne.sub(h,c),d=Ne.dot(v,w),_=be.dot(g,v),g=be.sub(be.add(g,be.mul((d+Ne.dot(v,_))/(d*d),ke.tensor(w,w))),be.div(be.add(ke.tensor(_,w),ke.tensor(w,_)),d)),t=f,s=u,c=h,++b}return new Pe(t,s,c,g,b,y)},ke.numericalGradient=function(e,t){var n=t.length,r=e(t);if(NaN==r)throw new N("gradient: f(x) is a NaN!");for(var i,o,a,s,u,l,c,h,f=t.slice(0),v=[],_=0,d=0;d<n;)for(var p=d++,m=Math.max(1e-6*r,1e-8);;){if(++_>20)throw new N("Numerical gradient fails");if(f[p]=t[p]+m,i=e(f),f[p]=t[p]-m,o=e(f),f[p]=t[p],isNaN(i)||isNaN(o))m/=16;else{if(v[p]=(i-o)/(2*m),a=t[p]-m,s=t[p],u=t[p]+m,l=(i-r)/m,c=(r-o)/m,h=Ne.max([Math.abs(v[p]),Math.abs(r),Math.abs(i),Math.abs(o),Math.abs(a),Math.abs(s),Math.abs(u),1e-8]),!(Math.min(Ne.max([Math.abs(l-v[p]),Math.abs(c-v[p]),Math.abs(l-c)])/h,m/h)>.001))break;m/=16}}return v},ke.tensor=function(e,t){for(var n,r,i=e.length,o=t.length,a=[],s=i-1;s>=0;){n=[],r=e[s];for(var u=o-1;u>=3;)n[u]=r*t[u],--u,n[u]=r*t[u],--u,n[u]=r*t[u],--u,n[u]=r*t[u],--u;for(;u>=0;)n[u]=r*t[u],--u;a[s]=n,s--}return a};var Pe=function(e,t,n,r,i,o){this.solution=e,this.value=t,this.gradient=n,this.invHessian=r,this.iterations=i,this.message=o};a["verb.core.MinimizationResult"]=Pe,Pe.__name__=["verb","core","MinimizationResult"],Pe.prototype={__class__:Pe};var xe=function(){};a["verb.core.ISerializable"]=xe,xe.__name__=["verb","core","ISerializable"],xe.prototype={__class__:xe};var Ce=t.core.Deserializer=function(){};a["verb.core.Deserializer"]=Ce,Ce.__name__=["verb","core","Deserializer"],Ce.deserialize=function(e){return new w(e).unserialize()};var Me=t.core.Trig=function(){};a["verb.core.Trig"]=Me,Me.__name__=["verb","core","Trig"],Me.isPointInPlane=function(e,t,n){return Math.abs(Ne.dot(Ne.sub(e,t.origin),t.normal))<n},Me.distToSegment=function(e,t,n){var r=Me.segmentClosestPoint(t,e,n,0,1);return Ne.dist(t,r.pt)},Me.rayClosestPoint=function(e,t,n){var r=Ne.sub(e,t),i=Ne.dot(r,n);return Ne.add(t,Ne.mul(i,n))},Me.distToRay=function(e,t,n){var r=Me.rayClosestPoint(e,t,n),i=Ne.sub(r,e);return Ne.norm(i)},Me.threePointsAreFlat=function(e,t,n,r){var i=Ne.sub(t,e),o=Ne.sub(n,e),a=Ne.cross(i,o);return Ne.dot(a,a)<r},Me.segmentClosestPoint=function(e,t,n,r,i){var o=Ne.sub(n,t),a=Ne.norm(o);if(a<G.EPSILON)return{u:r,pt:t};var s=t,u=Ne.mul(1/a,o),l=Ne.sub(e,s),c=Ne.dot(l,u);return c<0?{u:r,pt:t}:c>a?{u:i,pt:n}:{u:r+(i-r)*c/a,pt:Ne.add(s,Ne.mul(c,u))}};var Ne=t.core.Vec=function(){};a["verb.core.Vec"]=Ne,Ne.__name__=["verb","core","Vec"],Ne.angleBetween=function(e,t){return Math.acos(Ne.dot(e,t)/(Ne.norm(e)*Ne.norm(t)))},Ne.positiveAngleBetween=function(e,t,n){var r=Ne.cross(e,t),i=Ne.norm(e),o=Ne.norm(t),a=i*o,s=Ne.dot(e,t),u=Ne.norm(r)/a,l=s/a,c=Math.atan2(u,l),h=Ne.dot(n,r);return Math.abs(h)<G.EPSILON?c:h>0?c:-c},Ne.signedAngleBetween=function(e,t,n){var r=Ne.cross(e,t),i=Ne.norm(e),o=Ne.norm(t),a=i*o,s=Ne.dot(e,t),u=Ne.norm(r)/a,l=s/a,c=Math.atan2(u,l);return Ne.dot(n,r)>0?c:2*Math.PI-c},Ne.angleBetweenNormalized2d=function(e,t){var n=e[0]*t[1]-e[1]*t[0];return Math.atan2(n,Ne.dot(e,t))},Ne.domain=function(e){return F.last(e)-F.first(e)},Ne.range=function(e){for(var t=[],n=0,r=0;r<e;){r++;t.push(n),n+=1}return t},Ne.span=function(e,t,n){if(null==n)return[];if(n<G.EPSILON)return[];if(e>t&&n>0)return[];if(t>e&&n<0)return[];for(var r=[],i=e;i<=t;)r.push(i),i+=n;return r},Ne.neg=function(e){return e.map(function(e){return-e})},Ne.min=function(e){return l.fold(e,function(e,t){return Math.min(e,t)},1/0)},Ne.max=function(e){return l.fold(e,function(e,t){return Math.max(e,t)},-(1/0))},Ne.all=function(e){return l.fold(e,function(e,t){return t&&e},!0)},Ne.finite=function(e){return e.map(function(e){return isFinite(e)})},Ne.onRay=function(e,t,n){return Ne.add(e,Ne.mul(n,t))},Ne.lerp=function(e,t,n){return Ne.add(Ne.mul(e,t),Ne.mul(1-e,n))},Ne.normalized=function(e){return Ne.div(e,Ne.norm(e))},Ne.cross=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},Ne.dist=function(e,t){return Ne.norm(Ne.sub(e,t))},Ne.distSquared=function(e,t){return Ne.normSquared(Ne.sub(e,t))},Ne.sum=function(e){return l.fold(e,function(e,t){return t+e},0)},Ne.addAll=function(e){var t=i(e)();if(!t.hasNext())return null;var n=t.next().length;return l.fold(e,function(e,t){return Ne.add(t,e)},Ne.rep(n,0))},Ne.addAllMutate=function(e){for(var t=e[0],n=1,r=e.length;n<r;){var i=n++;Ne.addMutate(t,e[i])}},Ne.addMulMutate=function(e,t,n){for(var r=0,i=e.length;r<i;){var o=r++;e[o]=e[o]+t*n[o]}},Ne.subMulMutate=function(e,t,n){for(var r=0,i=e.length;r<i;){var o=r++;e[o]=e[o]-t*n[o]}},Ne.addMutate=function(e,t){for(var n=0,r=e.length;n<r;){var i=n++;e[i]=e[i]+t[i]}},Ne.subMutate=function(e,t){for(var n=0,r=e.length;n<r;){var i=n++;e[i]=e[i]-t[i]}},Ne.mulMutate=function(e,t){for(var n=0,r=t.length;n<r;){var i=n++;t[i]=t[i]*e}},Ne.norm=function(e){var t=Ne.normSquared(e);return 0!=t?Math.sqrt(t):t},Ne.normSquared=function(e){return l.fold(e,function(e,t){return t+e*e},0)},Ne.rep=function(e,t){for(var n=[],r=0;r<e;){r++;n.push(t)}return n},Ne.zeros1d=function(e){for(var t=[],n=0;n<e;){n++;t.push(0)}return t},Ne.zeros2d=function(e,t){for(var n=[],r=0;r<e;){r++;n.push(Ne.zeros1d(t))}return n},Ne.zeros3d=function(e,t,n){for(var r=[],i=0;i<e;){i++;r.push(Ne.zeros2d(t,n))}return r},Ne.dot=function(e,t){for(var n=0,r=0,i=e.length;r<i;){var o=r++;n+=e[o]*t[o]}return n},Ne.add=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(e[o]+t[o])}return n},Ne.mul=function(e,t){for(var n=[],r=0,i=t.length;r<i;){var o=r++;n.push(e*t[o])}return n},Ne.div=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(e[o]/t)}return n},Ne.sub=function(e,t){for(var n=[],r=0,i=e.length;r<i;){var o=r++;n.push(e[o]-t[o])}return n},Ne.isZero=function(e){for(var t=0,n=e.length;t<n;){var r=t++;if(Math.abs(e[r])>G.TOLERANCE)return!1}return!0},Ne.sortedSetUnion=function(e,t){for(var n=[],r=0,i=0;r<e.length||i<t.length;)if(r>=e.length)n.push(t[i]),i++;else if(i>=t.length)n.push(e[r]),r++;else{var o=e[r]-t[i];Math.abs(o)<G.EPSILON?(n.push(e[r]),r++,i++):o>0?(n.push(t[i]),i++):(n.push(e[r]),r++)}return n},Ne.sortedSetSub=function(e,t){for(var n=[],r=0,i=0;r<e.length;)i>=t.length?(n.push(e[r]),r++):Math.abs(e[r]-t[i])<G.EPSILON?(r++,i++):(n.push(e[r]),r++);return n};var Ae=t.eval.Analyze=function(){};a["verb.eval.Analyze"]=Ae,Ae.__name__=["verb","eval","Analyze"],Ae.knotMultiplicities=function(e){for(var t=[new ze(e[0],0)],n=t[0],r=0;r<e.length;){var i=e[r];++r,Math.abs(i-n.knot)>G.EPSILON&&(n=new ze(i,0),t.push(n)),n.inc()}return t},Ae.isRationalSurfaceClosed=function(e,t){null==t&&(t=!0);var n;n=t?e.controlPoints:be.transpose(e.controlPoints);for(var r=0,i=n[0].length;r<i;){var o=r++;if(!(Ne.dist(F.first(n)[o],F.last(n)[o])<G.EPSILON))return!1}return!0},Ae.rationalSurfaceClosestPoint=function(e,t){var n=Ae.rationalSurfaceClosestParam(e,t);return Be.rationalSurfacePoint(e,n[0],n[1])},Ae.rationalSurfaceClosestParam=function(e,t){for(var n,r,i,o=0,a=e.knotsU[0],s=F.last(e.knotsU),u=e.knotsV[0],l=F.last(e.knotsV),c=Ae.isRationalSurfaceClosed(e),h=Ae.isRationalSurfaceClosed(e,!1),f=Oe.rationalSurfaceAdaptive(e,new Re),v=1/0,_=0,d=f.points.length;_<d;){var p=_++,m=f.points[p],g=Ne.normSquared(Ne.sub(t,m));g<v&&(v=g,i=f.uvs[p])}for(;o<5;){n=function(t){return Be.rationalSurfaceDerivatives(e,t[0],t[1],2)}(i),r=Ne.sub(n[0][0],t);var b=Ne.norm(r),w=Ne.dot(n[1][0],r),y=Ne.norm(n[1][0])*b,S=Ne.dot(n[0][1],r),k=Ne.norm(n[0][1])*b,P=w/y,x=S/k,C=b<1e-4,M=P<5e-4,N=x<5e-4;if(C&&M&&N)return i;var A=function(e,t,n){var r=t[1][0],i=t[0][1],o=t[2][0],a=t[0][2],s=t[1][1],u=t[1][1],l=Ne.dot(r,n),c=Ne.dot(i,n),h=[-l,-c],f=Ne.dot(r,r)+Ne.dot(o,n),v=Ne.dot(r,i)+Ne.dot(s,n),_=Ne.dot(r,i)+Ne.dot(u,n),d=Ne.dot(i,i)+Ne.dot(a,n),p=[[f,v],[_,d]],m=be.solve(p,h);return Ne.add(m,e)}(i,n,r);A[0]<a?A=c?[s-(A[0]-a),A[1]]:[a+G.EPSILON,A[1]]:A[0]>s&&(A=c?[a+(A[0]-s),A[1]]:[s-G.EPSILON,A[1]]),A[1]<u?A=h?[A[0],l-(A[1]-u)]:[A[0],u+G.EPSILON]:A[1]>l&&(A=h?[A[0],u+(A[0]-l)]:[A[0],l-G.EPSILON]);if(Ne.norm(Ne.mul(A[0]-i[0],n[1][0]))+Ne.norm(Ne.mul(A[1]-i[1],n[0][1]))<1e-4)return i;i=A,o++}return i},Ae.rationalCurveClosestPoint=function(e,t){return Be.rationalCurvePoint(e,Ae.rationalCurveClosestParam(e,t))},Ae.rationalCurveClosestParam=function(e,t){for(var n=1/0,r=0,i=Oe.rationalCurveRegularSample(e,e.controlPoints.length*e.degree,!0),o=0,a=i.length-1;o<a;){var s=o++,u=i[s][0],l=i[s+1][0],c=i[s].slice(1),h=i[s+1].slice(1),f=Me.segmentClosestPoint(t,c,h,u,l),v=Ne.norm(Ne.sub(t,f.pt));v<n&&(n=v,r=f.u)}for(var _,d,p=0,m=e.knots[0],g=F.last(e.knots),b=Ne.normSquared(Ne.sub(e.controlPoints[0],F.last(e.controlPoints)))<G.EPSILON,w=r;p<5;){_=function(t){return Be.rationalCurveDerivatives(e,t,2)}(w),d=Ne.sub(_[0],t);var y=Ne.norm(d),S=Ne.dot(_[1],d),k=Ne.norm(_[1])*y,P=S/k,x=y<1e-4,C=Math.abs(P)<5e-4;if(x&&C)return w;var M=function(e,t,n){return e-Ne.dot(t[1],n)/(Ne.dot(t[2],n)+Ne.dot(t[1],t[1]))}(w,_,d);M<m?M=b?g-(M-m):m:M>g&&(M=b?m+(M-g):g);if(Ne.norm(Ne.mul(M-w,_[1]))<1e-4)return w;w=M,p++}return w},Ae.rationalCurveParamAtArcLength=function(e,t,n,r,i){if(null==n&&(n=.001),t<G.EPSILON)return e.knots[0];var o;o=null!=r?r:Ue.decomposeCurveIntoBeziers(e);var a,s=0,u=(o[s],-G.EPSILON);for(a=null!=i?i:[];u<t&&s<o.length;){if(s<a.length?a[s]=a[s]:a[s]=Ae.rationalBezierCurveArcLength(e),u+=a[s],t<u+G.EPSILON)return Ae.rationalBezierCurveParamAtArcLength(e,t,n,a[s]);s++}return-1},Ae.rationalBezierCurveParamAtArcLength=function(e,t,n,r){if(t<0)return e.knots[0];var i;if(i=null!=r?r:Ae.rationalBezierCurveArcLength(e),t>i)return F.last(e.knots);var o,a=e.knots[0],s=0,u=F.last(e.knots),l=i,c=0,h=0;for(o=null!=n?n:2*G.TOLERANCE;l-s>o;)c=(a+u)/2,h=Ae.rationalBezierCurveArcLength(e,c),h>t?(u=c,l=h):(a=c,s=h);return(a+u)/2},Ae.rationalCurveArcLength=function(e,t,n){null==n&&(n=16),t=null==t?F.last(e.knots):t;for(var r=Ue.decomposeCurveIntoBeziers(e),i=0,o=r[0],a=0;i<r.length&&o.knots[0]+G.EPSILON<t;){var s=Math.min(F.last(o.knots),t);a+=Ae.rationalBezierCurveArcLength(o,s,n),
o=r[++i]}return a},Ae.rationalBezierCurveArcLength=function(e,t,n){null==n&&(n=16);var r;r=null==t?F.last(e.knots):t;for(var i,o,a=(r-e.knots[0])/2,s=0,u=e.degree+n,l=0;l<u;){var c=l++;i=a*Ae.Tvalues[u][c]+a+e.knots[0],o=Be.rationalCurveDerivatives(e,i,1),s+=Ae.Cvalues[u][c]*Ne.norm(o[1])}return a*s};var ze=t.eval.KnotMultiplicity=function(e,t){this.knot=e,this.mult=t};a["verb.eval.KnotMultiplicity"]=ze,ze.__name__=["verb","eval","KnotMultiplicity"],ze.prototype={inc:function(){this.mult++},__class__:ze};var Ie=t.eval.Check=function(){};a["verb.eval.Check"]=Ie,Ie.__name__=["verb","eval","Check"],Ie.isValidKnotVector=function(e,t){if(0==e.length)return!1;if(e.length<2*(t+1))return!1;for(var n=F.first(e),r=0,i=t+1;r<i;){var o=r++;if(Math.abs(e[o]-n)>G.EPSILON)return!1}n=F.last(e);for(var a=e.length-t-1,s=e.length;a<s;){var u=a++;if(Math.abs(e[u]-n)>G.EPSILON)return!1}return Ie.isNonDecreasing(e)},Ie.isNonDecreasing=function(e){for(var t=F.first(e),n=0,r=e.length;n<r;){var i=n++;if(e[i]<t-G.EPSILON)return!1;t=e[i]}return!0},Ie.isValidNurbsCurveData=function(e){if(null==e.controlPoints)throw new N("Control points array cannot be null!");if(null==e.degree)throw new N("Degree cannot be null!");if(e.degree<1)throw new N("Degree must be greater than 1!");if(null==e.knots)throw new N("Knots cannot be null!");if(e.knots.length!=e.controlPoints.length+e.degree+1)throw new N("controlPoints.length + degree + 1 must equal knots.length!");if(!Ie.isValidKnotVector(e.knots,e.degree))throw new N("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return e},Ie.isValidNurbsSurfaceData=function(e){if(null==e.controlPoints)throw new N("Control points array cannot be null!");if(null==e.degreeU)throw new N("DegreeU cannot be null!");if(null==e.degreeV)throw new N("DegreeV cannot be null!");if(e.degreeU<1)throw new N("DegreeU must be greater than 1!");if(e.degreeV<1)throw new N("DegreeV must be greater than 1!");if(null==e.knotsU)throw new N("KnotsU cannot be null!");if(null==e.knotsV)throw new N("KnotsV cannot be null!");if(e.knotsU.length!=e.controlPoints.length+e.degreeU+1)throw new N("controlPointsU.length + degreeU + 1 must equal knotsU.length!");if(e.knotsV.length!=e.controlPoints[0].length+e.degreeV+1)throw new N("controlPointsV.length + degreeV + 1 must equal knotsV.length!");if(!Ie.isValidKnotVector(e.knotsU,e.degreeU)||!Ie.isValidKnotVector(e.knotsV,e.degreeV))throw new N("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return e};var Ee=t.eval.Divide=function(){};a["verb.eval.Divide"]=Ee,Ee.__name__=["verb","eval","Divide"],Ee.surfaceSplit=function(e,t,n){null==n&&(n=!1);var r,i,o;n?(o=e.controlPoints,r=e.knotsV,i=e.degreeV):(o=be.transpose(e.controlPoints),r=e.knotsU,i=e.degreeU);for(var a,s=[],u=0,l=i+1;u<l;){u++;s.push(t)}a=s;for(var c=[],h=[],f=Be.knotSpan(i,t,r),v=null,_=0;_<o.length;){var d=o[_];++_,v=Ue.curveKnotRefine(new X(i,r,d),a),c.push(v.controlPoints.slice(0,f+1)),h.push(v.controlPoints.slice(f+1))}var p=v.knots.slice(0,f+i+2),m=v.knots.slice(f+1);return n?[new Q(e.degreeU,i,e.knotsU.slice(),p,c),new Q(e.degreeU,i,e.knotsU.slice(),m,h)]:(c=be.transpose(c),h=be.transpose(h),[new Q(i,e.degreeV,p,e.knotsV.slice(),c),new Q(i,e.degreeV,m,e.knotsV.slice(),h)])},Ee.curveSplit=function(e,t){for(var n,r=e.degree,i=(e.controlPoints,e.knots),o=[],a=0,s=r+1;a<s;){a++;o.push(t)}n=o;var u=Ue.curveKnotRefine(e,n),l=Be.knotSpan(r,t,i),c=u.knots.slice(0,l+r+2),h=u.knots.slice(l+1),f=u.controlPoints.slice(0,l+1),v=u.controlPoints.slice(l+1);return[new X(r,c,f),new X(r,h,v)]},Ee.rationalCurveByEqualArcLength=function(e,t){var n=Ae.rationalCurveArcLength(e),r=n/t;return Ee.rationalCurveByArcLength(e,r)},Ee.rationalCurveByArcLength=function(e,t){var n=Ue.decomposeCurveIntoBeziers(e),r=n.map(function(e){return Ae.rationalBezierCurveArcLength(e)}),i=Ne.sum(r),o=[new Te(e.knots[0],0)];if(t>i)return o;for(var a,s=t,u=0,l=s,c=0,h=0;u<n.length;){for(c+=r[u];l<c+G.EPSILON;)a=Ae.rationalBezierCurveParamAtArcLength(n[u],l-h,G.TOLERANCE,r[u]),o.push(new Te(a,l)),l+=s;h+=r[u],u++}return o};var Te=t.eval.CurveLengthSample=function(e,t){this.u=e,this.len=t};a["verb.eval.CurveLengthSample"]=Te,Te.__name__=["verb","eval","CurveLengthSample"],Te.prototype={__class__:Te};var Be=t.eval.Eval=function(){};a["verb.eval.Eval"]=Be,Be.__name__=["verb","eval","Eval"],Be.rationalCurveTangent=function(e,t){return Be.rationalCurveDerivatives(e,t,1)[1]},Be.rationalSurfaceNormal=function(e,t,n){var r=Be.rationalSurfaceDerivatives(e,t,n,1);return Ne.cross(r[1][0],r[0][1])},Be.rationalSurfaceDerivatives=function(e,t,n,r){null==r&&(r=1);for(var i=Be.surfaceDerivatives(e,t,n,r),o=Be.rational2d(i),a=Be.weight2d(i),s=[],u=o[0][0].length,l=0,c=r+1;l<c;){var h=l++;s.push([]);for(var f=0,v=r-h+1;f<v;){for(var _=f++,d=o[h][_],p=1,m=_+1;p<m;){var g=p++;Ne.subMulMutate(d,j.get(_,g)*a[0][g],s[h][_-g])}for(var b=1,w=h+1;b<w;){var y=b++;Ne.subMulMutate(d,j.get(h,y)*a[y][0],s[h-y][_]);for(var S=Ne.zeros1d(u),k=1,P=_+1;k<P;){var x=k++;Ne.addMulMutate(S,j.get(_,x)*a[y][x],s[h-y][_-x])}Ne.subMulMutate(d,j.get(h,y),S)}Ne.mulMutate(1/a[0][0],d),s[h].push(d)}}return s},Be.rationalSurfacePoint=function(e,t,n){return Be.dehomogenize(Be.surfacePoint(e,t,n))},Be.rationalCurveDerivatives=function(e,t,n){null==n&&(n=1);for(var r=Be.curveDerivatives(e,t,n),i=Be.rational1d(r),o=Be.weight1d(r),a=[],s=0,u=n+1;s<u;){for(var l=s++,c=i[l],h=1,f=l+1;h<f;){var v=h++;Ne.subMulMutate(c,j.get(l,v)*o[v],a[l-v])}Ne.mulMutate(1/o[0],c),a.push(c)}return a},Be.rationalCurvePoint=function(e,t){return Be.dehomogenize(Be.curvePoint(e,t))},Be.surfaceDerivatives=function(e,t,n,r){var i=e.knotsU.length-e.degreeU-2,o=e.knotsV.length-e.degreeV-2;return Be.surfaceDerivativesGivenNM(i,o,e,t,n,r)},Be.surfaceDerivativesGivenNM=function(e,t,n,r,i,o){var a=n.degreeU,s=n.degreeV,u=n.controlPoints,l=n.knotsU,c=n.knotsV;if(!Be.areValidRelations(a,u.length,l.length)||!Be.areValidRelations(s,u[0].length,c.length))throw new N("Invalid relations between control points, knot vector, and n");var h,f=u[0][0].length;h=o<a?o:a;var v;v=o<s?o:s;for(var _=Ne.zeros3d(o+1,o+1,f),d=Be.knotSpanGivenN(e,a,r,l),p=Be.knotSpanGivenN(t,s,i,c),m=Be.derivativeBasisFunctionsGivenNI(d,r,a,e,l),g=Be.derivativeBasisFunctionsGivenNI(p,i,s,t,c),b=Ne.zeros2d(s+1,f),w=0,y=0,S=h+1;y<S;){for(var k=y++,P=0,x=s+1;P<x;){var C=P++;b[C]=Ne.zeros1d(f);for(var M=0,A=a+1;M<A;){var z=M++;Ne.addMulMutate(b[C],m[k][z],u[d-a+z][p-s+C])}}var I=o-k;w=I<v?I:v;for(var E=0,T=w+1;E<T;){var B=E++;_[k][B]=Ne.zeros1d(f);for(var D=0,L=s+1;D<L;){var U=D++;Ne.addMulMutate(_[k][B],g[B][U],b[U])}}}return _},Be.surfacePoint=function(e,t,n){var r=e.knotsU.length-e.degreeU-2,i=e.knotsV.length-e.degreeV-2;return Be.surfacePointGivenNM(r,i,e,t,n)},Be.surfacePointGivenNM=function(e,t,n,r,i){var o=n.degreeU,a=n.degreeV,s=n.controlPoints,u=n.knotsU,l=n.knotsV;if(!Be.areValidRelations(o,s.length,u.length)||!Be.areValidRelations(a,s[0].length,l.length))throw new N("Invalid relations between control points, knot vector, and n");for(var c=s[0][0].length,h=Be.knotSpanGivenN(e,o,r,u),f=Be.knotSpanGivenN(t,a,i,l),v=Be.basisFunctionsGivenKnotSpanIndex(h,r,o,u),_=Be.basisFunctionsGivenKnotSpanIndex(f,i,a,l),d=h-o,p=f,m=Ne.zeros1d(c),g=Ne.zeros1d(c),b=0,w=a+1;b<w;){var y=b++;g=Ne.zeros1d(c),p=f-a+y;for(var S=0,k=o+1;S<k;){var P=S++;Ne.addMulMutate(g,v[P],s[d+P][p])}Ne.addMulMutate(m,_[y],g)}return m},Be.curveRegularSamplePoints=function(e,t){for(var n=Be.curveDerivatives(e,e.knots[0],e.degree),r=1/t,i=r*r,o=n[0],a=Ne.mul(r,n[1]),s=Ne.mul(.5*i,n[2]),u=Ne.mul(i*r*.5,n[3]),l=Ne.add(s,s),c=Ne.add(u,u),h=Ne.mul(.3333333333333333,u),f=[],v=0,_=t+1;v<_;){v++;f.push(Be.dehomogenize(o)),Ne.addAllMutate([o,a,s,h]),Ne.addAllMutate([a,l,u]),Ne.addAllMutate([l,c]),Ne.addAllMutate([s,u])}return f},Be.curveRegularSamplePoints2=function(e,t){for(var n=Be.curveDerivatives(e,e.knots[0],e.degree),r=1/t,i=r*r,o=n[0],a=Ne.mul(r,n[1]),s=Ne.mul(.5*i,n[2]),u=Ne.mul(i*r*.5,n[3]),l=Ne.add(s,s),c=Ne.add(u,u),h=Ne.mul(.3333333333333333,u),f=[],v=0,_=t+1;v<_;){v++;f.push(Be.dehomogenize(o)),Ne.addAllMutate([o,a,s,h]),Ne.addAllMutate([a,l,u]),Ne.addAllMutate([l,c]),Ne.addAllMutate([s,u])}return f},Be.rationalSurfaceRegularSampleDerivatives=function(e,t,n,r){for(var i=Be.surfaceRegularSampleDerivatives(e,t,n,r),o=[],a=t+1,s=n+1,u=r+1,l=0;l<a;){var c=l++,h=[];o.push(h);for(var f=0;f<s;){for(var v=f++,_=i[c][v],d=Be.rational2d(_),p=Be.weight2d(_),m=[],g=d[0][0].length,b=0;b<u;){var w=b++;m.push([]);for(var y=0,S=u-w;y<S;){for(var k=y++,P=d[w][k],x=1,C=k+1;x<C;){var M=x++;Ne.subMulMutate(P,j.get(k,M)*p[0][M],m[w][k-M])}for(var N=1,A=w+1;N<A;){var z=N++;Ne.subMulMutate(P,j.get(w,z)*p[z][0],m[w-z][k]);for(var I=Ne.zeros1d(g),E=1,T=k+1;E<T;){var B=E++;Ne.addMulMutate(I,j.get(k,B)*p[z][B],m[w-z][k-B])}Ne.subMulMutate(P,j.get(w,z),I)}Ne.mulMutate(1/p[0][0],P),m[w].push(P)}}h.push(m)}}return o},Be.surfaceRegularSampleDerivatives=function(e,t,n,r){for(var i=e.degreeU,o=e.degreeV,a=e.controlPoints,s=e.knotsU,u=e.knotsV,l=a[0][0].length,c=(F.last(s),s[0],F.last(u),u[0],Be.regularlySpacedDerivativeBasisFunctions(i,s,t)),h=c.item0,f=c.item1,v=Be.regularlySpacedDerivativeBasisFunctions(o,u,n),_=v.item0,d=v.item1,p=[],m=t+1,g=n+1,b=0;b<m;){var w=b++,y=[];p.push(y);for(var S=0;S<g;){var k=S++;y.push(Be.surfaceDerivativesGivenBasesKnotSpans(i,o,a,h[w],_[k],f[w],d[k],l,r))}}return p},Be.rationalSurfaceRegularSamplePoints=function(e,t,n){return Be.dehomogenize2d(Be.surfaceRegularSamplePoints(e,t,n))},Be.surfaceRegularSamplePoints=function(e,t,n){for(var r=e.degreeU,i=e.degreeV,o=e.controlPoints,a=e.knotsU,s=e.knotsV,u=o[0][0].length,l=(F.last(a),a[0],F.last(s),s[0],Be.regularlySpacedBasisFunctions(r,a,t)),c=l.item0,h=l.item1,f=Be.regularlySpacedBasisFunctions(i,s,n),v=f.item0,_=f.item1,d=[],p=t+1,m=n+1,g=0;g<p;){var b=g++,w=[];d.push(w);for(var y=0;y<m;){var S=y++;w.push(Be.surfacePointGivenBasesKnotSpans(r,i,o,c[b],v[S],h[b],_[S],u))}}return d},Be.regularlySpacedBasisFunctions=function(e,t,n){for(var r=t.length-e-2,i=(F.last(t)-t[0])/n,o=[],a=[],s=t[0],u=Be.knotSpanGivenN(r,e,s,t),l=n+1,c=0;c<l;){for(c++;s>=t[u+1];)u++;a.push(u),o.push(Be.basisFunctionsGivenKnotSpanIndex(u,s,e,t)),s+=i}return new J(a,o)},Be.regularlySpacedDerivativeBasisFunctions=function(e,t,n){for(var r=t.length-e-2,i=(F.last(t)-t[0])/n,o=[],a=[],s=t[0],u=Be.knotSpanGivenN(r,e,s,t),l=n+1,c=0;c<l;){for(c++;s>=t[u+1];)u++;a.push(u),o.push(Be.derivativeBasisFunctionsGivenNI(u,s,e,r,t)),s+=i}return new J(a,o)},Be.surfacePointGivenBasesKnotSpans=function(e,t,n,r,i,o,a,s){for(var u,l=Ne.zeros1d(s),c=r-e,h=i-t,f=0,v=t+1;f<v;){var _=f++;u=Ne.zeros1d(s);for(var d=0,p=e+1;d<p;){var m=d++;Ne.addMulMutate(u,o[m],n[c+m][h])}h++,Ne.addMulMutate(l,a[_],u)}return l},Be.surfaceDerivativesGivenBasesKnotSpans=function(e,t,n,r,i,o,a,s,u){var l,c=n[0][0].length;l=u<e?u:e;var h;h=u<t?u:t;for(var f=Ne.zeros3d(l+1,h+1,c),v=Ne.zeros2d(t+1,c),_=0,d=0,p=l+1;d<p;){for(var m=d++,g=0,b=t+1;g<b;){var w=g++;v[w]=Ne.zeros1d(c);for(var y=0,S=e+1;y<S;){var k=y++;Ne.addMulMutate(v[w],o[m][k],n[r-e+k][i-t+w])}}var P=u-m;_=P<h?P:h;for(var x=0,C=_+1;x<C;){var M=x++;f[m][M]=Ne.zeros1d(c);for(var N=0,A=t+1;N<A;){var z=N++;Ne.addMulMutate(f[m][M],a[M][z],v[z])}}}return f},Be.curveDerivatives=function(e,t,n){var r=e.knots.length-e.degree-2;return Be.curveDerivativesGivenN(r,e,t,n)},Be.curveDerivativesGivenN=function(e,t,n,r){var i=t.degree,o=t.controlPoints,a=t.knots;if(!Be.areValidRelations(i,o.length,a.length))throw new N("Invalid relations between control points, knot vector, and n");var s,u=o[0].length;s=r<i?r:i;for(var l=Ne.zeros2d(r+1,u),c=Be.knotSpanGivenN(e,i,n,a),h=Be.derivativeBasisFunctionsGivenNI(c,n,i,s,a),f=0,v=s+1;f<v;)for(var _=f++,d=0,p=i+1;d<p;){var m=d++;Ne.addMulMutate(l[_],h[_][m],o[c-i+m])}return l},Be.curvePoint=function(e,t){var n=e.knots.length-e.degree-2;return Be.curvePointGivenN(n,e,t)},Be.areValidRelations=function(e,t,n){return t+e+1-n==0},Be.curvePointGivenN=function(e,t,n){var r=t.degree,i=t.controlPoints,o=t.knots;if(!Be.areValidRelations(r,i.length,o.length))throw new N("Invalid relations between control points, knot Array, and n");for(var a=Be.knotSpanGivenN(e,r,n,o),s=Be.basisFunctionsGivenKnotSpanIndex(a,n,r,o),u=Ne.zeros1d(i[0].length),l=0,c=r+1;l<c;){var h=l++;Ne.addMulMutate(u,s[h],i[a-r+h])}return u},Be.volumePoint=function(e,t,n,r){var i=e.knotsU.length-e.degreeU-2,o=e.knotsV.length-e.degreeV-2,a=e.knotsW.length-e.degreeW-2;return Be.volumePointGivenNML(e,i,o,a,t,n,r)},Be.volumePointGivenNML=function(e,t,n,r,i,o,a){if(!Be.areValidRelations(e.degreeU,e.controlPoints.length,e.knotsU.length)||!Be.areValidRelations(e.degreeV,e.controlPoints[0].length,e.knotsV.length)||!Be.areValidRelations(e.degreeW,e.controlPoints[0][0].length,e.knotsW.length))throw new N("Invalid relations between control points and knot vector");for(var s=e.controlPoints,u=e.degreeU,l=e.degreeV,c=e.degreeW,h=e.knotsU,f=e.knotsV,v=e.knotsW,_=s[0][0][0].length,d=Be.knotSpanGivenN(t,u,i,h),p=Be.knotSpanGivenN(n,l,o,f),m=Be.knotSpanGivenN(r,c,a,v),g=Be.basisFunctionsGivenKnotSpanIndex(d,i,u,h),b=Be.basisFunctionsGivenKnotSpanIndex(p,o,l,f),w=Be.basisFunctionsGivenKnotSpanIndex(m,a,c,v),y=d-u,S=Ne.zeros1d(_),k=Ne.zeros1d(_),P=Ne.zeros1d(_),x=0,C=c+1;x<C;){var M=x++;P=Ne.zeros1d(_);for(var A=m-c+M,z=0,I=l+1;z<I;){var E=z++;k=Ne.zeros1d(_);for(var T=p-l+E,B=0,D=u+1;B<D;){var L=B++;Ne.addMulMutate(k,g[L],s[y+L][T][A])}Ne.addMulMutate(P,b[E],k)}Ne.addMulMutate(S,w[M],P)}return S},Be.derivativeBasisFunctions=function(e,t,n){var r=Be.knotSpan(t,e,n),i=n.length-1,o=i-t-1;return Be.derivativeBasisFunctionsGivenNI(r,e,t,o,n)},Be.derivativeBasisFunctionsGivenNI=function(e,t,n,r,i){var o=Ne.zeros2d(n+1,n+1),a=Ne.zeros1d(n+1),s=Ne.zeros1d(n+1),u=0,l=0;o[0][0]=1;for(var c=1,h=n+1;c<h;){var f=c++;a[f]=t-i[e+1-f],s[f]=i[e+f]-t,u=0;for(var v=0;v<f;){var _=v++;o[f][_]=s[_+1]+a[f-_],l=o[_][f-1]/o[f][_],o[_][f]=u+s[_+1]*l,u=a[f-_]*l}o[f][f]=u}for(var d=Ne.zeros2d(r+1,n+1),p=Ne.zeros2d(2,n+1),m=0,g=1,b=0,w=0,y=0,S=0,k=0,P=0,x=n+1;P<x;){var C=P++;d[0][C]=o[C][n]}for(var M=0,N=n+1;M<N;){var A=M++;m=0,g=1,p[0][0]=1;for(var z=1,I=r+1;z<I;){var E=z++;b=0,w=A-E,y=n-E,A>=E&&(p[g][0]=p[m][0]/o[y+1][w],b=p[g][0]*o[w][y]),S=w>=-1?1:-w,k=A-1<=y?E-1:n-A;for(var T=S,B=k+1;T<B;){var D=T++;p[g][D]=(p[m][D]-p[m][D-1])/o[y+1][w+D],b+=p[g][D]*o[w+D][y]}A<=y&&(p[g][E]=-p[m][E-1]/o[y+1][A],b+=p[g][E]*o[A][y]),d[E][A]=b;var L=m;m=g,g=L}}for(var U=n,O=1,R=r+1;O<R;){for(var V=O++,F=0,j=n+1;F<j;){var q=F++;d[V][q]*=U}U*=n-V}return d},Be.basisFunctions=function(e,t,n){var r=Be.knotSpan(t,e,n);return Be.basisFunctionsGivenKnotSpanIndex(r,e,t,n)},Be.basisFunctionsGivenKnotSpanIndex=function(e,t,n,r){var i=Ne.zeros1d(n+1),o=Ne.zeros1d(n+1),a=Ne.zeros1d(n+1),s=0,u=0;i[0]=1;for(var l=1,c=n+1;l<c;){var h=l++;o[h]=t-r[e+1-h],a[h]=r[e+h]-t,s=0;for(var f=0;f<h;){var v=f++;u=i[v]/(a[v+1]+o[h-v]),i[v]=s+a[v+1]*u,s=o[h-v]*u}i[h]=s}return i},Be.knotSpan=function(e,t,n){return Be.knotSpanGivenN(n.length-e-2,e,t,n)},Be.knotSpanGivenN=function(e,t,n,r){if(n>r[e+1]-G.EPSILON)return e;if(n<r[t]+G.EPSILON)return t;for(var i=t,o=e+1,a=Math.floor((i+o)/2);n<r[a]||n>=r[a+1];)n<r[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},Be.dehomogenize=function(e){for(var t=e.length,n=[],r=e[t-1],i=e.length-1,o=0;o<i;){var a=o++;n.push(e[a]/r)}return n},Be.rational1d=function(e){var t=e[0].length-1;return e.map(function(e){return e.slice(0,t)})},Be.rational2d=function(e){return e.map(Be.rational1d)},Be.weight1d=function(e){var t=e[0].length-1;return e.map(function(e){return e[t]})},Be.weight2d=function(e){return e.map(Be.weight1d)},Be.dehomogenize1d=function(e){return e.map(Be.dehomogenize)},Be.dehomogenize2d=function(e){return e.map(Be.dehomogenize1d)},Be.homogenize1d=function(e,t){var n,r=e.length,i=e[0].length,o=[],a=0,s=[];n=null!=t?t:Ne.rep(e.length,1);for(var u=0;u<r;){var l=u++,c=[];s=e[l],a=n[l];for(var h=0;h<i;){var f=h++;c.push(s[f]*a)}c.push(a),o.push(c)}return o},Be.homogenize2d=function(e,t){var n,r=e.length,i=[];if(null!=t)n=t;else{for(var o=[],a=0;a<r;){a++;o.push(Ne.rep(e[0].length,1))}n=o}for(var s=0;s<r;){var u=s++;i.push(Be.homogenize1d(e[u],n[u]))}return i};var De=t.eval.Intersect=function(){};a["verb.eval.Intersect"]=De,De.__name__=["verb","eval","Intersect"],De.surfaces=function(e,t,n){var r=Oe.rationalSurfaceAdaptive(e),i=Oe.rationalSurfaceAdaptive(t);return De.meshes(r,i).map(function(r){return r.map(function(r){return De.surfacesAtPointWithEstimate(e,t,r.uv0,r.uv1,n)})}).map(function(e){return Le.rationalInterpCurve(e.map(function(e){return e.point}),3)})},De.surfacesAtPointWithEstimate=function(e,t,n,r,i){var o,a,s,u,l,c,h,f,v,_,d,p,m,g=0;do{if(o=Be.rationalSurfaceDerivatives(e,n[0],n[1],1),a=o[0][0],u=o[1][0],l=o[0][1],s=Ne.normalized(Ne.cross(u,l)),c=Ne.dot(s,a),h=Be.rationalSurfaceDerivatives(t,r[0],r[1],1),f=h[0][0],_=h[1][0],d=h[0][1],v=Ne.normalized(Ne.cross(_,d)),p=Ne.dot(v,f),(m=Ne.distSquared(a,f))<i*i)break;var b=Ne.normalized(Ne.cross(s,v)),w=Ne.dot(b,a),y=De.threePlanes(s,c,v,p,b,w);if(null==y)throw new N("panic!");var S=Ne.sub(y,a),k=Ne.sub(y,f),P=Ne.cross(u,s),x=Ne.cross(l,s),C=Ne.cross(_,v),M=Ne.cross(d,v),A=Ne.dot(x,S)/Ne.dot(x,u),z=Ne.dot(P,S)/Ne.dot(P,l),I=Ne.dot(M,k)/Ne.dot(M,_),E=Ne.dot(C,k)/Ne.dot(C,d);n=Ne.add([A,z],n),r=Ne.add([I,E],r),g++}while(g<5)return new oe(n,r,a,m)},De.meshes=function(e,t,n,r){null==n&&(n=new pe(e)),null==r&&(r=new pe(t));var i=De.boundingBoxTrees(n,r,0),o=F.unique(i.map(function(n){return De.triangles(e,n.item0,t,n.item1)}).filter(function(e){return null!=e}).filter(function(e){return Ne.distSquared(e.min.point,e.max.point)>G.EPSILON}),function(e,t){var n=Ne.sub(e.min.uv0,t.min.uv0),r=Ne.dot(n,n),i=Ne.sub(e.max.uv0,t.max.uv0),o=Ne.dot(i,i),a=Ne.sub(e.min.uv0,t.max.uv0),s=Ne.dot(a,a),u=Ne.sub(e.max.uv0,t.min.uv0),l=Ne.dot(u,u);return r<G.EPSILON&&o<G.EPSILON||s<G.EPSILON&&l<G.EPSILON});return De.makeMeshIntersectionPolylines(o)},De.meshSlices=function(e,t,n,r){for(var i=new Se(e),o=i.boundingBox(),a=o.min[0],s=o.min[1],u=o.max[0],l=o.max[1],c=Ne.span(t,n,r),h=[],f=0;f<c.length;){var v=c[f];++f;var _=[[a,s,v],[u,s,v],[u,l,v],[a,l,v]],d=[[0,0],[1,0],[1,1],[0,1]],p=[[0,1,2],[0,2,3]],m=new Y(p,_,null,d);h.push(De.meshes(e,m,i))}return h},De.makeMeshIntersectionPolylines=function(e){if(0==e.length)return[];for(var t=0;t<e.length;){var n=e[t];++t,n.max.opp=n.min,n.min.opp=n.max}for(var r=De.kdTreeFromSegments(e),i=[],o=0;o<e.length;){var a=e[o];++o,i.push(a.min),i.push(a.max)}for(var s=0;s<i.length;){var u=i[s];if(++s,null==u.adj){var l=De.lookupAdjacentSegment(u,r,e.length);null!=l&&null==l.adj&&(u.adj=l,l.adj=u)}}var c=i.filter(function(e){return null==e.adj});0==c.length&&(c=i);for(var h=[],f=0,v=!1;0!=c.length;){var _=c.pop();if(!_.visited){for(var d=[],p=_;null!=p&&!p.visited&&(p.visited=!0,p.opp.visited=!0,d.push(p),f+=2,(p=p.opp.adj)!=_););d.length>0&&(d.push(d[d.length-1].opp),h.push(d))}if(0==c.length&&i.length>0&&(v||f<i.length)){v=!0;var m=i.pop();c.push(m)}}return h},De.kdTreeFromSegments=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];++n,t.push(new fe(r.min.point,r.min)),t.push(new fe(r.max.point,r.max))}return new ce(t,Ne.distSquared)},De.lookupAdjacentSegment=function(e,t,n){var r=t.nearest(e.point,n,G.EPSILON).filter(function(t){return e!=t.item0.obj}).map(function(e){return e.item0.obj});return 1==r.length?r[0]:null},De.curveAndSurface=function(e,t,n,r,i){null==n&&(n=.001),r=null!=r?r:new de(e),i=null!=i?i:new ge(t);var o=De.boundingBoxTrees(r,i,n);return F.unique(o.map(function(e){var t=e.item0,r=e.item1,i=F.first(t.knots),o=F.last(t.knots),a=(i+o)/2,s=F.first(r.knotsU),u=F.last(r.knotsU),l=F.first(r.knotsV),c=F.last(r.knotsV),h=[(s+u)/2,(l+c)/2];return De.curveAndSurfaceWithEstimate(t,r,[a].concat(h),n)}).filter(function(e){return Ne.distSquared(e.curvePoint,e.surfacePoint)<n*n}),function(e,t){return Math.abs(e.u-t.u)<.5*n})},De.curveAndSurfaceWithEstimate=function(e,t,n,r){null==r&&(r=.001);var i=function(n){var r=Be.rationalCurvePoint(e,n[0]),i=Be.rationalSurfacePoint(t,n[1],n[2]),o=Ne.sub(r,i);return Ne.dot(o,o)},o=function(n){var r=Be.rationalCurveDerivatives(e,n[0],1),i=Be.rationalSurfaceDerivatives(t,n[1],n[2],1),o=Ne.sub(i[0][0],r[0]),a=Ne.mul(-1,r[1]),s=i[1][0],u=i[0][1];return[2*Ne.dot(a,o),2*Ne.dot(s,o),2*Ne.dot(u,o)]},a=ke.uncmin(i,n,r*r,o),s=a.solution;return new ne(s[0],[s[1],s[2]],Be.rationalCurvePoint(e,s[0]),Be.rationalSurfacePoint(t,s[1],s[2]))},De.polylineAndMesh=function(e,t,n){for(var r=De.boundingBoxTrees(new me(e),new pe(t),n),i=[],o=0;o<r.length;){var a=r[o];++o;var s=a.item0,u=a.item1,l=De.segmentWithTriangle(e.points[s],e.points[s+1],t.points,t.faces[u]);if(null!=l){var c=l.point,h=Ne.lerp(l.p,[e.params[s]],[e.params[s+1]])[0],f=ye.triangleUVFromPoint(t,u,c);i.push(new ie(c,h,f,s,u))}}return i},De.boundingBoxTrees=function(e,t,n){null==n&&(n=1e-9);var r=[],i=[];r.push(e),i.push(t);for(var o=[];r.length>0;){var a=r.pop(),s=i.pop();if(!a.empty()&&!s.empty()&&a.boundingBox().intersects(s.boundingBox(),n)){var u=a.indivisible(n),l=s.indivisible(n);if(u&&l)o.push(new J(a.yield(),s.yield()));else if(!u||l)if(u||!l){var c=a.split(),h=s.split();r.push(c.item1),i.push(h.item1),r.push(c.item1),i.push(h.item0),r.push(c.item0),i.push(h.item1),r.push(c.item0),i.push(h.item0)}else{var f=a.split();r.push(f.item1),i.push(s),r.push(f.item0),i.push(s)}else{var v=s.split();r.push(a),i.push(v.item1),r.push(a),i.push(v.item0)}}}return o},De.curves=function(e,t,n){var r=De.boundingBoxTrees(new de(e),new de(t),0);return F.unique(r.map(function(r){return De.curvesWithEstimate(e,t,F.first(r.item0.knots),F.first(r.item1.knots),n)}).filter(function(e){return Ne.distSquared(e.point0,e.point1)<n}),function(e,t){return Math.abs(e.u0-t.u0)<5*n})},De.curvesWithEstimate=function(e,t,n,r,i){var o=function(n){var r=Be.rationalCurvePoint(e,n[0]),i=Be.rationalCurvePoint(t,n[1]),o=Ne.sub(r,i);return Ne.dot(o,o)},a=function(n){var r=Be.rationalCurveDerivatives(e,n[0],1),i=Be.rationalCurveDerivatives(t,n[1],1),o=Ne.sub(r[0],i[0]),a=r[1],s=Ne.mul(-1,i[1]);return[2*Ne.dot(a,o),2*Ne.dot(s,o)]},s=ke.uncmin(o,[n,r],i*i,a),u=s.solution[0],l=s.solution[1];return new te(Be.rationalCurvePoint(e,u),Be.rationalCurvePoint(t,l),u,l)},De.triangles=function(e,t,n,r){var i=e.faces[t],o=n.faces[r],a=ye.getTriangleNorm(e.points,i),s=ye.getTriangleNorm(n.points,o),u=e.points[i[0]],l=n.points[o[0]],c=De.planes(u,a,l,s);if(null==c)return null;var h=De.clipRayInCoplanarTriangle(c,e,t);if(null==h)return null;var f=De.clipRayInCoplanarTriangle(c,n,r);if(null==f)return null;var v=De.mergeTriangleClipIntervals(h,f,e,t,n,r);return null==v?null:new ee(new re(v.min.uv0,v.min.uv1,v.min.point,t,r),new re(v.max.uv0,v.max.uv1,v.max.point,t,r))},De.clipRayInCoplanarTriangle=function(e,t,n){for(var r=t.faces[n],i=[t.points[r[0]],t.points[r[1]],t.points[r[2]]],o=[t.uvs[r[0]],t.uvs[r[1]],t.uvs[r[2]]],a=[Ne.sub(o[1],o[0]),Ne.sub(o[2],o[1]),Ne.sub(o[0],o[2])],s=[Ne.sub(i[1],i[0]),Ne.sub(i[2],i[1]),Ne.sub(i[0],i[2])],u=s.map(Ne.normalized),l=s.map(Ne.norm),c=null,h=null,f=0;f<3;){var v=f++,_=i[v],d=u[v],p=De.rays(_,d,e.origin,e.dir);if(null!=p){var m=p.u0,g=p.u1;m<-G.EPSILON||m>l[v]+G.EPSILON||((null==c||g<c.u)&&(c=new se(g,Ne.onRay(e.origin,e.dir,g),Ne.onRay(o[v],a[v],m/l[v]))),(null==h||g>h.u)&&(h=new se(g,Ne.onRay(e.origin,e.dir,g),Ne.onRay(o[v],a[v],m/l[v]))))}}return null==h||null==c?null:new ee(c,h)},De.mergeTriangleClipIntervals=function(e,t,n,r,i,o){if(t.min.u>e.max.u+G.EPSILON||e.min.u>t.max.u+G.EPSILON)return null;var a;a=e.min.u>t.min.u?new J(e.min,0):new J(t.min,1);var s;s=e.max.u<t.max.u?new J(e.max,0):new J(t.max,1);var u=new ee(new re(null,null,a.item0.point,r,o),new re(null,null,s.item0.point,r,o));return 0==a.item1?(u.min.uv0=a.item0.uv,u.min.uv1=ye.triangleUVFromPoint(i,o,a.item0.point)):(u.min.uv0=ye.triangleUVFromPoint(n,r,a.item0.point),u.min.uv1=a.item0.uv),0==s.item1?(u.max.uv0=s.item0.uv,u.max.uv1=ye.triangleUVFromPoint(i,o,s.item0.point)):(u.max.uv0=ye.triangleUVFromPoint(n,r,s.item0.point),u.max.uv1=s.item0.uv),u},De.planes=function(e,t,n,r){var i=Ne.cross(t,r);if(Ne.dot(i,i)<G.EPSILON)return null;var o=0,a=Math.abs(i[0]),s=Math.abs(i[1]),u=Math.abs(i[2]);s>a&&(o=1,a=s),u>a&&(o=2,a=u);var l,c,h,f;0==o?(l=t[1],c=t[2],h=r[1],f=r[2]):1==o?(l=t[0],c=t[2],h=r[0],f=r[2]):(l=t[0],c=t[1],h=r[0],f=r[1]);var v,_=-Ne.dot(e,t),d=-Ne.dot(n,r),p=l*f-c*h,m=(c*d-_*f)/p,g=(_*h-l*d)/p;return v=0==o?[0,m,g]:1==o?[m,0,g]:[m,g,0],new H(v,Ne.normalized(i))},De.threePlanes=function(e,t,n,r,i,o){var a=Ne.cross(n,i),s=Ne.dot(e,a);if(Math.abs(s)<G.EPSILON)return null;var u=Ne.sub(Ne.mul(o,n),Ne.mul(r,i)),l=Ne.add(Ne.mul(t,a),Ne.cross(e,u));return Ne.mul(1/s,l)},De.polylines=function(e,t,n){for(var r=De.boundingBoxTrees(new me(e),new me(t),n),i=[],o=0;o<r.length;){var a=r[o];++o;var s=a.item0,u=a.item1,l=De.segments(e.points[s],e.points[s+1],t.points[u],t.points[u+1],n);null!=l&&(l.u0=Ne.lerp(l.u0,[e.params[s]],[e.params[s+1]])[0],l.u1=Ne.lerp(l.u1,[t.params[u]],[t.params[u+1]])[0],i.push(l))}return i},De.segments=function(e,t,n,r,i){var o=Ne.sub(t,e),a=Math.sqrt(Ne.dot(o,o)),s=Ne.mul(1/a,o),u=Ne.sub(r,n),l=Math.sqrt(Ne.dot(u,u)),c=Ne.mul(1/l,u),h=De.rays(e,s,n,c);if(null!=h){var f=Math.min(Math.max(0,h.u0/a),1),v=Math.min(Math.max(0,h.u1/l),1),_=Ne.onRay(e,o,f),d=Ne.onRay(n,u,v);if(Ne.distSquared(_,d)<i*i)return new te(_,d,f,v)}return null},De.rays=function(e,t,n,r){var i=Ne.dot(t,r),o=Ne.dot(t,n),a=Ne.dot(t,e),s=Ne.dot(r,n),u=Ne.dot(r,e),l=Ne.dot(t,t),c=Ne.dot(r,r),h=l*c-i*i;if(Math.abs(h)<G.EPSILON)return null;var f=i*(o-a)-l*(s-u),v=f/h,_=(o-a+v*i)/l;return new te(Ne.onRay(e,t,_),Ne.onRay(n,r,v),_,v)},De.segmentWithTriangle=function(e,t,n,r){var i=n[r[0]],o=n[r[1]],a=n[r[2]],s=Ne.sub(o,i),u=Ne.sub(a,i),l=Ne.cross(s,u),c=Ne.sub(t,e),h=Ne.sub(e,i),f=-Ne.dot(l,h),v=Ne.dot(l,c);if(Math.abs(v)<G.EPSILON)return null;var _=f/v;if(_<0||_>1)return null;var d=Ne.add(e,Ne.mul(_,c)),p=Ne.dot(s,u),m=Ne.dot(s,s),g=Ne.dot(u,u),b=Ne.sub(d,i),w=Ne.dot(b,s),y=Ne.dot(b,u),S=p*p-m*g;if(Math.abs(S)<G.EPSILON)return null;var k=(p*y-g*w)/S,P=(p*w-m*y)/S;return k>1+G.EPSILON||P>1+G.EPSILON||P<-G.EPSILON||k<-G.EPSILON||k+P>1+G.EPSILON?null:new ae(d,k,P,_)},De.segmentAndPlane=function(e,t,n,r){var i=Ne.dot(r,Ne.sub(t,e));if(Math.abs(i)<G.EPSILON)return null;var o=Ne.dot(r,Ne.sub(n,e)),a=o/i;return a>1+G.EPSILON||a<-G.EPSILON?null:{p:a}};var Le=t.eval.Make=function(){};a["verb.eval.Make"]=Le,Le.__name__=["verb","eval","Make"],Le.rationalTranslationalSurface=function(e,t){for(var n=Be.rationalCurvePoint(t,F.first(t.knots)),r=F.first(t.knots),i=F.last(t.knots),o=2*t.controlPoints.length,a=(i-r)/(o-1),s=[],u=0;u<o;){var l=u++,c=Ne.sub(Be.rationalCurvePoint(t,r+l*a),n),h=Ue.rationalCurveTransform(e,[[1,0,0,c[0]],[0,1,0,c[1]],[0,0,1,c[2]],[0,0,0,1]]);s.push(h)}return Le.loftedSurface(s)},Le.surfaceBoundaryCurves=function(e){return[Le.surfaceIsocurve(e,F.first(e.knotsU),!1),Le.surfaceIsocurve(e,F.last(e.knotsU),!1),Le.surfaceIsocurve(e,F.first(e.knotsV),!0),Le.surfaceIsocurve(e,F.last(e.knotsV),!0)]},Le.surfaceIsocurve=function(e,t,n){null==n&&(n=!1);var r;r=n?e.knotsV:e.knotsU;var i;i=n?e.degreeV:e.degreeU;for(var o=Ae.knotMultiplicities(r),a=-1,s=0,u=o.length;s<u;){var l=s++;if(Math.abs(t-o[l].knot)<G.EPSILON){a=l;break}}var c=i+1;a>=0&&(c-=o[a].mult);var h;h=c>0?Ue.surfaceKnotRefine(e,Ne.rep(c,t),n):e;var f=Be.knotSpan(i,t,r);return Math.abs(t-F.first(r))<G.EPSILON?f=0:Math.abs(t-F.last(r))<G.EPSILON&&(f=(n?h.controlPoints[0].length:h.controlPoints.length)-1),n?new X(h.degreeU,h.knotsU,function(e){for(var t=[],n=0,r=h.controlPoints;n<r.length;){var i=r[n];++n,t.push(i[f])}return t}(this)):new X(h.degreeV,h.knotsV,h.controlPoints[f])},Le.loftedSurface=function(e,t){e=Ue.unifyCurveKnotVectors(e);var n=e[0].degree;null==t&&(t=3),t>e.length-1&&(t=e.length-1);for(var r=e[0].knots,i=[],o=[],a=0,s=e[0].controlPoints.length;a<s;){var u=[a++],l=e.map(function(e){return function(t){return t.controlPoints[e[0]]}}(u)),c=Le.rationalInterpCurve(l,t,!0);o.push(c.controlPoints),i=c.knots}return new Q(n,t,r,i,o)},Le.clonedCurve=function(e){return new X(e.degree,e.knots.slice(),e.controlPoints.map(function(e){return e.slice()}))},Le.rationalBezierCurve=function(e,t){for(var n=e.length-1,r=[],i=0,o=n+1;i<o;){i++;r.push(0)}for(var a=0,s=n+1;a<s;){a++;r.push(1)}return null==t&&(t=Ne.rep(e.length,1)),new X(n,r,Be.homogenize1d(e,t))},Le.fourPointSurface=function(e,t,n,r,i){null==i&&(i=3);for(var o=i,a=[],s=0,u=i+1;s<u;){for(var l=s++,c=[],h=0,f=i+1;h<f;){var v=h++,_=1-l/o,d=Ne.lerp(_,e,t),p=Ne.lerp(_,r,n),m=Ne.lerp(1-v/o,d,p);m.push(1),c.push(m)}a.push(c)}var g=Ne.rep(i+1,0),b=Ne.rep(i+1,1);return new Q(i,i,g.concat(b),g.concat(b),a)},Le.ellipseArc=function(e,t,n,r,i){var o=Ne.norm(t),a=Ne.norm(n);t=Ne.normalized(t),n=Ne.normalized(n),i<r&&(i=2*Math.PI+r);var s=i-r,u=0;u=s<=Math.PI/2?1:s<=Math.PI?2:s<=3*Math.PI/2?3:4;var l=s/u,c=Math.cos(l/2),h=Ne.add(e,Ne.add(Ne.mul(o*Math.cos(r),t),Ne.mul(a*Math.sin(r),n))),f=Ne.sub(Ne.mul(Math.cos(r),n),Ne.mul(Math.sin(r),t)),v=[],_=Ne.zeros1d(2*u+3),d=0,p=r,m=Ne.zeros1d(2*u);v[0]=h,m[0]=1;for(var g=1,b=u+1;g<b;){var w=g++;p+=l;var y=Ne.add(e,Ne.add(Ne.mul(o*Math.cos(p),t),Ne.mul(a*Math.sin(p),n)));m[d+2]=1,v[d+2]=y;var S=Ne.sub(Ne.mul(Math.cos(p),n),Ne.mul(Math.sin(p),t)),k=De.rays(h,Ne.mul(1/Ne.norm(f),f),y,Ne.mul(1/Ne.norm(S),S)),P=Ne.add(h,Ne.mul(k.u0,f));m[d+1]=c,v[d+1]=P,d+=2,w<u&&(h=y,f=S)}for(var x=2*u+1,C=0;C<3;){var M=C++;_[M]=0,_[M+x]=1}switch(u){case 2:_[3]=_[4]=.5;break;case 3:_[3]=_[4]=.3333333333333333,_[5]=_[6]=.6666666666666666;break;case 4:_[3]=_[4]=.25,_[5]=_[6]=.5,_[7]=_[8]=.75}return new X(2,_,Be.homogenize1d(v,m))},Le.arc=function(e,t,n,r,i,o){return Le.ellipseArc(e,Ne.mul(r,Ne.normalized(t)),Ne.mul(r,Ne.normalized(n)),i,o)},Le.polyline=function(e){for(var t=[0,0],n=0,r=0,i=e.length-1;r<i;){var o=r++;n+=Ne.dist(e[o],e[o+1]),t.push(n)}t.push(n),t=Ne.mul(1/n,t);for(var a,s=[],u=0,l=e.length;u<l;){u++;s.push(1)}return a=s,new X(1,t,Be.homogenize1d(e.slice(0),a))},Le.extrudedSurface=function(e,t,n){for(var r=[[],[],[]],i=[[],[],[]],o=Be.dehomogenize1d(n.controlPoints),a=Be.weight1d(n.controlPoints),s=Ne.mul(t,e),u=Ne.mul(.5*t,e),l=0,c=o.length;l<c;){var h=l++;r[2][h]=o[h],r[1][h]=Ne.add(u,o[h]),r[0][h]=Ne.add(s,o[h]),i[0][h]=a[h],i[1][h]=a[h],i[2][h]=a[h]}return new Q(2,n.degree,[0,0,0,1,1,1],n.knots,Be.homogenize2d(r,i))},Le.cylindricalSurface=function(e,t,n,r,i){var o=Ne.cross(e,t),a=(Math.PI,Le.arc(n,t,o,i,0,2*Math.PI));return Le.extrudedSurface(e,r,a)},Le.revolvedSurface=function(e,t,n,r){var i,o,a=Be.dehomogenize1d(e.controlPoints),s=Be.weight1d(e.controlPoints);r<=Math.PI/2?(i=1,o=Ne.zeros1d(6+2*(i-1))):r<=Math.PI?(i=2,o=Ne.zeros1d(6+2*(i-1)),o[3]=o[4]=.5):r<=3*Math.PI/2?(i=3,o=Ne.zeros1d(6+2*(i-1)),o[3]=o[4]=.3333333333333333,o[5]=o[6]=.6666666666666666):(i=4,o=Ne.zeros1d(6+2*(i-1)),o[3]=o[4]=.25,o[5]=o[6]=.5,o[7]=o[8]=.75);for(var u=r/i,l=3+2*(i-1),c=0;c<3;){var h=c++;o[h]=0,o[l+h]=1}for(var f=Math.cos(u/2),v=0,_=Ne.zeros1d(i+1),d=Ne.zeros1d(i+1),p=Ne.zeros3d(2*i+1,a.length,3),m=Ne.zeros2d(2*i+1,a.length),g=1,b=i+1;g<b;){var w=g++;v+=u,d[w]=Math.cos(v),_[w]=Math.sin(v)}for(var y=0,S=a.length;y<S;){var k=y++,P=Me.rayClosestPoint(a[k],t,n),x=Ne.sub(a[k],P),C=Ne.norm(x),M=Ne.cross(n,x);C>G.EPSILON&&(x=Ne.mul(1/C,x),M=Ne.mul(1/C,M)),p[0][k]=a[k];var N=a[k];m[0][k]=s[k];for(var A=M,z=0,I=1,E=i+1;I<E;){var T,B=I++;T=0==C?P:Ne.add(P,Ne.add(Ne.mul(C*d[B],x),Ne.mul(C*_[B],M))),p[z+2][k]=T,m[z+2][k]=s[k];var D=Ne.sub(Ne.mul(d[B],M),Ne.mul(_[B],x));if(0==C)p[z+1][k]=P;else{var L=De.rays(N,Ne.mul(1/Ne.norm(A),A),T,Ne.mul(1/Ne.norm(D),D)),U=Ne.add(N,Ne.mul(L.u0,A));p[z+1][k]=U}m[z+1][k]=f*s[k],z+=2,B<i&&(N=T,A=D)}}return new Q(2,e.degree,o,e.knots,Be.homogenize2d(p,m))},Le.sphericalSurface=function(e,t,n,r){var i=Le.arc(e,Ne.mul(-1,t),n,r,0,Math.PI);return Le.revolvedSurface(i,e,t,2*Math.PI)},Le.conicalSurface=function(e,t,n,r,i){
var o=2*Math.PI,a=[Ne.add(n,Ne.mul(r,e)),Ne.add(n,Ne.mul(i,t))],s=[0,0,1,1],u=[1,1],l=new X(1,s,Be.homogenize1d(a,u));return Le.revolvedSurface(l,n,e,o)},Le.rationalInterpCurve=function(e,t,n,r,i){if(null==n&&(n=!1),null==t&&(t=3),e.length<t+1)throw new N("You need to supply at least degree + 1 points! You only supplied "+e.length+" points.");for(var o=[0],a=1,s=e.length;a<s;){var u=a++,l=Ne.norm(Ne.sub(e[u],e[u-1])),c=o[o.length-1];o.push(c+l)}for(var h=o[o.length-1],f=0,v=o.length;f<v;){var _=f++;o[_]=o[_]/h}var d,p=Ne.rep(t+1,0),m=null!=r&&null!=i;d=m?0:1;var g;g=m?o.length-t+1:o.length-t;for(var b=d;b<g;){for(var w=b++,y=0,S=0;S<t;){y+=o[w+S++]}p.push(1/t*y)}var k,P=p.concat(Ne.rep(t+1,1)),x=[];k=m?e.length+1:e.length-1;var C;C=m?e.length-(t-1):e.length-(t+1);for(var M=0;M<o.length;){var A=o[M];++M;var z=Be.knotSpanGivenN(k,t,A,P),I=Be.basisFunctionsGivenKnotSpanIndex(z,A,t,P),E=z-t,T=Ne.zeros1d(E),B=Ne.zeros1d(C-E);x.push(T.concat(I).concat(B))}if(m){var D=x[0].length-2,L=[-1,1].concat(Ne.zeros1d(D)),U=Ne.zeros1d(D).concat([-1,1]);F.spliceAndInsert(x,1,0,L),F.spliceAndInsert(x,x.length-1,0,U)}for(var O=e[0].length,R=[],V=(1-P[P.length-t-2])/t,j=P[t+1]/t,q=0;q<O;){var G,K=[q++];if(m){G=[e[0][K[0]]],G.push(j*r[K[0]]);for(var W=1,H=e.length-1;W<H;){var Q=W++;G.push(e[Q][K[0]])}G.push(V*i[K[0]]),G.push(F.last(e)[K[0]])}else G=e.map(function(e){return function(t){return t[e[0]]}}(K));var Y=be.solve(x,G);R.push(Y)}var Z=be.transpose(R);if(!n){var $=Ne.rep(Z.length,1);Z=Be.homogenize1d(Z,$)}return new X(t,P,Z)};var Ue=t.eval.Modify=function(){};a["verb.eval.Modify"]=Ue,Ue.__name__=["verb","eval","Modify"],Ue.curveReverse=function(e){return new X(e.degree,Ue.knotsReverse(e.knots),F.reversed(e.controlPoints))},Ue.surfaceReverse=function(e,t){return null==t&&(t=!1),t?new Q(e.degreeU,e.degreeV,e.knotsU,Ue.knotsReverse(e.knotsV),function(t){for(var n=[],r=0,i=e.controlPoints;r<i.length;){var o=i[r];++r,n.push(F.reversed(o))}return n}(this)):new Q(e.degreeU,e.degreeV,Ue.knotsReverse(e.knotsU),e.knotsV,F.reversed(e.controlPoints))},Ue.knotsReverse=function(e){for(var t=F.first(e),n=(F.last(e),[t]),r=e.length,i=1;i<r;){var o=i++;n.push(n[o-1]+(e[r-o]-e[r-o-1]))}return n},Ue.unifyCurveKnotVectors=function(e){e=e.map(Le.clonedCurve);for(var t=l.fold(e,function(e,t){return Ue.imax(e.degree,t)},0),n=0,r=e.length;n<r;){var i=n++;e[i].degree<t&&(e[i]=Ue.curveElevateDegree(e[i],t))}for(var o,a=[],s=0;s<e.length;){var u=e[s];++s,a.push(new ee(F.first(u.knots),F.last(u.knots)))}o=a;for(var c=0,h=e.length;c<h;){var f=c++,v=[o[f].min];e[f].knots=e[f].knots.map(function(e){return function(t){return t-e[0]}}(v))}for(var _=o.map(function(e){return e.max-e.min}),d=l.fold(_,function(e,t){return Math.max(e,t)},0),p=0,m=e.length;p<m;){var g=p++,b=[d/_[g]];e[g].knots=e[g].knots.map(function(e){return function(t){return t*e[0]}}(b))}for(var w=l.fold(e,function(e,t){return Ne.sortedSetUnion(e.knots,t)},[]),y=0,S=e.length;y<S;){var k=y++,P=Ne.sortedSetSub(w,e[k].knots);0==P.length&&(e[k]=e[k]),e[k]=Ue.curveKnotRefine(e[k],P)}return e},Ue.imin=function(e,t){return e<t?e:t},Ue.imax=function(e,t){return e>t?e:t},Ue.curveElevateDegree=function(e,t){if(t<=e.degree)return e;var n=e.knots.length-e.degree-2,r=e.degree,i=e.knots,o=e.controlPoints,a=t-e.degree,s=e.controlPoints[0].length,u=Ne.zeros2d(r+a+1,r+1),l=[],c=[],h=[],f=n+r+1,v=t,_=Math.floor(v/2),d=[],p=[];u[0][0]=1,u[v][r]=1;for(var m=1,g=_+1;m<g;)for(var b=m++,w=1/j.get(v,b),y=Ue.imin(r,b),S=Ue.imax(0,b-a),k=y+1;S<k;){var P=S++;u[b][P]=w*j.get(r,P)*j.get(a,b-P)}for(var x=_+1;x<v;)for(var C=x++,M=Ue.imin(r,C),N=Ue.imax(0,C-a),A=M+1;N<A;){var z=N++;u[C][z]=u[v-C][r-z]}var I=v,E=v+1,T=-1,B=r,D=r+1,L=1,U=i[0];d[0]=o[0];for(var O=0,R=v+1;O<R;){p[O++]=U}for(var V=0,F=r+1;V<F;){var q=V++;l[q]=o[q]}for(;D<f;){for(var G=D;D<f&&i[D]==i[D+1];)D+=1;var K=D-G+1,W=i[D],H=T;T=r-K;var Q;Q=H>0?Math.floor((H+2)/2):1;var Y;if(Y=T>0?Math.floor(v-(T+1)/2):v,T>0){for(var Z=W-U,$=[],J=r;J>K;)$[J-K-1]=Z/(i[B+J]-U),J--;for(var ee=1,te=T+1;ee<te;){for(var ne=ee++,re=T-ne,ie=K+ne,oe=r;oe>=ie;)l[oe]=Ne.add(Ne.mul($[oe-ie],l[oe]),Ne.mul(1-$[oe-ie],l[oe-1])),oe--;h[re]=l[r]}}for(var ae=Q,se=v+1;ae<se;){var ue=ae++;c[ue]=Ne.zeros1d(s);for(var le=Ue.imin(r,ue),ce=Ue.imax(0,ue-a),he=le+1;ce<he;){var fe=ce++;c[ue]=Ne.add(c[ue],Ne.mul(u[ue][fe],l[fe]))}}if(H>1)for(var ve=E-2,_e=E,de=W-U,pe=(W-p[E-1])/de,me=1;me<H;){for(var ge=me++,be=ve,we=_e,ye=we-E+1;we-be>ge;){if(be<L){var Se=(W-p[be])/(U-p[be]);d[be]=Ne.lerp(Se,d[be],d[be-1])}if(we>=Q){if(we-ge<=E-v+H){var ke=(W-p[we-ge])/de;c[ye]=Ne.lerp(ke,c[ye],c[ye+1])}}else c[ye]=Ne.lerp(pe,c[ye],c[ye+1]);be+=1,we-=1,ye-=1}ve-=1,_e+=1}if(B!=r)for(var Pe=0,xe=v-H;Pe<xe;){Pe++;p[E]=U,E+=1}for(var Ce=Q,Me=Y+1;Ce<Me;){var Ae=Ce++;d[L]=c[Ae],L+=1}if(D<f){for(var ze=0;ze<T;){var Ie=ze++;l[Ie]=h[Ie]}for(var Ee=T,Te=r+1;Ee<Te;){var Be=Ee++;l[Be]=o[D-r+Be]}B=D,D+=1,U=W}else for(var De=0,Le=v+1;De<Le;){var Oe=De++;p[E+Oe]=W}}return I-v-1,new X(t,p,d)},Ue.rationalSurfaceTransform=function(e,t){for(var n=Be.dehomogenize2d(e.controlPoints),r=0,i=n.length;r<i;)for(var o=r++,a=0,s=n[o].length;a<s;){var u=a++,l=n[o][u];l.push(1),n[o][u]=be.dot(t,l).slice(0,l.length-1)}return new Q(e.degreeU,e.degreeV,e.knotsU.slice(),e.knotsV.slice(),Be.homogenize2d(n,Be.weight2d(e.controlPoints)))},Ue.rationalCurveTransform=function(e,t){for(var n=Be.dehomogenize1d(e.controlPoints),r=0,i=n.length;r<i;){var o=r++,a=n[o];a.push(1),n[o]=be.dot(t,a).slice(0,a.length-1)}return new X(e.degree,e.knots.slice(),Be.homogenize1d(n,Be.weight1d(e.controlPoints)))},Ue.surfaceKnotRefine=function(e,t,n){var r,i,o,a=[];n?(o=e.controlPoints,r=e.knotsV,i=e.degreeV):(o=be.transpose(e.controlPoints),r=e.knotsU,i=e.degreeU);for(var s=null,u=0;u<o.length;){var l=o[u];++u,s=Ue.curveKnotRefine(new X(i,r,l),t),a.push(s.controlPoints)}var c=s.knots;return n?new Q(e.degreeU,e.degreeV,e.knotsU.slice(),c,a):(a=be.transpose(a),new Q(e.degreeU,e.degreeV,c,e.knotsV.slice(),a))},Ue.decomposeCurveIntoBeziers=function(e){for(var t=e.degree,n=e.controlPoints,r=e.knots,i=Ae.knotMultiplicities(r),o=t+1,a=0;a<i.length;){var s=i[a];if(++a,s.mult<o){var u=Ne.rep(o-s.mult,s.knot),l=Ue.curveKnotRefine(new X(t,r,n),u);r=l.knots,n=l.controlPoints}}for(var c=(r.length,2*o),h=[],f=0;f<n.length;){var v=r.slice(f,f+c),_=n.slice(f,f+o);h.push(new X(t,v,_)),f+=o}return h},Ue.curveKnotRefine=function(e,t){if(0==t.length)return Le.clonedCurve(e);for(var n=e.degree,r=e.controlPoints,i=e.knots,o=r.length-1,a=o+n+1,s=t.length-1,u=Be.knotSpan(n,t[0],i),l=Be.knotSpan(n,t[s],i),c=[],h=[],f=0,v=u-n+1;f<v;){var _=f++;c[_]=r[_]}for(var d=l-1,p=o+1;d<p;){var m=d++;c[m+s+1]=r[m]}for(var g=0,b=u+1;g<b;){var w=g++;h[w]=i[w]}for(var y=l+n,S=a+1;y<S;){var k=y++;h[k+s+1]=i[k]}for(var P=l+n-1,x=l+n+s,C=s;C>=0;){for(;t[C]<=i[P]&&P>u;)c[x-n-1]=r[P-n-1],h[x]=i[P],x-=1,P-=1;c[x-n-1]=c[x-n];for(var M=1,N=n+1;M<N;){var A=M++,z=x-n+A,I=h[x+A]-t[C];Math.abs(I)<G.EPSILON?c[z-1]=c[z]:(I/=h[x+A]-i[P-n+A],c[z-1]=Ne.add(Ne.mul(I,c[z-1]),Ne.mul(1-I,c[z])))}h[x]=t[C],x-=1,C--}return new X(n,h,c)},Ue.curveKnotInsert=function(e,t,n){for(var r=e.degree,i=e.controlPoints,o=e.knots,a=i.length,s=Be.knotSpan(r,t,o),u=[],l=[],c=[],h=1,f=s+1;h<f;){var v=h++;l[v]=o[v]}for(var _=1,d=n+1;_<d;){l[s+_++]=t}for(var p=s+1,m=o.length;p<m;){var g=p++;l[g+n]=o[g]}for(var b=0,w=s-r+1;b<w;){var y=b++;c[y]=i[y]}for(var S=s-0;S<a;){var k=S++;c[k+n]=i[k]}for(var P=0,x=r-0+1;P<x;){var C=P++;u[C]=i[s-r+C]}for(var M=0,N=0,A=1,z=n+1;A<z;){var I=A++;M=s-r+I;for(var E=0,T=r-I-0+1;E<T;){var B=E++;N=(t-o[M+B])/(o[B+s+1]-o[M+B]),u[B]=Ne.add(Ne.mul(N,u[B+1]),Ne.mul(1-N,u[B]))}c[M]=u[0],c[s+n-I-0]=u[r-I-0]}for(var D=M+1,L=s-0;D<L;){var U=D++;c[U]=u[U-M]}return new X(r,l,c)};var Oe=t.eval.Tess=function(){};a["verb.eval.Tess"]=Oe,Oe.__name__=["verb","eval","Tess"],Oe.rationalCurveRegularSample=function(e,t,n){return Oe.rationalCurveRegularSampleRange(e,e.knots[0],F.last(e.knots),t,n)},Oe.rationalCurveRegularSampleRange=function(e,t,n,r,i){r<1&&(r=2);for(var o=[],a=(n-t)/(r-1),s=0,u=0;u<r;){s=t+a*u++,i?o.push([s].concat(Be.rationalCurvePoint(e,s))):o.push(Be.rationalCurvePoint(e,s))}return o},Oe.rationalCurveAdaptiveSample=function(e,t,n){if(null==n&&(n=!1),null==t&&(t=1e-6),1==e.degree){if(n){for(var r=[],i=0,o=e.controlPoints.length;i<o;){var a=i++;r.push([e.knots[a+1]].concat(Be.dehomogenize(e.controlPoints[a])))}return r}return e.controlPoints.map(Be.dehomogenize)}return Oe.rationalCurveAdaptiveSampleRange(e,e.knots[0],F.last(e.knots),t,n)},Oe.rationalCurveAdaptiveSampleRange=function(e,t,n,r,i){var o=Be.rationalCurvePoint(e,t),a=Be.rationalCurvePoint(e,n),s=.5+.2*Math.random(),u=t+(n-t)*s,l=Be.rationalCurvePoint(e,u),c=Ne.sub(o,a),h=Ne.sub(o,l);if(Ne.dot(c,c)<r&&Ne.dot(h,h)>r||!Me.threePointsAreFlat(o,l,a,r)){var f=t+.5*(n-t),v=Oe.rationalCurveAdaptiveSampleRange(e,t,f,r,i),_=Oe.rationalCurveAdaptiveSampleRange(e,f,n,r,i);return v.slice(0,-1).concat(_)}return i?[[t].concat(o),[n].concat(a)]:[o,a]},Oe.rationalSurfaceNaive=function(e,t,n){t<1&&(t=1),n<1&&(n=1);for(var r=(e.degreeU,e.degreeV,e.controlPoints,e.knotsU),i=e.knotsV,o=F.last(r)-r[0],a=F.last(i)-i[0],s=o/t,u=a/n,l=[],c=[],h=[],f=0,v=t+1;f<v;)for(var _=f++,d=0,p=n+1;d<p;){var m=d++,g=_*s,b=m*u;c.push([g,b]);var w=Be.rationalSurfaceDerivatives(e,g,b,1),y=w[0][0];l.push(y);var S=Ne.normalized(Ne.cross(w[1][0],w[0][1]));h.push(S)}for(var k=[],P=0;P<t;)for(var x=P++,C=0;C<n;){var M=C++,N=x*(n+1)+M,A=(x+1)*(n+1)+M,z=A+1,I=N+1,E=[N,A,z],T=[N,z,I];k.push(E),k.push(T)}return new Y(k,l,h,c)},Oe.divideRationalSurfaceAdaptive=function(e,t){null==t&&(t=new Re),null!=t.minDivsU?t.minDivsU=t.minDivsU:t.minDivsU=1,null!=t.minDivsV?t.minDivsU=t.minDivsV:t.minDivsU=1,null!=t.refine?t.refine=t.refine:t.refine=!0;var n,r=2*(e.controlPoints.length-1),i=2*(e.controlPoints[0].length-1);n=t.minDivsU>r?t.minDivsU=t.minDivsU:t.minDivsU=r;var o;o=t.minDivsV>i?t.minDivsV=t.minDivsV:t.minDivsV=i;for(var a=F.last(e.knotsU),s=e.knotsU[0],u=F.last(e.knotsV),l=e.knotsV[0],c=(a-s)/n,h=(u-l)/o,f=[],v=[],_=0,d=o+1;_<d;){for(var p=_++,m=[],g=0,b=n+1;g<b;){var w=g++,y=s+c*w,S=l+h*p,k=Be.rationalSurfaceDerivatives(e,y,S,1),P=Ne.normalized(Ne.cross(k[0][1],k[1][0]));m.push(new ue(k[0][0],P,[y,S],-1,Ne.isZero(P)))}v.push(m)}for(var x=0;x<o;)for(var C=x++,M=0;M<n;){var N=M++,A=[v[o-C-1][N],v[o-C-1][N+1],v[o-C][N+1],v[o-C][N]];f.push(new Ve(e,A))}if(!t.refine)return f;for(var z=0;z<o;)for(var I=z++,E=0;E<n;){var T=E++,B=I*n+T,D=Oe.north(B,I,T,n,o,f),L=Oe.east(B,I,T,n,o,f),U=Oe.south(B,I,T,n,o,f),O=Oe.west(B,I,T,n,o,f);f[B].neighbors=[U,L,D,O],f[B].divide(t)}return f},Oe.north=function(e,t,n,r,i,o){return 0==t?null:o[e-r]},Oe.south=function(e,t,n,r,i,o){return t==i-1?null:o[e+r]},Oe.east=function(e,t,n,r,i,o){return n==r-1?null:o[e+1]},Oe.west=function(e,t,n,r,i,o){return 0==n?null:o[e-1]},Oe.triangulateAdaptiveRefinementNodeTree=function(e){for(var t=Y.empty(),n=0;n<e.length;){var r=e[n];++n,r.triangulate(t)}return t},Oe.rationalSurfaceAdaptive=function(e,t){t=null!=t?t:new Re;var n=Oe.divideRationalSurfaceAdaptive(e,t);return Oe.triangulateAdaptiveRefinementNodeTree(n)};var Re=t.core.AdaptiveRefinementOptions=function(){this.minDivsV=1,this.minDivsU=1,this.refine=!0,this.maxDepth=10,this.minDepth=0,this.normTol=.025};a["verb.eval.AdaptiveRefinementOptions"]=Re,Re.__name__=["verb","eval","AdaptiveRefinementOptions"],Re.prototype={__class__:Re};var Ve=t.core.AdaptiveRefinementNode=function(e,t,n){if(this.srf=e,this.neighbors=null==n?[null,null,null,null]:n,this.corners=t,null==this.corners){var r=e.knotsU[0],i=F.last(e.knotsU),o=e.knotsV[0],a=F.last(e.knotsV);this.corners=[ue.fromUv(r,o),ue.fromUv(i,o),ue.fromUv(i,a),ue.fromUv(r,a)]}};a["verb.eval.AdaptiveRefinementNode"]=Ve,Ve.__name__=["verb","eval","AdaptiveRefinementNode"],Ve.prototype={isLeaf:function(){return null==this.children},center:function(){return null!=this.centerPoint?this.centerPoint:this.evalSrf(this.u05,this.v05)},evalCorners:function(){this.u05=(this.corners[0].uv[0]+this.corners[2].uv[0])/2,this.v05=(this.corners[0].uv[1]+this.corners[2].uv[1])/2;for(var e=0;e<4;){var t=e++;if(null==this.corners[t].point){var n=this.corners[t];this.evalSrf(n.uv[0],n.uv[1],n)}}},evalSrf:function(e,t,n){var r=Be.rationalSurfaceDerivatives(this.srf,e,t,1),i=r[0][0],o=Ne.cross(r[0][1],r[1][0]),a=Ne.isZero(o);return a||(o=Ne.normalized(o)),null!=n?(n.degen=a,n.point=i,n.normal=o,n):new ue(i,o,[e,t],-1,a)},getEdgeCorners:function(e){if(this.isLeaf())return[this.corners[e]];if(this.horizontal)switch(e){case 0:return this.children[0].getEdgeCorners(0);case 1:return this.children[0].getEdgeCorners(1).concat(this.children[1].getEdgeCorners(1));case 2:return this.children[1].getEdgeCorners(2);case 3:return this.children[1].getEdgeCorners(3).concat(this.children[0].getEdgeCorners(3))}switch(e){case 0:return this.children[0].getEdgeCorners(0).concat(this.children[1].getEdgeCorners(0));case 1:return this.children[1].getEdgeCorners(1);case 2:return this.children[1].getEdgeCorners(2).concat(this.children[0].getEdgeCorners(2));case 3:return this.children[0].getEdgeCorners(3)}return null},getAllCorners:function(e){var t=[this.corners[e]];if(null==this.neighbors[e])return t;var n=this.neighbors[e].getEdgeCorners((e+2)%4),r=e%2,i=G.EPSILON,o=this,a=[function(e){return e.uv[0]>o.corners[0].uv[0]+i&&e.uv[0]<o.corners[2].uv[0]-i},function(e){return e.uv[1]>o.corners[0].uv[1]+i&&e.uv[1]<o.corners[2].uv[1]-i}],s=n.filter(a[r]);return s.reverse(),t.concat(s)},midpoint:function(e){if(null==this.midPoints&&(this.midPoints=[null,null,null,null]),null!=this.midPoints[e])return this.midPoints[e];switch(e){case 0:this.midPoints[0]=this.evalSrf(this.u05,this.corners[0].uv[1]);break;case 1:this.midPoints[1]=this.evalSrf(this.corners[1].uv[0],this.v05);break;case 2:this.midPoints[2]=this.evalSrf(this.u05,this.corners[2].uv[1]);break;case 3:this.midPoints[3]=this.evalSrf(this.corners[0].uv[0],this.v05)}return this.midPoints[e]},hasBadNormals:function(){return this.corners[0].degen||this.corners[1].degen||this.corners[2].degen||this.corners[3].degen},fixNormals:function(){for(var e=this.corners.length,t=0;t<e;){var n=t++;this.corners[n];if(this.corners[n].degen){var r=this.corners[(n+1)%e],i=this.corners[(n+3)%e];r.degen?this.corners[n].normal=i.normal:this.corners[n].normal=r.normal}}},shouldDivide:function(e,t){if(t<e.minDepth)return!0;if(t>=e.maxDepth)return!1;if(this.hasBadNormals())return this.fixNormals(),!1;if(this.splitVert=Ne.normSquared(Ne.sub(this.corners[0].normal,this.corners[1].normal))>e.normTol||Ne.normSquared(Ne.sub(this.corners[2].normal,this.corners[3].normal))>e.normTol,this.splitHoriz=Ne.normSquared(Ne.sub(this.corners[1].normal,this.corners[2].normal))>e.normTol||Ne.normSquared(Ne.sub(this.corners[3].normal,this.corners[0].normal))>e.normTol,this.splitVert||this.splitHoriz)return!0;var n=this.center();return Ne.normSquared(Ne.sub(n.normal,this.corners[0].normal))>e.normTol||Ne.normSquared(Ne.sub(n.normal,this.corners[1].normal))>e.normTol||Ne.normSquared(Ne.sub(n.normal,this.corners[2].normal))>e.normTol||Ne.normSquared(Ne.sub(n.normal,this.corners[3].normal))>e.normTol},divide:function(e){null==e&&(e=new Re),null==e.normTol&&(e.normTol=.085),null==e.minDepth&&(e.minDepth=0),null==e.maxDepth&&(e.maxDepth=10),this._divide(e,0,!0)},_divide:function(e,t,n){if(this.evalCorners(),this.shouldDivide(e,t)){if(t++,this.splitVert&&!this.splitHoriz?n=!1:!this.splitVert&&this.splitHoriz&&(n=!0),this.horizontal=n,this.horizontal){var r=[this.corners[0],this.corners[1],this.midpoint(1),this.midpoint(3)],i=[this.midpoint(3),this.midpoint(1),this.corners[2],this.corners[3]];this.children=[new Ve(this.srf,r),new Ve(this.srf,i)],this.children[0].neighbors=[this.neighbors[0],this.neighbors[1],this.children[1],this.neighbors[3]],this.children[1].neighbors=[this.children[0],this.neighbors[1],this.neighbors[2],this.neighbors[3]]}else{var o=[this.corners[0],this.midpoint(0),this.midpoint(2),this.corners[3]],a=[this.midpoint(0),this.corners[1],this.corners[2],this.midpoint(2)];this.children=[new Ve(this.srf,o),new Ve(this.srf,a)],this.children[0].neighbors=[this.neighbors[0],this.children[1],this.neighbors[2],this.neighbors[3]],this.children[1].neighbors=[this.neighbors[0],this.neighbors[1],this.neighbors[2],this.children[0]]}for(var s=0,u=this.children;s<u.length;){var l=u[s];++s,l._divide(e,t,!n)}}},triangulate:function(e){if(null==e&&(e=Y.empty()),this.isLeaf())return this.triangulateLeaf(e);for(var t=0,n=this.children;t<n.length;){var r=n[t];if(++t,null==r)break;r.triangulate(e)}return e},triangulateLeaf:function(e){for(var t=e.points.length,n=[],r=[],i=0,o=0;o<4;){var a=o++,s=this.getAllCorners(a);2==s.length&&(i=a+1);for(var u=0,l=s.length;u<l;){var c=u++;n.push(s[c])}}for(var h=0;h<n.length;){var f=n[h];++h,f.id==-1?(e.uvs.push(f.uv),e.points.push(f.point),e.normals.push(f.normal),f.id=t,r.push(t),t++):r.push(f.id)}if(4==n.length)return e.faces.push([r[0],r[3],r[1]]),e.faces.push([r[3],r[2],r[1]]),e;if(5==n.length){var v=r.length;return e.faces.push([r[i],r[(i+2)%v],r[(i+1)%v]]),e.faces.push([r[(i+4)%v],r[(i+3)%v],r[i]]),e.faces.push([r[i],r[(i+3)%v],r[(i+2)%v]]),e}var _=this.center();e.uvs.push(_.uv),e.points.push(_.point),e.normals.push(_.normal);for(var d=e.points.length-1,p=0,m=n.length-1;p<n.length;)e.faces.push([d,r[p],r[m]]),m=p++;return e},__class__:Ve};var Fe=t.exe.Dispatcher=function(){};a["verb.exe.Dispatcher"]=Fe,Fe.__name__=["verb","exe","Dispatcher"],Fe.init=function(){Fe._init||(Fe._workerPool=new je(Fe.THREADS),Fe._init=!0)},Fe.dispatchMethod=function(e,t,n){Fe.init();var r=new B,i=function(e){r.resolve(e)};return Fe._workerPool.addWork(p.getClassName(e),t,n,i),new D(r)};var je=t.exe.WorkerPool=function(e,t){null==t&&(t="verb.js"),null==e&&(e=1),this._callbacks=new y,this._working=new y,this._pool=[],this._queue=[];for(var n=0;n<e;){var r;n++;try{r=new Worker(je.basePath+t)}catch(e){e instanceof N&&(e=e.val),r=new Worker(je.basePath+t.substring(0,-3)+".min.js")}this._pool.push(r)}};a["verb.exe.WorkerPool"]=je,je.__name__=["verb","exe","WorkerPool"],je.prototype={addWork:function(e,t,n,r){var i=new qe(e,t,n);this._callbacks.set(i.id,r),this._queue.push(i),this.processQueue()},processQueue:function(){for(var t=this;this._queue.length>0&&this._pool.length>0;){var n=this._queue.shift(),r=[n.id],i=[this._pool.shift()];this._working.h[r[0]]=i[0],i[0].onmessage=function(n,r){return function(i){t._working.remove(r[0]),t._pool.push(n[0]);try{t._callbacks.h.hasOwnProperty(r[0])&&(t._callbacks.h[r[0]](i.data.result),t._callbacks.remove(r[0]))}catch(t){t instanceof N&&(t=t.val),e.log(t)}t.processQueue()}}(i,r),i[0].postMessage(n)}},__class__:je};var qe=function(e,t,n){this.className=e,this.methodName=t,this.args=n,this.id=qe.uuid++};a["verb.exe._WorkerPool.Work"]=qe,qe.__name__=["verb","exe","_WorkerPool","Work"],qe.prototype={__class__:qe};var Ge=function(){};a["verb.geom.ICurve"]=Ge,Ge.__name__=["verb","geom","ICurve"],Ge.__interfaces__=[xe],Ge.prototype={__class__:Ge};var Ke=t.geom.NurbsCurve=function(e){this._data=Ie.isValidNurbsCurveData(e)};a["verb.geom.NurbsCurve"]=Ke,Ke.__name__=["verb","geom","NurbsCurve"],Ke.__interfaces__=[Ge],Ke.byKnotsControlPointsWeights=function(e,t,n,r){return new Ke(new X(e,t.slice(),Be.homogenize1d(n,r)))},Ke.byPoints=function(e,t){return null==t&&(t=3),new Ke(Le.rationalInterpCurve(e,t))},Ke.__super__=K,Ke.prototype=r(K.prototype,{degree:function(){return this._data.degree},knots:function(){return this._data.knots.slice(0)},controlPoints:function(){return Be.dehomogenize1d(this._data.controlPoints)},weights:function(){return Be.weight1d(this._data.controlPoints)},asNurbs:function(){return new X(this.degree(),this.knots(),Be.homogenize1d(this.controlPoints(),this.weights()))},clone:function(){return new Ke(this._data)},domain:function(){return new ee(F.first(this._data.knots),F.last(this._data.knots))},transform:function(e){return new Ke(Ue.rationalCurveTransform(this._data,e))},transformAsync:function(e){return Fe.dispatchMethod(Ue,"rationalCurveTransform",[this._data,e]).then(function(e){return new Ke(e)})},point:function(e){return Be.rationalCurvePoint(this._data,e)},pointAsync:function(e){return Fe.dispatchMethod(Be,"rationalCurvePoint",[this._data,e])},tangent:function(e){return Be.rationalCurveTangent(this._data,e)},tangentAsync:function(e){return Fe.dispatchMethod(Be,"rationalCurveTangent",[this._data,e])},derivatives:function(e,t){return null==t&&(t=1),Be.rationalCurveDerivatives(this._data,e,t)},derivativesAsync:function(e,t){return null==t&&(t=1),Fe.dispatchMethod(Be,"rationalCurveDerivatives",[this._data,e,t])},closestPoint:function(e){return Ae.rationalCurveClosestPoint(this._data,e)},closestPointAsync:function(e){return Fe.dispatchMethod(Ae,"rationalCurveClosestPoint",[this._data,e])},closestParam:function(e){return Ae.rationalCurveClosestParam(this._data,e)},closestParamAsync:function(e){return Fe.dispatchMethod(Ae,"rationalCurveClosestParam",[this._data,e])},length:function(){return Ae.rationalCurveArcLength(this._data)},lengthAsync:function(){return Fe.dispatchMethod(Ae,"rationalCurveArcLength",[this._data])},lengthAtParam:function(e){return Ae.rationalCurveArcLength(this._data,e)},lengthAtParamAsync:function(){return Fe.dispatchMethod(Ae,"rationalCurveArcLength",[this._data])},paramAtLength:function(e,t){return Ae.rationalCurveParamAtArcLength(this._data,e,t)},paramAtLengthAsync:function(e,t){return Fe.dispatchMethod(Ae,"rationalCurveParamAtArcLength",[this._data,e,t])},divideByEqualArcLength:function(e){return Ee.rationalCurveByEqualArcLength(this._data,e)},divideByEqualArcLengthAsync:function(e){return Fe.dispatchMethod(Ee,"rationalCurveByEqualArcLength",[this._data,e])},divideByArcLength:function(e){return Ee.rationalCurveByArcLength(this._data,e)},divideByArcLengthAsync:function(e){return Fe.dispatchMethod(Ee,"rationalCurveByArcLength",[this._data,e])},split:function(e){return Ee.curveSplit(this._data,e).map(function(e){return new Ke(e)})},splitAsync:function(e){return Fe.dispatchMethod(Ee,"curveSplit",[this._data,e]).then(function(e){return e.map(function(e){return new Ke(e)})})},reverse:function(){return new Ke(Ue.curveReverse(this._data))},reverseAsync:function(){return Fe.dispatchMethod(Ue,"curveReverse",[this._data]).then(function(e){return new Ke(e)})},tessellate:function(e){return Oe.rationalCurveAdaptiveSample(this._data,e,!1)},tessellateAsync:function(e){return Fe.dispatchMethod(Oe,"rationalCurveAdaptiveSample",[this._data,e,!1])},__class__:Ke});var We=t.geom.Arc=function(e,t,n,r,i,o){Ke.call(this,Le.arc(e,t,n,r,i,o)),this._center=e,this._xaxis=t,this._yaxis=n,this._radius=r,this._minAngle=i,this._maxAngle=o};a["verb.geom.Arc"]=We,We.__name__=["verb","geom","Arc"],We.__super__=Ke,We.prototype=r(Ke.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},radius:function(){return this._radius},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:We});var He=t.geom.BezierCurve=function(e,t){Ke.call(this,Le.rationalBezierCurve(e,t))};a["verb.geom.BezierCurve"]=He,He.__name__=["verb","geom","BezierCurve"],He.__super__=Ke,He.prototype=r(Ke.prototype,{__class__:He});var Xe=t.geom.Circle=function(e,t,n,r){We.call(this,e,t,n,r,0,2*Math.PI)};a["verb.geom.Circle"]=Xe,Xe.__name__=["verb","geom","Circle"],Xe.__super__=We,Xe.prototype=r(We.prototype,{__class__:Xe});var Qe=function(){};a["verb.geom.ISurface"]=Qe,Qe.__name__=["verb","geom","ISurface"],Qe.__interfaces__=[xe],Qe.prototype={__class__:Qe};var Ye=t.geom.NurbsSurface=function(e){this._data=Ie.isValidNurbsSurfaceData(e)};a["verb.geom.NurbsSurface"]=Ye,Ye.__name__=["verb","geom","NurbsSurface"],Ye.__interfaces__=[Qe],Ye.byKnotsControlPointsWeights=function(e,t,n,r,i,o){return new Ye(new Q(e,t,n,r,Be.homogenize2d(i,o)))},Ye.byCorners=function(e,t,n,r){return new Ye(Le.fourPointSurface(e,t,n,r))},Ye.byLoftingCurves=function(e,t){return new Ye(Le.loftedSurface(function(t){for(var n=[],r=0;r<e.length;){var i=e[r];++r,n.push(i.asNurbs())}return n}(this),t))},Ye.__super__=K,Ye.prototype=r(K.prototype,{degreeU:function(){return this._data.degreeU},degreeV:function(){return this._data.degreeV},knotsU:function(){return this._data.knotsU.slice(0)},knotsV:function(){return this._data.knotsV.slice(0)},controlPoints:function(){return Be.dehomogenize2d(this._data.controlPoints)},weights:function(){return Be.weight2d(this._data.controlPoints)},asNurbs:function(){return new Q(this.degreeU(),this.degreeV(),this.knotsU(),this.knotsV(),Be.homogenize2d(this.controlPoints(),this.weights()))},clone:function(){return new Ye(this.asNurbs())},domainU:function(){return new ee(F.first(this._data.knotsU),F.last(this._data.knotsU))},domainV:function(){return new ee(F.first(this._data.knotsV),F.last(this._data.knotsV))},point:function(e,t){return Be.rationalSurfacePoint(this._data,e,t)},pointAsync:function(e,t){return Fe.dispatchMethod(Be,"rationalSurfacePoint",[this._data,e,t])},normal:function(e,t){return Be.rationalSurfaceNormal(this._data,e,t)},normalAsync:function(e,t){return Fe.dispatchMethod(Be,"rationalSurfaceNormal",[this._data,e,t])},derivatives:function(e,t,n){return null==n&&(n=1),Be.rationalSurfaceDerivatives(this._data,e,t,n)},derivativesAsync:function(e,t,n){return null==n&&(n=1),Fe.dispatchMethod(Be,"rationalSurfaceDerivatives",[this._data,e,t,n])},closestParam:function(e){return Ae.rationalSurfaceClosestParam(this._data,e)},closestParamAsync:function(e){return Fe.dispatchMethod(Ae,"rationalSurfaceClosestParam",[this._data,e])},closestPoint:function(e){return Ae.rationalSurfaceClosestPoint(this._data,e)},closestPointAsync:function(e){return Fe.dispatchMethod(Ae,"rationalSurfaceClosestPoint",[this._data,e])},split:function(e,t){return null==t&&(t=!1),Ee.surfaceSplit(this._data,e,t).map(function(e){return new Ye(e)})},splitAsync:function(e,t){return null==t&&(t=!1),Fe.dispatchMethod(Ee,"surfaceSplit",[this._data,e,t]).then(function(e){return e.map(function(e){return new Ye(e)})})},reverse:function(e){return null==e&&(e=!1),new Ye(Ue.surfaceReverse(this._data,e))},reverseAsync:function(e){return null==e&&(e=!1),Fe.dispatchMethod(Ue,"surfaceReverse",[this._data,e]).then(function(e){return new Ye(e)})},isocurve:function(e,t){return null==t&&(t=!1),new Ke(Le.surfaceIsocurve(this._data,e,t))},isocurveAsync:function(e,t){return null==t&&(t=!1),Fe.dispatchMethod(Le,"surfaceIsocurve",[this._data,e,t]).then(function(e){return new Ke(e)})},boundaries:function(e){return Le.surfaceBoundaryCurves(this._data).map(function(e){return new Ke(e)})},boundariesAsync:function(e){return Fe.dispatchMethod(Le,"surfaceBoundaryCurves",[this._data]).then(function(e){return e.map(function(e){return new Ke(e)})})},tessellate:function(e){return Oe.rationalSurfaceAdaptive(this._data,e)},tessellateAsync:function(e){return Fe.dispatchMethod(Oe,"rationalSurfaceAdaptive",[this._data,e])},transform:function(e){return new Ye(Ue.rationalSurfaceTransform(this._data,e))},transformAsync:function(e){return Fe.dispatchMethod(Ue,"rationalSurfaceTransform",[this._data,e]).then(function(e){return new Ye(e)})},__class__:Ye});var Ze=t.geom.ConicalSurface=function(e,t,n,r,i){Ye.call(this,Le.conicalSurface(e,t,n,r,i)),this._axis=e,this._xaxis=t,this._base=n,this._height=r,this._radius=i};a["verb.geom.ConicalSurface"]=Ze,Ze.__name__=["verb","geom","ConicalSurface"],Ze.__super__=Ye,Ze.prototype=r(Ye.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:Ze});var $e=t.geom.CylindricalSurface=function(e,t,n,r,i){Ye.call(this,Le.cylindricalSurface(e,t,n,r,i)),this._axis=e,this._xaxis=t,this._base=n,this._height=r,this._radius=i};a["verb.geom.CylindricalSurface"]=$e,$e.__name__=["verb","geom","CylindricalSurface"],$e.__super__=Ye,$e.prototype=r(Ye.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:$e});var Je=t.geom.EllipseArc=function(e,t,n,r,i){Ke.call(this,Le.ellipseArc(e,t,n,r,i)),this._center=e,this._xaxis=t,this._yaxis=n,this._minAngle=r,this._maxAngle=i};a["verb.geom.EllipseArc"]=Je,Je.__name__=["verb","geom","EllipseArc"],Je.__super__=Ke,Je.prototype=r(Ke.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:Je});var et=t.geom.Ellipse=function(e,t,n){Je.call(this,e,t,n,0,2*Math.PI)};a["verb.geom.Ellipse"]=et,et.__name__=["verb","geom","Ellipse"],et.__super__=Je,et.prototype=r(Je.prototype,{__class__:et});var tt=t.geom.ExtrudedSurface=function(e,t){Ye.call(this,Le.extrudedSurface(Ne.normalized(t),Ne.norm(t),e.asNurbs())),this._profile=e,this._direction=t};a["verb.geom.ExtrudedSurface"]=tt,tt.__name__=["verb","geom","ExtrudedSurface"],tt.__super__=Ye,tt.prototype=r(Ye.prototype,{profile:function(){return this._profile},direction:function(){return this._direction},__class__:tt});var nt=t.geom.Intersect=function(){};a["verb.geom.Intersect"]=nt,nt.__name__=["verb","geom","Intersect"],nt.curves=function(e,t,n){return null==n&&(n=.001),De.curves(e.asNurbs(),t.asNurbs(),n)},nt.curvesAsync=function(e,t,n){return null==n&&(n=.001),Fe.dispatchMethod(De,"curves",[e.asNurbs(),t.asNurbs(),n])},nt.curveAndSurface=function(e,t,n){return null==n&&(n=.001),De.curveAndSurface(e.asNurbs(),t.asNurbs(),n)},nt.curveAndSurfaceAsync=function(e,t,n){return null==n&&(n=.001),Fe.dispatchMethod(De,"curveAndSurface",[e.asNurbs(),t.asNurbs(),n])},nt.surfaces=function(e,t,n){return null==n&&(n=.001),De.surfaces(e.asNurbs(),t.asNurbs(),n).map(function(e){return new Ke(e)})},nt.surfacesAsync=function(e,t,n){return null==n&&(n=.001),Fe.dispatchMethod(De,"surfaces",[e.asNurbs(),t.asNurbs(),n]).then(function(e){return e.map(function(e){return new Ke(e)})})};var rt=t.geom.Line=function(e,t){Ke.call(this,Le.polyline([e,t])),this._start=e,this._end=t};a["verb.geom.Line"]=rt,rt.__name__=["verb","geom","Line"],rt.__super__=Ke,rt.prototype=r(Ke.prototype,{start:function(){return this._start},end:function(){return this._end},__class__:rt});var it=t.geom.RevolvedSurface=function(e,t,n,r){Ye.call(this,Le.revolvedSurface(e.asNurbs(),t,n,r)),this._profile=e,this._center=t,this._axis=n,this._angle=r};a["verb.geom.RevolvedSurface"]=it,it.__name__=["verb","geom","RevolvedSurface"],it.__super__=Ye,it.prototype=r(Ye.prototype,{profile:function(){return this._profile},center:function(){return this._center},axis:function(){return this._center},angle:function(){return this._angle},__class__:it});var ot=t.geom.SphericalSurface=function(e,t){Ye.call(this,Le.sphericalSurface(e,[0,0,1],[1,0,0],t)),this._center=e,this._radius=t};a["verb.geom.SphericalSurface"]=ot,ot.__name__=["verb","geom","SphericalSurface"],ot.__super__=Ye,ot.prototype=r(Ye.prototype,{center:function(){return this._center},radius:function(){return this._radius},__class__:ot});var at=t.geom.SweptSurface=function(e,t){Ye.call(this,Le.rationalTranslationalSurface(e.asNurbs(),t.asNurbs())),this._profile=e,this._rail=t};a["verb.geom.SweptSurface"]=at,at.__name__=["verb","geom","SweptSurface"],at.__super__=Ye,at.prototype=r(Ye.prototype,{profile:function(){return this._profile},rail:function(){return this._rail},__class__:at});var st,ut=0;a.Math=Math,String.prototype.__class__=a.String=String,String.__name__=["String"],a.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=a.Date=Date,Date.__name__=["Date"];var lt=a.Int={__name__:["Int"]},ct=a.Dynamic={__name__:["Dynamic"]},ht=a.Float=Number;ht.__name__=["Float"];var ft=a.Bool=Boolean;ft.__ename__=["Bool"];var vt=a.Class={__name__:["Class"]},_t={};null==Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],n=0,r=this.length;n<r;){var i=n++;t[i]=e(this[i])}return t}),
null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],n=0,r=this.length;n<r;){var i=n++,o=this[i];e(o)&&t.push(o)}return t});var dt={},pt=n.ArrayBuffer||z;null==pt.prototype.slice&&(pt.prototype.slice=z.sliceImpl);var mt=(n.DataView,n.Uint8Array||E._new);!function(e,t){function n(e){return u[s]=r.apply(t,e),s++}function r(e){var n=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(t,n):new Function(""+e)()}}function i(e){if(l)setTimeout(r(i,e),0);else{var t=u[e];if(t){l=!0;try{t()}finally{o(e),l=!1}}}}function o(e){delete u[e]}if(!e.setImmediate){var a,s=1,u={},l=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(){var e=n(arguments);return process.nextTick(r(i,e)),e}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),a=function(){var r=n(arguments);return e.postMessage(t+r,"*"),r}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},a=function(){var t=n(arguments);return e.port2.postMessage(t),t}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;a=function(){var t=n(arguments),r=c.createElement("script");return r.onreadystatechange=function(){i(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r),t}}():function(){a=function(){var e=n(arguments);return setTimeout(r(i,e),0),e}}(),h.setImmediate=a,h.clearImmediate=o}}(new Function("return this")()),b.USE_CACHE=!1,b.USE_ENUM_INDEX=!1,b.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",w.DEFAULT_RESOLVER=p,w.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",S.count=0,M.i64tmp=function(e){return new g(0,0)}(this),A.__toStr={}.toString,E.BYTES_PER_ELEMENT=1,O.queue=new c,j.memo=new y,G.TOLERANCE=1e-6,G.EPSILON=1e-10,G.VERSION="2.0.0",Ae.Tvalues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Ae.Cvalues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Fe.THREADS=1,Fe._init=!1,je.basePath="",qe.uuid=0,V.main()}("undefined"!=typeof console?console:{log:function(){}},e,void 0!==o?o:void 0!==n?n:"undefined"!=typeof self?self:this),e}),e("verb",["verb/build/js/verb"],function(e){return e}),e("x_ite/Components/NURBS/X3DNurbsSurfaceGeometryNode",["x_ite/Components/NURBS/X3DParametricGeometryNode","x_ite/Bits/X3DConstants","verb"],function(e,t,n){"use strict";function r(n){e.call(this,n),this.addType(t.X3DNurbsSurfaceGeometryNode)}return console.log(n),r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,initialize:function(){e.prototype.initialize.call(this)},build:function(){}}),r}),e("x_ite/Components/NURBS/NurbsPatchSurface",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/NURBS/X3DNurbsSurfaceGeometryNode","x_ite/Bits/X3DConstants"],function(e,t,n,r,i){"use strict";function o(e){r.call(this,e),this.addType(i.NurbsPatchSurface)}return o.prototype=Object.assign(Object.create(r.prototype),{constructor:o,fieldDefinitions:new n([new t(i.inputOutput,"metadata",new e.SFNode),new t(i.initializeOnly,"solid",new e.SFBool(!0)),new t(i.inputOutput,"uTessellation",new e.SFInt32),new t(i.inputOutput,"vTessellation",new e.SFInt32),new t(i.initializeOnly,"uClosed",new e.SFBool),new t(i.initializeOnly,"vClosed",new e.SFBool),new t(i.initializeOnly,"uOrder",new e.SFInt32(3)),new t(i.initializeOnly,"vOrder",new e.SFInt32(3)),new t(i.initializeOnly,"uDimension",new e.SFInt32),new t(i.initializeOnly,"vDimension",new e.SFInt32),new t(i.initializeOnly,"uKnot",new e.MFDouble),new t(i.initializeOnly,"vKnot",new e.MFDouble),new t(i.inputOutput,"weight",new e.MFDouble),new t(i.inputOutput,"texCoord",new e.SFNode),new t(i.inputOutput,"controlPoint",new e.SFNode)]),getTypeName:function(){return"NurbsPatchSurface"},getComponentName:function(){return"NURBS"},getContainerField:function(){return"geometry"}}),o}),t(["x_ite/Configuration/SupportedNodes","x_ite/Components/NURBS/CoordinateDouble","x_ite/Components/NURBS/NurbsPatchSurface"],function(e,t,n){"use strict";function r(e){return new this(e)}var i={CoordinateDouble:t,NurbsPatchSurface:n};for(var o in i){var a=i[o];a.createInstance=r.bind(a),e[o]=a,e[o.toUpperCase()]=a}return i}),e("components/nurbs",function(){})}();
