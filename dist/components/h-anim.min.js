(function(){var t=X3D.define,e=X3D.require;t("x_ite/Components/H-Anim/HAnimDisplacer",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Rendering/X3DGeometricPropertyNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t);this.addType(o.HAnimDisplacer)}s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"coordIndex",new t.MFInt32),new e(o.inputOutput,"weight",new t.SFFloat),new e(o.inputOutput,"displacements",new t.MFVec3f)]),getTypeName:function(){return"HAnimDisplacer"},getComponentName:function(){return"H-Anim"},getContainerField:function(){return"displacers"}});return s});t("x_ite/Components/H-Anim/HAnimHumanoid",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Core/X3DChildNode","x_ite/Components/Grouping/Group","x_ite/Components/Grouping/Transform","x_ite/Components/Grouping/X3DBoundedObject","x_ite/Bits/TraverseType","x_ite/Bits/X3DConstants","x_ite/Bits/X3DCast","standard/Math/Numbers/Matrix4","standard/Math/Numbers/Vector3"],function(t,e,n,i,o,s,r,a,u,d,p,l){"use strict";function c(t){i.call(this,t);r.call(this,t);this.addType(u.HAnimHumanoid);this.viewpointsNode=new o(t);this.skeletonNode=new o(t);this.skinNode=new o(t);this.transformNode=new s(t);this.jointNodes=[];this.skinNormalNode=null;this.skinCoordNode=null;this.normalNode=null;this.coordNode=null;this.getBBox=this.transformNode.getBBox.bind(this.transformNode)}c.prototype=Object.assign(Object.create(i.prototype),r.prototype,{constructor:c,fieldDefinitions:new n([new e(u.inputOutput,"metadata",new t.SFNode),new e(u.inputOutput,"name",new t.SFString),new e(u.inputOutput,"version",new t.SFString),new e(u.inputOutput,"info",new t.MFString),new e(u.inputOutput,"translation",new t.SFVec3f),new e(u.inputOutput,"rotation",new t.SFRotation),new e(u.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(u.inputOutput,"scaleOrientation",new t.SFRotation),new e(u.inputOutput,"center",new t.SFVec3f),new e(u.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(u.initializeOnly,"bboxCenter",new t.SFVec3f),new e(u.inputOutput,"viewpoints",new t.MFNode),new e(u.inputOutput,"sites",new t.MFNode),new e(u.inputOutput,"joints",new t.MFNode),new e(u.inputOutput,"segments",new t.MFNode),new e(u.inputOutput,"skeleton",new t.MFNode),new e(u.inputOutput,"skinNormal",new t.SFNode),new e(u.inputOutput,"skinCoord",new t.SFNode),new e(u.inputOutput,"skin",new t.MFNode)]),getTypeName:function(){return"HAnimHumanoid"},getComponentName:function(){return"H-Anim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this);r.prototype.initialize.call(this);this.viewpointsNode.setAllowedTypes(u.HAnimSite);this.skeletonNode.setAllowedTypes(u.HAnimJoint,u.HAnimSite);this.viewpoints_.addFieldInterest(this.viewpointsNode.children_);this.skeleton_.addFieldInterest(this.skeletonNode.children_);this.skin_.addFieldInterest(this.skinNode.children_);this.viewpointsNode.children_=this.viewpoints_;this.skeletonNode.children_=this.skeleton_;this.skinNode.children_=this.skin_;this.viewpointsNode.setPrivate(true);this.skeletonNode.setPrivate(true);this.skinNode.setPrivate(true);this.translation_.addFieldInterest(this.transformNode.translation_);this.rotation_.addFieldInterest(this.transformNode.rotation_);this.scale_.addFieldInterest(this.transformNode.scale_);this.scaleOrientation_.addFieldInterest(this.transformNode.scaleOrientation_);this.center_.addFieldInterest(this.transformNode.center_);this.bboxSize_.addFieldInterest(this.transformNode.bboxSize_);this.bboxCenter_.addFieldInterest(this.transformNode.bboxCenter_);this.transformNode.translation_=this.translation_;this.transformNode.rotation_=this.rotation_;this.transformNode.scale_=this.scale_;this.transformNode.scaleOrientation_=this.scaleOrientation_;this.transformNode.center_=this.center_;this.transformNode.bboxSize_=this.bboxSize_;this.transformNode.bboxCenter_=this.bboxCenter_;this.transformNode.children_=[this.viewpointsNode,this.skeletonNode,this.skinNode];this.transformNode.isCameraObject_.addFieldInterest(this.isCameraObject_);this.viewpointsNode.setup();this.skeletonNode.setup();this.skinNode.setup();this.transformNode.setup();this.joints_.addInterest("set_joints__",this);this.skinNormal_.addInterest("set_skinNormal__",this);this.skinCoord_.addInterest("set_skinCoord__",this);this.set_joints__();this.set_skinNormal__();this.set_skinCoord__()},set_joints__:function(){var t=this.jointNodes;t.length=0;for(var e=0,n=this.joints_.length;e<n;++e){var i=d(u.HAnimJoint,this.joints_[e]);if(i)t.push(i)}},set_skinNormal__:function(){this.normalNode=null;this.skinNormalNode=d(u.X3DNormalNode,this.skinNormal_);if(this.skinNormalNode)this.normalNode=this.skinNormalNode.flatCopy()},set_skinCoord__:function(){this.coordNode=null;this.skinCoordNode=d(u.X3DCoordinateNode,this.skinCoord_);if(this.skinCoordNode)this.coordNode=this.skinCoordNode.flatCopy()},traverse:function(t,e){this.transformNode.traverse(t,e);this.skinning(t,e)},skinning:function(){var t=new p,e=new l(0,0,0),n=new l(0,0,0);return function(i,o){try{if(i!==a.CAMERA)return;if(!this.skinCoordNode)return;var s=this.jointNodes,r=this.skinNormalNode,u=this.skinCoordNode,d=this.normalNode,p=this.coordNode;t.assign(this.transformNode.getMatrix()).multRight(o.getModelViewMatrix().get()).inverse();for(var l=0,c=s.length;l<c;++l){var m=s[l],w=m.skinCoordIndex_.length;if(w===0)continue;var h=m.getModelMatrix().multRight(t),f=h.submatrix.transpose().inverse(),N=m.skinCoordIndex_.getValue();for(var _=0;_<w;++_){var F=N[_];if(r)r.set1Vector(F,f.multVecMatrix(d.get1Vector(F,e)));u.set1Point(F,h.multVecMatrix(p.get1Point(F,n)))}}}catch(t){console.log(t)}}}()});return c});t("x_ite/Components/H-Anim/HAnimJoint",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DGroupingNode","x_ite/Components/Grouping/X3DTransformNode","x_ite/Bits/TraverseType","x_ite/Bits/X3DConstants","standard/Math/Numbers/Matrix4"],function(t,e,n,i,o,s,r,a){"use strict";function u(t){o.call(this,t);this.addType(r.HAnimJoint);this.setAllowedTypes(r.HAnimJoint,r.HAnimSegment,r.HAnimSite);this.modelMatrix=new a}u.prototype=Object.assign(Object.create(o.prototype),{constructor:u,fieldDefinitions:new n([new e(r.inputOutput,"metadata",new t.SFNode),new e(r.inputOutput,"name",new t.SFString),new e(r.inputOutput,"translation",new t.SFVec3f),new e(r.inputOutput,"rotation",new t.SFRotation),new e(r.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(r.inputOutput,"scaleOrientation",new t.SFRotation),new e(r.inputOutput,"center",new t.SFVec3f),new e(r.inputOutput,"llimit",new t.MFFloat),new e(r.inputOutput,"ulimit",new t.MFFloat),new e(r.inputOutput,"limitOrientation",new t.SFRotation),new e(r.inputOutput,"stiffness",new t.MFFloat(0,0,0)),new e(r.inputOutput,"skinCoordIndex",new t.MFInt32),new e(r.inputOutput,"skinCoordWeight",new t.MFFloat),new e(r.inputOutput,"displacers",new t.MFNode),new e(r.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(r.initializeOnly,"bboxCenter",new t.SFVec3f),new e(r.inputOnly,"addChildren",new t.MFNode),new e(r.inputOnly,"removeChildren",new t.MFNode),new e(r.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimJoint"},getComponentName:function(){return"H-Anim"},getContainerField:function(){return"children"},setCameraObject:function(t){o.prototype.setCameraObject.call(this,t||Boolean(this.skinCoordIndex_.length))},getModelMatrix:function(){return this.modelMatrix},traverse:function(t,e){if(t===s.CAMERA)this.modelMatrix.assign(this.getMatrix()).multRight(e.getModelViewMatrix().get());o.prototype.traverse.call(this,t,e)},groupTraverse:function(t,e){if(t===s.CAMERA)this.modelMatrix.assign(e.getModelViewMatrix().get());i.prototype.traverse.call(this,t,e)}});return u});t("x_ite/Components/H-Anim/HAnimSegment",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DGroupingNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t);this.addType(o.HAnimSegment)}s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"mass",new t.SFFloat),new e(o.inputOutput,"centerOfMass",new t.SFVec3f),new e(o.inputOutput,"momentsOfInertia",new t.MFFloat(0,0,0,0,0,0,0,0,0)),new e(o.inputOutput,"displacers",new t.MFNode),new e(o.inputOutput,"coord",new t.SFNode),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSegment"},getComponentName:function(){return"H-Anim"},getContainerField:function(){return"children"}});return s});t("x_ite/Components/H-Anim/HAnimSite",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DTransformNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t);this.addType(o.HAnimSite)}s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"translation",new t.SFVec3f),new e(o.inputOutput,"rotation",new t.SFRotation),new e(o.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(o.inputOutput,"scaleOrientation",new t.SFRotation),new e(o.inputOutput,"center",new t.SFVec3f),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSite"},getComponentName:function(){return"H-Anim"},getContainerField:function(){return"children"}});return s});t(["x_ite/Configuration/SupportedNodes","x_ite/Components/H-Anim/HAnimDisplacer","x_ite/Components/H-Anim/HAnimHumanoid","x_ite/Components/H-Anim/HAnimJoint","x_ite/Components/H-Anim/HAnimSegment","x_ite/Components/H-Anim/HAnimSite"],function(t,e,n,i,o,s){"use strict";var r={HAnimDisplacer:e,HAnimHumanoid:n,HAnimJoint:i,HAnimSegment:o,HAnimSite:s};var a={};for(var u in r)t.addType(u,r[u]);for(var u in a)t.addAbstractType(u,a[u]);return r})})();
