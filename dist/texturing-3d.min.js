!function(){var t=X3D.define,e=X3D.require;t("x_ite/Components/Rendering/X3DGeometricPropertyNode",["x_ite/Components/Core/X3DNode","x_ite/Bits/X3DConstants"],function(t,e){"use strict";function i(i){t.call(this,i),this.addType(e.X3DGeometricPropertyNode)}return i.prototype=Object.assign(Object.create(t.prototype),{constructor:i}),i}),t("x_ite/Browser/Core/Shading",[],function(){"use strict";var t=0,e={POINT:t++,WIREFRAME:t++,FLAT:t++,GOURAUD:t++,PHONG:t++};return Object.preventExtensions(e),Object.freeze(e),Object.seal(e),e}),t("standard/Math/Geometry/Plane3",["standard/Math/Numbers/Vector3","standard/Math/Numbers/Matrix4"],function(t,e){"use strict";function i(t,e){this.normal=e.copy(),this.distanceFromOrigin=e.dot(t)}var r=new t(0,0,0),n=new t(0,0,0),s=new e;return i.prototype={constructor:i,copy:function(){var t=Object.create(i.prototype);return t.normal=this.normal.copy(),t.distanceFromOrigin=this.distanceFromOrigin,t},assign:function(t){return this.normal.assign(t.normal),this.distanceFromOrigin=t.distanceFromOrigin,this},set:function(t,e){return this.normal.assign(e),this.distanceFromOrigin=e.dot(t),this},multRight:function(t){return n.assign(this.normal).multiply(this.distanceFromOrigin),s.assign(t).inverse(),s.multMatrixDir(r.assign(this.normal)).normalize(),t.multVecMatrix(n),this.normal.assign(r),this.distanceFromOrigin=r.dot(n),this},multLeft:function(t){return n.assign(this.normal).multiply(this.distanceFromOrigin),s.assign(t).inverse(),s.multDirMatrix(r.assign(this.normal)).normalize(),t.multMatrixVec(n),this.normal.assign(r),this.distanceFromOrigin=r.dot(n),this},getDistanceToPoint:function(e){return t.dot(e,this.normal)-this.distanceFromOrigin},intersectsLine:function(t,e){var i=t.point,r=t.direction,n=r.dot(this.normal);if(0===n)return!1;var s=(this.distanceFromOrigin-this.normal.dot(i))/n;return e.x=i.x+r.x*s,e.y=i.y+r.y*s,e.z=i.z+r.z*s,!0},toString:function(){return this.normal.toString()+" "+this.distanceFromOrigin}},i}),t("x_ite/Components/Rendering/X3DGeometryNode",["x_ite/Fields","x_ite/Components/Core/X3DNode","x_ite/Bits/X3DConstants","x_ite/Browser/Core/Shading","standard/Math/Numbers/Color3","standard/Math/Numbers/Vector2","standard/Math/Numbers/Vector3","standard/Math/Numbers/Matrix3","standard/Math/Numbers/Matrix4","standard/Math/Geometry/Box3","standard/Math/Geometry/Plane3","standard/Math/Geometry/Triangle3","standard/Math/Algorithm"],function(t,e,i,r,n,s,o,a,u,h,l,c,d){"use strict";function f(r){e.call(this,r),this.addType(i.X3DGeometryNode),this.addChildObjects("transparent",new t.SFBool,"bbox_changed",new t.SFTime,"rebuild",new t.SFTime),this.transparent_.setAccessType(i.outputOnly),this.bbox_changed_.setAccessType(i.outputOnly),this.rebuild_.setAccessType(i.outputOnly),this.min=new o(0,0,0),this.max=new o(0,0,0),this.bbox=new h(this.min,this.max,!0),this.solid=!0,this.geometryType=3,this.flatShading=void 0,this.colorMaterial=!1,this.attribNodes=[],this.attribs=[],this.currentTexCoordNode=this.getBrowser().getDefaultTextureCoordinate(),this.texCoordParams={min:new o(0,0,0)},this.multiTexCoords=[],this.texCoords=f.createArray(),this.colors=f.createArray(),this.normals=f.createArray(),this.flatNormals=f.createArray(),this.vertices=f.createArray(),this.vertexCount=0,this.depth=Function.prototype,this.display=Function.prototype,this.displayParticles=Function.prototype}const x=new o(0,0,0),p=new o(0,0,0),g=new u,m=new u,T=[new o(0,0,1),new o(0,0,-1),new o(0,1,0),new o(0,-1,0),new o(1,0,0)];return f.createArray=function(){var t=[];return t.typedArray=new Float32Array,t.assign=function(t){this.length=0,Array.prototype.push.apply(this,t)},t.getValue=function(){return this.typedArray},t.shrinkToFit=function(){this.length!==this.typedArray.length?this.typedArray=new Float32Array(this):this.typedArray.set(this)},t},f.prototype=Object.assign(Object.create(e.prototype),{constructor:f,intersection:new o(0,0,0),uvt:{u:0,v:0,t:0},v0:new o(0,0,0),v1:new o(0,0,0),v2:new o(0,0,0),normal:new o(0,0,0),setup:function(){e.prototype.setup.call(this),this.addInterest("requestRebuild",this),this.rebuild_.addInterest("rebuild",this),this.rebuild()},initialize:function(){e.prototype.initialize.call(this),this.isLive().addInterest("set_live__",this);var t=this.getBrowser().getContext();if(this.primitiveMode=t.TRIANGLES,this.frontFace=t.CCW,this.attribBuffers=[],this.texCoordBuffers=[],this.colorBuffer=t.createBuffer(),this.normalBuffer=t.createBuffer(),this.vertexBuffer=t.createBuffer(),this.planes=[],this.geometryType>1)for(var i=0;i<5;++i)this.planes[i]=new l(o.Zero,T[0]);this.set_live__()},setGeometryType:function(t){this.geometryType=t},getGeometryType:function(){return this.geometryType},getBBox:function(){return this.bbox},setBBox:function(t){if(!t.equals(this.bbox)){t.getExtents(this.min,this.max),this.bbox.assign(t);for(var e=0;e<5;++e)this.planes[e].set(e%2?this.min:this.max,T[e]);this.bbox_changed_.addEvent()}},getMin:function(){return this.min},getMax:function(){return this.max},getMatrix:function(){return u.Identity},setPrimitiveMode:function(t){this.primitiveMode=t},getPrimitiveMode:function(){return this.primitiveMode},setSolid:function(t){this.solid=t},setCCW:function(t){this.frontFace=t?this.getBrowser().getContext().CCW:this.getBrowser().getContext().CW},getAttrib:function(){return this.attribNodes},getAttribs:function(){return this.attribs},setColors:function(t){this.colors.assign(t)},getColors:function(){return this.colors},setMultiTexCoords:function(t){var e=this.multiTexCoords;e.length=0,Array.prototype.push.apply(e,t)},getMultiTexCoords:function(){return this.multiTexCoords},getTexCoords:function(){return this.texCoords},setCurrentTexCoord:function(t){this.currentTexCoordNode=t||this.getBrowser().getDefaultTextureCoordinate()},setNormals:function(t){this.normals.assign(t)},getNormals:function(){return this.normals},setVertices:function(t){this.vertices.assign(t)},getVertices:function(){return this.vertices},buildTexCoords:function(){for(var t=this.getTexCoordParams(),e=t.min,i=t.Sindex,r=t.Tindex,n=t.Ssize,s=e[i],o=e[r],a=this.texCoords,u=this.vertices.getValue(),h=0,l=u.length;h<l;h+=4)a.push((u[h+i]-s)/n,(u[h+r]-o)/n,0,1);this.multiTexCoords.push(a)},getTexCoordParams:function(){var t=this.texCoordParams,e=this.getBBox(),i=e.size,r=i.x,n=i.y,s=i.z;return t.min.assign(e.center).subtract(i.divide(2)),r>=n&&r>=s?(t.Ssize=r,t.Sindex=0,t.Tindex=n>=s?1:2):n>=r&&n>=s?(t.Ssize=n,t.Sindex=1,t.Tindex=r>=s?0:2):(t.Ssize=s,t.Sindex=2,t.Tindex=r>=n?0:1),t},refineNormals:function(t,e,i){if(0===i)return e;var r=Math.cos(d.clamp(i,0,Math.PI)),n=[];for(var s in t)for(var a=t[s],u=0,h=a.length;u<h;++u){for(var l=a[u],c=e[l],f=new o(0,0,0),x=0;x<h;++x){var p=e[a[x]];p.dot(c)>=r&&f.add(p)}n[l]=f.normalize()}return n},isClipped:function(t,e){return e.some(function(e){return e.isClipped(t)})},transformLine:function(t){},transformMatrix:function(t){},intersectsLine:function(t,e,i,r){try{var n=!1;if(this.intersectsBBox(t)){this.transformLine(t),this.transformMatrix(g.assign(i));for(var a=this.multiTexCoords[0].getValue(),u=this.normals.getValue(),h=this.vertices.getValue(),l=this.uvt,c=this.v0,d=this.v1,f=this.v2,x=0,m=this.vertexCount;x<m;x+=3){var T=4*x;if(c.x=h[T],c.y=h[T+1],c.z=h[T+2],d.x=h[T+4],d.y=h[T+5],d.z=h[T+6],f.x=h[T+8],f.y=h[T+9],f.z=h[T+10],t.intersectsTriangle(c,d,f,l)){var C=l.u,y=l.v,_=l.t,v=new o(_*h[T]+C*h[T+4]+y*h[T+8],_*h[T+1]+C*h[T+5]+y*h[T+9],_*h[T+2]+C*h[T+6]+y*h[T+10]);if(this.isClipped(g.multVecMatrix(p.assign(v)),e))continue;var b=new s(_*a[T]+C*a[T+4]+y*a[T+8],_*a[T+1]+C*a[T+5]+y*a[T+9]),A=3*x,F=new o(_*u[A]+C*u[A+3]+y*u[A+6],_*u[A+1]+C*u[A+4]+y*u[A+7],_*u[A+2]+C*u[A+5]+y*u[A+8]);r.push({texCoord:b,normal:F,point:this.getMatrix().multVecMatrix(v)}),n=!0}}}return n}catch(t){return console.log(t),!1}},intersectsBBox:function(t){var e=this.planes,i=this.min,r=this.max,n=i.x,s=r.x,o=i.y,a=r.y,u=i.z,h=r.z,l=this.intersection;return!!(e[0].intersectsLine(t,l)&&l.x>=n&&l.x<=s&&l.y>=o&&l.y<=a)||(!!(e[1].intersectsLine(t,l)&&l.x>=n&&l.x<=s&&l.y>=o&&l.y<=a)||(!!(e[2].intersectsLine(t,l)&&l.x>=n&&l.x<=s&&l.z>=u&&l.z<=h)||(!!(e[3].intersectsLine(t,l)&&l.x>=n&&l.x<=s&&l.z>=u&&l.z<=h)||!!(e[4].intersectsLine(t,l)&&l.y>=o&&l.y<=a&&l.z>=u&&l.z<=h))))},intersectsBox:function(t,e,i){try{if(t.intersectsBox(this.bbox)){t.multRight(m.assign(this.getMatrix()).inverse()),this.transformMatrix(i);for(var r=this.vertices.getValue(),n=this.v0,s=this.v1,o=this.v2,a=0,u=this.vertexCount;a<u;a+=3){var h=4*a;if(n.x=r[h],n.y=r[h+1],n.z=r[h+2],s.x=r[h+4],s.y=r[h+5],s.z=r[h+6],o.x=r[h+8],o.y=r[h+9],o.z=r[h+10],t.intersectsTriangle(n,s,o)){if(e.length){if(this.isClipped(i.multVecMatrix(p.assign(n)),e))continue;if(this.isClipped(i.multVecMatrix(p.assign(s)),e))continue;if(this.isClipped(i.multVecMatrix(p.assign(o)),e))continue}return!0}}}return!1}catch(t){return console.log(t),!1}},set_live__:function(){this.isLive().getValue()?this.getBrowser().getBrowserOptions().Shading_.addInterest("set_shading__",this):this.getBrowser().getBrowserOptions().Shading_.removeInterest("set_shading__",this)},set_shading__:function(t){if(!(this.geometryType<2)){var e=this.getBrowser().getBrowserOptions().getShading()===r.FLAT;if(e!==this.flatShading){this.flatShading=e;var i=this.getBrowser().getContext();if(e&&!this.flatNormals.length){for(var n=this.frontFace===i.CW,s=this.flatNormals,o=this.vertices.getValue(),a=this.v0,u=this.v1,h=this.v2,l=this.normal,d=0,f=o.length;d<f;d+=12)c.normal(a.set(o[d],o[d+1],o[d+2]),u.set(o[d+4],o[d+5],o[d+6]),h.set(o[d+8],o[d+9],o[d+10]),l),n&&l.negate(),s.push(l.x,l.y,l.z,l.x,l.y,l.z,l.x,l.y,l.z);s.shrinkToFit()}i.bindBuffer(i.ARRAY_BUFFER,this.normalBuffer),i.bufferData(i.ARRAY_BUFFER,e?this.flatNormals.getValue():this.normals.getValue(),i.STATIC_DRAW)}}},requestRebuild:function(){this.rebuild_.addEvent()},rebuild:function(){this.clear(),this.build();for(var t=0,e=this.attribs.length;t<e;++t)this.attribs[t].shrinkToFit();for(var t=0,e=this.multiTexCoords.length;t<e;++t)this.multiTexCoords[t].shrinkToFit();this.colors.shrinkToFit(),this.normals.shrinkToFit(),this.vertices.shrinkToFit();var i=this.min,r=this.max,n=this.vertices.getValue();if(n.length){if(i.x===Number.POSITIVE_INFINITY)for(var t=0,e=n.length;t<e;t+=4)x.set(n[t],n[t+1],n[t+2]),i.min(x),r.max(x);this.bbox.setExtents(i,r)}else this.bbox.setExtents(i.set(0,0,0),r.set(0,0,0));if(this.bbox_changed_.addEvent(),this.geometryType>1){for(var t=0;t<5;++t)this.planes[t].set(t%2?i:r,T[t]);0===this.multiTexCoords.length&&(this.buildTexCoords(),this.texCoords.shrinkToFit())}this.set_shading__(this.getBrowser().getBrowserOptions().Shading_),this.transfer()},clear:function(){this.min.set(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),this.max.set(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(var t=this.attribs,e=0,i=t.length;e<i;++e)t[e].length=0;for(var e=t.length,i=this.attribNodes.length;e<i;++e)t[e]=f.createArray();t.length=i,this.flatShading=void 0,this.colors.length=0,this.multiTexCoords.length=0,this.texCoords.length=0,this.normals.length=0,this.flatNormals.length=0,this.vertices.length=0},transfer:function(){for(var t=this.getBrowser().getContext(),e=this.vertices.length/4,i=this.attribBuffers.length,r=this.attribs.length;i<r;++i)this.attribBuffers.push(t.createBuffer());for(var i=0,r=this.attribs.length;i<r;++i)t.bindBuffer(t.ARRAY_BUFFER,this.attribBuffers[i]),t.bufferData(t.ARRAY_BUFFER,this.attribs[i].getValue(),t.STATIC_DRAW);for(var i=this.texCoordBuffers.length,r=this.multiTexCoords.length;i<r;++i)this.texCoordBuffers.push(t.createBuffer());for(var i=0,r=this.multiTexCoords.length;i<r;++i)t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffers[i]),t.bufferData(t.ARRAY_BUFFER,this.multiTexCoords[i].getValue(),t.STATIC_DRAW);t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors.getValue(),t.STATIC_DRAW),this.colorMaterial=Boolean(this.colors.length),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.getValue(),t.STATIC_DRAW),this.vertexCount=e,this.vertexCount?(delete this.depth,delete this.display,delete this.displayParticles):(this.depth=Function.prototype,this.display=Function.prototype,this.displayParticles=Function.prototype)},traverse:function(t,e){},depth:function(t,e,i){i.enableVertexAttribute(t,this.vertexBuffer),t.drawArrays(this.primitiveMode,0,this.vertexCount)},display:function(t,e){try{var i=e.shaderNode,r=this.attribNodes,n=this.attribBuffers;e.geometryType=this.geometryType,e.colorMaterial=this.colorMaterial,i.enable(t),i.setLocalUniforms(t,e);for(var s=0,o=r.length;s<o;++s)r[s].enable(t,i,n[s]);if(this.colorMaterial&&i.enableColorAttribute(t,this.colorBuffer),i.enableTexCoordAttribute(t,this.texCoordBuffers),i.enableNormalAttribute(t,this.normalBuffer),i.enableVertexAttribute(t,this.vertexBuffer),i.wireframe)for(var s=0,o=this.vertexCount;s<o;s+=3)t.drawArrays(i.primitiveMode,s,3);else{var a=u.prototype.determinant3.call(e.modelViewMatrix)>0;t.frontFace(a?this.frontFace:this.frontFace===t.CCW?t.CW:t.CCW),e.transparent&&!this.solid?(t.enable(t.CULL_FACE),t.cullFace(t.FRONT),t.drawArrays(i.primitiveMode,0,this.vertexCount),t.cullFace(t.BACK),t.drawArrays(i.primitiveMode,0,this.vertexCount)):(this.solid?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),t.drawArrays(i.primitiveMode,0,this.vertexCount))}for(var s=0,o=r.length;s<o;++s)r[s].disable(t,i);i.disableColorAttribute(t),i.disableTexCoordAttribute(t),i.disableNormalAttribute(t),i.disable(t)}catch(t){console.log(t)}},displayParticlesDepth:function(t,e,i,r,n){var t=e.renderer.getBrowser().getContext();i.enableVertexAttribute(t,this.vertexBuffer);for(var s=e.modelViewMatrix,o=s[12],a=s[13],h=s[14],l=0;l<n;++l){var c=r[l];s[12]=o,s[13]=a,s[14]=h,u.prototype.translate.call(s,c.position),i.setParticle(t,l,c,s,!1),t.drawArrays(i.primitiveMode,0,this.vertexCount)}},displayParticles:function(t,e,i,r){try{var n=e.shaderNode,s=this.attribNodes,o=this.attribBuffers;e.geometryType=this.geometryType,e.colorMaterial=this.colorMaterial,n.enable(t),n.setLocalUniforms(t,e);for(var a=0,h=s.length;a<h;++a)s[a].enable(t,n,o[a]);this.colorMaterial&&n.enableColorAttribute(t,this.colorBuffer),n.enableTexCoordAttribute(t,this.texCoordBuffers),n.enableNormalAttribute(t,this.normalBuffer),n.enableVertexAttribute(t,this.vertexBuffer);var l=e.materialNode,c=l||n.getCustom(),d=e.modelViewMatrix,f=d[12],x=d[13],p=d[14];if(n.wireframe)for(var g=0;g<r;++g){var m=i[g];d[12]=f,d[13]=x,d[14]=p,u.prototype.translate.call(d,m.position),n.setParticle(t,g,m,d,c);for(var a=0,h=this.vertexCount;a<h;a+=3)t.drawArrays(n.primitiveMode,a,3)}else{var T=u.prototype.determinant3.call(e.modelViewMatrix)>0;if(t.frontFace(T?this.frontFace:this.frontFace===t.CCW?t.CW:t.CCW),e.transparent&&!this.solid)for(var g=0;g<r;++g){var m=i[g];d[12]=f,d[13]=x,d[14]=p,u.prototype.translate.call(d,m.position),n.setParticle(t,g,m,d,c),t.enable(t.CULL_FACE),t.cullFace(t.FRONT),t.drawArrays(n.primitiveMode,0,this.vertexCount),t.cullFace(t.BACK),t.drawArrays(n.primitiveMode,0,this.vertexCount)}else{this.solid?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE);for(var g=0;g<r;++g){var m=i[g];d[12]=f,d[13]=x,d[14]=p,u.prototype.translate.call(d,m.position),n.setParticle(t,g,m,d,c),t.drawArrays(n.primitiveMode,0,this.vertexCount)}}}for(var a=0,h=s.length;a<h;++a)s[a].disable(t,n);n.disableColorAttribute(t),n.disableTexCoordAttribute(t),n.disableNormalAttribute(t),n.disable(t)}catch(t){console.log(t)}}}),f}),t("x_ite/Components/Texturing/X3DTextureCoordinateNode",["x_ite/Fields","x_ite/Components/Rendering/X3DGeometricPropertyNode","x_ite/Components/Rendering/X3DGeometryNode","x_ite/Bits/X3DConstants"],function(t,e,i,r){"use strict";function n(t){e.call(this,t),this.addType(r.X3DTextureCoordinateNode),this.texCoordArray=i.createArray()}return n.prototype=Object.assign(Object.create(e.prototype),{constructor:n,init:function(t){this.texCoordArray.length=0,t.push(this.texCoordArray)},addTexCoord:function(t,e){this.addTexCoordToChannel(t,e[0])}}),n}),t("x_ite/Components/Texturing3D/TextureCoordinate3D",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Texturing/X3DTextureCoordinateNode","x_ite/Bits/X3DConstants"],function(t,e,i,r,n){"use strict";function s(t){r.call(this,t),this.addType(n.TextureCoordinate3D)}return s.prototype=Object.assign(Object.create(r.prototype),{constructor:s,fieldDefinitions:new i([new e(n.inputOutput,"metadata",new t.SFNode),new e(n.inputOutput,"point",new t.MFVec3f)]),getTypeName:function(){return"TextureCoordinate3D"},getComponentName:function(){return"Texturing3D"},getContainerField:function(){return"texCoord"},initialize:function(){r.prototype.initialize.call(this),this.point_.addInterest("set_point__",this),this.set_point__()},set_point__:function(){this.point=this.point_.getValue(),this.length=this.point_.length},isEmpty:function(){return 0===this.length},getSize:function(){return this.length},get1Point:function(t,e){if(t<this.length){const i=this.point;return t*=3,e.set(i[t],i[t+1],i[t+2],1)}return e.set(0,0,0,1)},addTexCoordToChannel:function(t,e){if(t>=0&&t<this.length){var i=this.point;t*=3,e.push(i[t],i[t+1],i[t+2],1)}else e.push(0,0,0,1)},getTexCoord:function(t){for(var e=this.point_,i=0,r=e.length;i<r;++i){var n=e[i];t[i]=new Vector4(n.x,n.y,n.z,1)}return t.length=r,t}}),s}),t("x_ite/Components/Texturing3D/TextureCoordinate4D",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Texturing/X3DTextureCoordinateNode","x_ite/Bits/X3DConstants"],function(t,e,i,r,n){"use strict";function s(t){r.call(this,t),this.addType(n.TextureCoordinate4D)}return s.prototype=Object.assign(Object.create(r.prototype),{constructor:s,fieldDefinitions:new i([new e(n.inputOutput,"metadata",new t.SFNode),new e(n.inputOutput,"point",new t.MFVec4f)]),getTypeName:function(){return"TextureCoordinate4D"},getComponentName:function(){return"Texturing3D"},getContainerField:function(){return"texCoord"},initialize:function(){r.prototype.initialize.call(this),this.point_.addInterest("set_point__",this),this.set_point__()},set_point__:function(){this.point=this.point_.getValue(),this.length=this.point_.length},isEmpty:function(){return 0===this.length},getSize:function(){return this.length},get1Point:function(t,e){if(t<this.length){const i=this.point;return t*=4,e.set(i[t],i[t+1],i[t+2],i[t+3])}return e.set(0,0,0,1)},addTexCoordToChannel:function(t,e){if(t>=0&&t<this.length){var i=this.point;t*=4,e.push(i[t],i[t+1],i[t+2],i[t+3])}else e.push(0,0,0,1)},getTexCoord:function(t){for(var e=this.point_,i=0,r=e.length;i<r;++i){var n=e[i];t[i]=new Vector4(n.x,n.y,n.z,n.w)}return t.length=r,t}}),s}),t("x_ite/Components/Shape/X3DAppearanceChildNode",["x_ite/Components/Core/X3DNode","x_ite/Bits/X3DConstants"],function(t,e){"use strict";function i(i){t.call(this,i),this.addType(e.X3DAppearanceChildNode)}return i.prototype=Object.assign(Object.create(t.prototype),{constructor:i}),i}),t("x_ite/Components/Texturing/X3DTextureTransformNode",["x_ite/Components/Shape/X3DAppearanceChildNode","x_ite/Bits/X3DConstants","standard/Math/Numbers/Matrix4"],function(t,e,i){"use strict";function r(r){t.call(this,r),this.addType(e.X3DTextureTransformNode),this.matrix=new i,this.matrixArray=new Float32Array(this.matrix)}return r.prototype=Object.assign(Object.create(t.prototype),{constructor:r,setMatrix:function(t){this.matrixArray.set(t)},getMatrix:function(){return this.matrix},setShaderUniforms:function(t,e){t.uniformMatrix4fv(e.x3d_TextureMatrix,!1,this.matrixArray)}}),r}),t("x_ite/Components/Texturing3D/TextureTransform3D",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Texturing/X3DTextureTransformNode","x_ite/Bits/X3DConstants","standard/Math/Numbers/Vector3","standard/Math/Numbers/Rotation4"],function(t,e,i,r,n,s,o){"use strict";function a(t){r.call(this,t),this.addType(n.TextureTransform3D)}var u=new s(0,0,0);return a.prototype=Object.assign(Object.create(r.prototype),{constructor:a,fieldDefinitions:new i([new e(n.inputOutput,"metadata",new t.SFNode),new e(n.inputOutput,"translation",new t.SFVec3f),new e(n.inputOutput,"rotation",new t.SFRotation),new e(n.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(n.inputOutput,"center",new t.SFVec3f)]),getTypeName:function(){return"TextureTransform3D"},getComponentName:function(){return"Texturing3D"},getContainerField:function(){return"textureTransform"},initialize:function(){r.prototype.initialize.call(this),this.addInterest("eventsProcessed",this),this.eventsProcessed()},eventsProcessed:function(){var t=this.translation_.getValue(),e=this.rotation_.getValue(),i=this.scale_.getValue(),r=this.center_.getValue(),n=this.getMatrix();n.identity(),r.equals(s.Zero)||n.translate(u.assign(r).negate()),i.equals(s.One)||n.scale(i),e.equals(o.Identity)||n.rotate(e),r.equals(s.Zero)||n.translate(r),t.equals(s.Zero)||n.translate(t),this.setMatrix(n)}}),a}),t("x_ite/Components/Texturing3D/TextureTransformMatrix3D",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Texturing/X3DTextureTransformNode","x_ite/Bits/X3DConstants"],function(t,e,i,r,n){"use strict";function s(t){r.call(this,t),this.addType(n.TextureTransformMatrix3D)}return s.prototype=Object.assign(Object.create(r.prototype),{constructor:s,fieldDefinitions:new i([new e(n.inputOutput,"metadata",new t.SFNode),new e(n.inputOutput,"matrix",new t.SFMatrix4f(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1))]),getTypeName:function(){return"TextureTransformMatrix3D"},getComponentName:function(){return"Texturing3D"},getContainerField:function(){return"textureTransform"},eventsProcessed:function(){var t=this.getMatrix();t.assign(this.matrix_.getValue()),this.setMatrix(t)}}),s}),t("x_ite/Components/Texturing/X3DTextureNode",["x_ite/Fields","x_ite/Components/Shape/X3DAppearanceChildNode","x_ite/Bits/X3DConstants"],function(t,e,i){"use strict";function r(r){e.call(this,r),this.addType(i.X3DTextureNode),this.addChildObjects("transparent",new t.SFBool),this.transparent_.setAccessType(i.outputOnly)}var n=["EXT_texture_filter_anisotropic","MOZ_EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"];return r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,initialize:function(){e.prototype.initialize.call(this);var t=this.getBrowser().getContext();this.texture=t.createTexture()},getTexture:function(){return this.texture},updateTextureProperties:function(t,e,i,r,s,o,a,u){var h=this.getBrowser().getContext();h.bindTexture(t,this.getTexture()),Math.max(r,s)<this.getBrowser().getMinTextureSize()&&!e?(h.texParameteri(t,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(t,h.TEXTURE_MAG_FILTER,h.NEAREST)):(i.generateMipMaps_.getValue()&&h.generateMipmap(t),h.texParameteri(t,h.TEXTURE_MIN_FILTER,h[i.getMinificationFilter()]),h.texParameteri(t,h.TEXTURE_MAG_FILTER,h[i.getMagnificationFilter()])),e?(h.texParameteri(t,h.TEXTURE_WRAP_S,h[i.getBoundaryModeS()]),h.texParameteri(t,h.TEXTURE_WRAP_T,h[i.getBoundaryModeT()])):(h.texParameteri(t,h.TEXTURE_WRAP_S,o?h.REPEAT:h.CLAMP_TO_EDGE),h.texParameteri(t,h.TEXTURE_WRAP_T,a?h.REPEAT:h.CLAMP_TO_EDGE));for(var l=0;l<n.length;++l){var c=h.getExtension(n[l]);if(c){h.texParameterf(t,c.TEXTURE_MAX_ANISOTROPY_EXT,i.anisotropicDegree_.getValue());break}}}}),r}),t("x_ite/Components/Texturing3D/X3DTexture3DNode",["x_ite/Components/Texturing/X3DTextureNode","x_ite/Bits/X3DConstants"],function(t,e){"use strict";function i(i){t.call(this,i),this.addType(e.X3DTexture3DNode)}return i.prototype=Object.assign(Object.create(t.prototype),{constructor:i}),i}),e(["x_ite/Configuration/SupportedNodes","x_ite/Components/Texturing3D/TextureCoordinate3D","x_ite/Components/Texturing3D/TextureCoordinate4D","x_ite/Components/Texturing3D/TextureTransform3D","x_ite/Components/Texturing3D/TextureTransformMatrix3D","x_ite/Components/Texturing3D/X3DTexture3DNode"],function(t,e,i,r,n){"use strict";var s={TextureCoordinate3D:e,TextureCoordinate4D:i,TextureTransform3D:r,TextureTransformMatrix3D:n},o={};for(var a in s)t.addType(a,s[a]);for(var a in o)t.addAbstractType(a,o[a]);return s}),t("components/texturing-3d",function(){})}();
